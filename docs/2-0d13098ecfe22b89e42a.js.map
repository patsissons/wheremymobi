{"version":3,"sources":["webpack:///./.cache/public-page-renderer.js","webpack:///./src/components/Loader/Loader.tsx","webpack:///./src/components/Loader/index.ts","webpack:///./src/components/StationMap/decorators.ts","webpack:///./src/packages/react-google-maps-controls/ControlSite/ControlSite.tsx","webpack:///./src/packages/react-google-maps-controls/ControlSite/index.ts","webpack:///./src/packages/react-google-maps-controls/Control/Control.tsx","webpack:///./src/packages/react-google-maps-controls/Control/index.ts","webpack:///./src/components/StationMap/components/GpsMarker/GpsMarker.tsx","webpack:///./src/components/StationMap/components/GpsMarker/index.ts","webpack:///./src/components/StationMap/components/StationMarker/icon.ts","webpack:///./src/components/StationMap/components/StationMarker/StationMarker.tsx","webpack:///./src/components/StationMap/components/StationMarker/index.ts","webpack:///./src/components/StationMap/components/CustomControl/CustomControl.tsx","webpack:///./src/components/StationMap/components/StationInfo/StationInfo.tsx","webpack:///./src/components/StationMap/components/StationInfo/index.ts","webpack:///./src/components/StationMap/StationMap.tsx","webpack:///./src/components/StationMap/index.ts","webpack:///./.cache/gatsby-browser-entry.js","webpack:///./src/layouts/DefaultLayout/components/Header/Header.tsx","webpack:///./src/layouts/DefaultLayout/components/Header/index.ts","webpack:///./src/layouts/DefaultLayout/DefaultLayout.tsx","webpack:///./src/layouts/DefaultLayout/index.ts","webpack:///./src/station/Node.ts","webpack:///./src/data/transform/Smoove.ts","webpack:///./src/station/Station.ts","webpack:///./src/data/config.ts","webpack:///./src/data/StationSource.ts","webpack:///./src/components/pages/IndexPage/decorators.ts","webpack:///./src/components/pages/IndexPage/IndexPage.tsx","webpack:///./src/components/pages/IndexPage/index.ts","webpack:///./src/components/pages/NotFoundPage/NotFoundPage.tsx","webpack:///./src/components/pages/NotFoundPage/index.ts","webpack:///./src/components/pages/index.ts","webpack:///./.cache/public-page-renderer-prod.js"],"names":["m","module","exports","require","default","loaders","compose","Loader","withProps","_ref2","name","Math","floor","random","length","_ref","Boolean","react","className","styles","dist_default","a","withMapsApiKey","defaultProps","mapsApiKey","ControlSite","_React$PureComponent","_this","_len","arguments","args","Array","_key","call","apply","this","concat","containerRef","React","inheritsLoose_default","_proto","prototype","componentDidMount","_this$props$position","props","position","google","maps","ControlPosition","BOTTOM_CENTER","current","map","controls","push","componentWillUnmount","_this$props$position2","removeAt","getArray","indexOf","render","children","createPortal","ref","getDiv","createClass_default","key","get","context","MAP","contextTypes","[object Object]","PropTypes","Control","onClick","objectWithoutPropertiesLoose_default","Object","assign","type","GpsMarker","_ref$color","color","coords","timestamp","accuracy","heading","lat","latitude","lng","longitude","LatLng","lib","center","radius","options","fillColor","strokeColor","fillOpacity","strokeWeight","icon","anchor","Point","path","SymbolPath","FORWARD_CLOSED_ARROW","rotation","scale","zIndex","Marker","MAX_ZINDEX","marker","trim","markerWithFillColor","station","encodeURIComponent","replace","bikes","createIcon","url","labelOrigin","StationMarker","withHandlers","handleOnClick","showInfo","node","label","text","free","fontSize","fontWeight","CustomControl","_this$props","container","_this$props2","StationInfo","fetchedAt","number","toString","padStart","operative","total","rel","target","href","fromNow","StationMap","state","followGps","handleDrag","setState","handleGpsCenter","renderInfo","selectedNode","_selectedNode$station","onCloseClick","hideInfo","pixelOffset","Size","components_StationInfo","renderMarker","isValid","console","debug","components_StationMarker","renderMarkers","clustered","markers","from","nodes","values","MarkerClusterer_default","averageCenter","enableRetinaIcons","gridSize","maxZoom","renderPosition","components_GpsMarker","defaultCenter","defaultZoom","gpsCenter","onDrag","zoom","gpsZoom","react_google_maps_controls_ControlSite","react_google_maps_controls_Control","_position$coords","min","max","log2","withStateHandlers","undefined","googleMapURL","loadingElement","containerElement","mapElement","mapProps","reduce","set","Map","withScriptjs","withGoogleMap","StaticQueryContext","createContext","StaticQuery","react_default","createElement","Consumer","staticQueryData","data","query","propTypes","object","string","isRequired","func","Header","description","logo","logoUrl","alt","src","DefaultLayout","errors","fromRenderProps","gatsby_browser_entry_StaticQuery","_3229557108","_ref3","site","_ref$site$siteMetadat","siteMetadata","components_Header","StationNode","Number","isInteger","isFinite","test","every","x","create","createStation","avl_bikes","free_slots","total_slots","match","exec","Error","error","parseNameAndNumber","parseLatLng","coordinates","StationSourceType","result","configMap","location","uri","cors","StationSource","config","transform","verboseOutput","process","configOrKey","toLowerCase","getConfig","Smoove","mapTransform","nearest","distance","geometry","spherical","computeDistanceBetween","sort","left","right","getConfigByLocation","getJSON","headers","ajax","getStations","source","pipe","tap","response","stations","moment","catchError","message","of","watchStations","reloader","interval","_this2","merge","timer","debounceTime","mergeMap","log","getUrlParams","window","params","URLSearchParams","search","forEach","value","setObservableConfig","fromESObservable","withQueryParams","IndexPage","enableHighAccuracy","Subject","reload","next","mapPropsStream","navigator","geolocation","filter","Observable","observer","watchPosition","startWith","combineLatest","prev","withPosition","defaultKey","distinctUntilChanged","withStations","layouts_DefaultLayout","components_StationMap","components_Loader","NotFoundPage","__webpack_require__","d","__webpack_exports__","pages_IndexPage","pages_NotFoundPage","ProdPageRenderer","pageResources","loader","getResourcesForPathnameSync","pathname","InternalPageRenderer","json","shape"],"mappings":"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","file":"2-0d13098ecfe22b89e42a.js","sourcesContent":["const preferDefault = m => (m && m.default) || m\n\nif (process.env.BUILD_STAGE === `develop`) {\n  module.exports = preferDefault(require(`./public-page-renderer-dev`))\n} else if (process.env.BUILD_STAGE === `build-javascript`) {\n  module.exports = preferDefault(require(`./public-page-renderer-prod`))\n} else {\n  module.exports = () => null\n}\n","import * as React from 'react';\n\nimport Spinner, {SpinnerProps} from 'react-spinkit';\nimport {compose, withProps} from 'recompose';\n\nimport * as styles from './Loader.module.scss';\n\nconst loaders: Required<SpinnerProps['name']>[] = [\n  'double-bounce',\n  'chasing-dots',\n  'circle',\n  'cube-grid',\n];\n\nfunction randomLoaderName() {\n  return loaders[Math.floor(Math.random() * loaders.length)];\n}\n\nexport interface Props {\n  name?: SpinnerProps['name'];\n}\n\nexport function Loader({name}: Props) {\n  return (\n    Boolean(name) && (\n      <div className={styles.LoadingContainer}>\n        <Spinner className={styles.Loader} name={name} />\n      </div>\n    )\n  );\n}\n\nexport default compose<Props, {}>(\n  withProps(({name}: Props) => ({name: name || randomLoaderName()})),\n)(Loader as any);\n","import Loader, {Props} from './Loader';\n\nexport type LoaderProps = Props;\nexport default Loader;\n","import {defaultProps} from 'recompose';\n\nexport interface WithMapsApiKeyProps {\n  mapsApiKey: string;\n}\n\nexport const withMapsApiKey = defaultProps({\n  mapsApiKey: 'AIzaSyBXrYScIU6sWYUWLLlovYhzq-bLzwTgAoc',\n});\n","import * as React from 'react';\n\nimport * as PropTypes from 'prop-types';\nimport {createPortal} from 'react-dom';\nimport {MAP} from 'react-google-maps/lib/constants';\nimport {compose} from 'recompose';\n\nimport * as styles from './ControlSite.module.scss';\n\nexport interface Props {\n  position?: google.maps.ControlPosition;\n}\n\ntype ComposedProps = Props;\n\nexport class ControlSite extends React.PureComponent<ComposedProps> {\n  static contextTypes = {[MAP]: PropTypes.object};\n\n  private readonly containerRef = React.createRef<HTMLDivElement>();\n\n  get map(): google.maps.Map {\n    return this.context[MAP];\n  }\n\n  componentDidMount() {\n    const {position = google.maps.ControlPosition.BOTTOM_CENTER} = this.props;\n\n    if (this.containerRef.current) {\n      this.map.controls[position].push(this.containerRef.current);\n    }\n  }\n\n  componentWillUnmount() {\n    const {position = google.maps.ControlPosition.BOTTOM_CENTER} = this.props;\n\n    if (this.containerRef.current) {\n      this.map.controls[position].removeAt(\n        this.map.controls[position]\n          .getArray()\n          .indexOf(this.containerRef.current),\n      );\n    }\n  }\n\n  render() {\n    const {children} = this.props;\n\n    return createPortal(\n      <div className={styles.Container} ref={this.containerRef}>\n        {children}\n      </div>,\n      this.map.getDiv(),\n    );\n  }\n}\n\nexport default compose<ComposedProps, Props>()(ControlSite);\n","import ControlSite from './ControlSite';\n\nexport default ControlSite;\n","import * as React from 'react';\n\nimport * as styles from './Control.module.scss';\n\nexport interface Props {\n  children?: React.ReactNode;\n  onClick?(): void;\n}\n\nexport function Control({onClick, ...props}: Props) {\n  if (onClick) {\n    return (\n      <button\n        type=\"button\"\n        onClick={onClick}\n        className={styles.Container}\n        {...props}\n      />\n    );\n  }\n  return <div className={styles.Container} {...props} />;\n}\n\nexport default Control;\n","import Control from './Control';\n\nexport default Control;\n","import * as React from 'react';\n\nimport {Circle, Marker, MarkerProps} from 'react-google-maps';\n\nexport interface Props extends MarkerProps {\n  color?: string;\n  coords: Coordinates;\n  timestamp: number;\n}\n\ntype ComposedProps = Props;\n\nexport function GpsMarker({\n  color = 'magenta',\n  coords,\n  timestamp,\n  ...props\n}: ComposedProps) {\n  const {accuracy, heading, latitude: lat, longitude: lng} = coords;\n\n  const position = new google.maps.LatLng(lat, lng);\n\n  return (\n    <>\n      <Circle\n        center={position}\n        radius={accuracy}\n        options={{\n          fillColor: color,\n          strokeColor: color,\n          fillOpacity: 0.25,\n          strokeWeight: 1,\n        }}\n      />\n      <Marker\n        icon={{\n          anchor: new google.maps.Point(0, 2.6),\n          path: google.maps.SymbolPath.FORWARD_CLOSED_ARROW,\n          strokeColor: color,\n          fillColor: color,\n          fillOpacity: 1,\n          rotation: heading,\n          scale: 10,\n          strokeWeight: 1,\n        }}\n        position={new google.maps.LatLng(lat, lng)}\n        zIndex={google.maps.Marker.MAX_ZINDEX}\n        {...props}\n      />\n    </>\n  );\n}\n\nexport default GpsMarker;\n","import GpsMarker, {Props} from './GpsMarker';\n\nexport type GpsMarkerProps = Props;\nexport default GpsMarker;\n","import {Station} from '~/station';\n\nconst marker = `\n<svg width=\"100px\" height=\"100px\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 100 100\" enable-background=\"new 0 0 100 100\" xml:space=\"preserve\">\n  <path id=\"bg\" fill=\"#ffffff\" d=\"m77.438,31.70225c-0.139,-5.802 -1.797,-10.248 -4.202,-14.012c-2.307,-3.607 -5.341,-6.666 -9.258,-8.958c-4.793,-2.803 -11.556,-4.639 -18.766,-3.553c-8.819,1.33 -15.391,6.39 -19.316,12.561c-2.385,3.752 -4.039,8.341 -4.152,14.062c-0.117,5.854 1.706,10.369 3.954,14.261c1.122,1.948 2.132,3.929 3.302,5.805c3.504,5.621 7.291,10.97 10.559,16.765c4.406,7.812 8.044,16.242 10.108,26.371c2.984,-15.367 9.802,-26.583 17.063,-37.58c2.439,-3.692 4.867,-7.382 6.806,-11.41c0.993,-2.063 2.107,-3.996 2.803,-6.306c0.684,-2.283 1.172,-5.035 1.099,-8.006z\"/>\n  <path id=\"fill\" fill=\"currentColor\" d=\"M77.438,31.834c-0.139-5.802-1.797-10.248-4.202-14.012c-2.307-3.607-5.341-6.666-9.258-8.958   c-4.793-2.803-11.556-4.639-18.766-3.553c-8.819,1.33-15.391,6.39-19.316,12.561c-2.385,3.752-4.039,8.341-4.152,14.062   c-0.117,5.854,1.706,10.369,3.954,14.261C26.82,48.143,27.83,50.124,29,52c3.504,5.621,7.291,10.97,10.559,16.765   c4.406,7.812,8.044,16.242,10.108,26.371c2.984-15.367,9.802-26.583,17.063-37.58c2.439-3.692,4.867-7.382,6.806-11.41   c0.993-2.063,2.107-3.996,2.803-6.306C77.023,37.557,77.511,34.805,77.438,31.834z M49.685,52.47   c-11.004,0-19.923-8.92-19.923-19.923c0-11.002,8.919-19.922,19.923-19.922c11.003,0,19.923,8.92,19.923,19.922   C69.607,43.55,60.688,52.47,49.685,52.47z\"/>\n</svg>`.trim();\n\nexport function getFillColor({bikes}: Station): string {\n  if (bikes > 10) {\n    return 'forestgreen';\n  }\n\n  if (bikes > 5) {\n    return 'coral';\n  }\n\n  return 'crimson';\n}\n\nfunction markerWithFillColor(station: Station) {\n  return `data:image/svg+xml;charset=UTF-8,${encodeURIComponent(\n    marker.replace(/fill=\"currentColor\"/, `fill=\"${getFillColor(station)}\"`),\n  )}`;\n}\n\nexport function createIcon(station: Station): google.maps.Icon {\n  return {\n    url: markerWithFillColor(station),\n    labelOrigin: new google.maps.Point(49, 33),\n  };\n}\n","import * as React from 'react';\n\nimport {Marker, MarkerProps} from 'react-google-maps';\nimport {compose, withHandlers} from 'recompose';\nimport {StationNode} from '~/station';\nimport {createIcon} from './icon';\n\nexport interface SelectedStationProps {\n  selectedNode?: StationNode;\n}\n\nexport interface ActionProps {\n  showInfo(station: StationNode): SelectedStationProps;\n}\n\nexport interface Props extends ActionProps, MarkerProps {\n  node: StationNode;\n}\n\ninterface HandlerProps {\n  handleOnClick(): void;\n}\n\ntype ComposedProps = Props & HandlerProps;\n\nexport function StationMarker({\n  handleOnClick,\n  showInfo,\n  node: {station},\n  ...props\n}: ComposedProps) {\n  const {lat, lng} = station;\n\n  return (\n    <Marker\n      onClick={handleOnClick}\n      icon={createIcon(station)}\n      label={{\n        text: `${station.bikes} | ${station.free}`,\n        fontSize: '0.75rem',\n        fontWeight: 'bold',\n      }}\n      position={new google.maps.LatLng(lat, lng)}\n      {...props}\n    />\n  );\n}\n\nexport default compose<ComposedProps, Props>(\n  withHandlers({\n    handleOnClick({showInfo, node}: Props) {\n      return () => showInfo(node);\n    },\n  }),\n)(StationMarker);\n","import StationMarker, {\n  ActionProps,\n  Props,\n  SelectedStationProps,\n} from './StationMarker';\n\nexport type SelectedStationProps = SelectedStationProps;\nexport type StationMarkerActionProps = ActionProps;\nexport type StationMarkerProps = Props;\nexport default StationMarker;\n","import * as React from 'react';\n\nimport * as PropTypes from 'prop-types';\nimport {createPortal} from 'react-dom';\nimport {MAP} from 'react-google-maps/lib/constants';\n\nexport interface ControlProps {\n  position?: google.maps.ControlPosition;\n}\n\nexport interface Props extends ControlProps {\n  container: HTMLDivElement;\n}\n\nexport class CustomControl extends React.PureComponent<Props> {\n  static contextTypes = {[MAP]: PropTypes.object};\n\n  private map: google.maps.Map | undefined;\n\n  // see: https://gist.github.com/jgimbel/6a36d60e28aaf453d0093ddc47f36533\n  // and  https://developers.google.com/maps/documentation/javascript/examples/control-custom\n  componentDidMount() {\n    const {\n      container,\n      position = google.maps.ControlPosition.BOTTOM_CENTER,\n    } = this.props;\n\n    const map = this.context[MAP];\n    map.controls[position].push(container);\n    this.map = map;\n  }\n\n  // componentWillUnmount() {\n  //   const {\n  //     container,\n  //     position = google.maps.ControlPosition.BOTTOM_CENTER,\n  //   } = this.props;\n\n  //   if (this.map) {\n  //     this.map.controls[position].getArray()\n  //   }\n  // }\n\n  render() {\n    const {children, container} = this.props;\n\n    return createPortal(children, container);\n  }\n}\n\nexport class CustomControlWrapper extends React.PureComponent<ControlProps> {\n  private container = React.createRef<HTMLDivElement>();\n\n  render() {\n    const {\n      container,\n      props: {...props},\n    } = this;\n\n    return (\n      <>\n        <div ref={this.container} />\n        {container && container.current && (\n          <CustomControl {...props} container={container.current} />\n        )}\n      </>\n    );\n  }\n}\n\nexport default CustomControlWrapper;\n","import * as React from 'react';\n\nimport moment from 'moment';\nimport {Station} from '~/station';\n\nexport interface Props {\n  fetchedAt: moment.Moment;\n  station: Station;\n}\n\nexport function StationInfo({fetchedAt, station}: Props) {\n  return (\n    <div>\n      <ul>\n        <li>{`[${station.number.toString().padStart(4, '0')}] ${station.name}${\n          station.operative ? '' : ' (CLOSED)'\n        }`}</li>\n        <li>{`${station.bikes} bikes / ${station.free} slots (${\n          station.total\n        } total)`}</li>\n        <li>\n          <a\n            rel=\"noopener noreferrer\"\n            target=\"_blank\"\n            href={`https://www.google.com/maps/dir/?api=${1}&travelmode=bicycling&destination=${\n              station.lat\n            },${station.lng}`}\n          >{`${station.lat}, ${station.lng}`}</a>\n        </li>\n        <li>{`Last Updated: ${fetchedAt.fromNow()}`}</li>\n      </ul>\n    </div>\n  );\n}\n\nexport default StationInfo;\n","import StationInfo, {Props} from './StationInfo';\n\nexport type StationInfoProps = Props;\nexport default StationInfo;\n","import * as React from 'react';\n\nimport moment from 'moment';\nimport {\n  compose,\n  mapProps,\n  withProps,\n  withStateHandlers,\n  defaultProps,\n  StateHandlerMap,\n} from 'recompose';\nimport {\n  BicyclingLayer,\n  GoogleMap,\n  InfoWindow,\n  withScriptjs,\n  WithScriptjsProps,\n  withGoogleMap,\n  WithGoogleMapProps,\n} from 'react-google-maps';\nimport MarkerClusterer from 'react-google-maps/lib/components/addons/MarkerClusterer';\nimport {StationNode} from '~/station';\nimport {Control, ControlSite} from 'react-google-maps-controls';\nimport {\n  // CustomControl,\n  GpsMarker,\n  GpsMarkerProps,\n  SelectedStationProps,\n  StationInfo,\n  StationMarker,\n  StationMarkerActionProps,\n} from './components';\nimport {withMapsApiKey, WithMapsApiKeyProps} from './decorators';\n\nimport * as styles from './StationMap.module.scss';\n\ninterface FetchProps {\n  fetchedAt: moment.Moment;\n  location: google.maps.LatLngLiteral;\n}\n\ninterface PositionProps {\n  position: Partial<GpsMarkerProps> | undefined;\n}\n\nexport interface Props extends FetchProps, PositionProps {\n  nodes: StationNode[];\n  reload(): void;\n}\n\ninterface DefaultProps {\n  defaultCenter: google.maps.LatLngLiteral;\n  defaultZoom: number;\n}\n\ninterface InjectedProps {\n  nodes: Map<number, StationNode>;\n}\n\ninterface ActionProps\n  extends StationMarkerActionProps,\n    StateHandlerMap<SelectedStationProps> {\n  hideInfo(): SelectedStationProps;\n}\n\ntype ComposedProps = ActionProps &\n  DefaultProps &\n  FetchProps &\n  InjectedProps &\n  PositionProps &\n  SelectedStationProps &\n  WithMapsApiKeyProps &\n  WithGoogleMapProps &\n  WithScriptjsProps;\n\ninterface State {\n  followGps: boolean;\n}\n\nexport class StationMap extends React.PureComponent<ComposedProps, State> {\n  state: State = {followGps: true};\n\n  get gpsCenter() {\n    const {\n      props: {position},\n      state: {followGps},\n    } = this;\n\n    if (followGps && position && position.coords) {\n      const {\n        coords: {latitude, longitude},\n      } = position;\n\n      return new google.maps.LatLng(latitude, longitude);\n    }\n\n    return undefined;\n  }\n\n  get gpsZoom() {\n    const {\n      props: {position},\n      state: {followGps},\n    } = this;\n\n    if (followGps && position && position.coords) {\n      const {\n        coords: {accuracy},\n      } = position;\n\n      return Math.min(20, Math.max(1, Math.log2(591657550 / accuracy) - 6));\n    }\n\n    return undefined;\n  }\n\n  handleDrag = () => {\n    this.setState({followGps: false});\n  };\n\n  handleGpsCenter = () => {\n    this.setState({followGps: true});\n  };\n\n  renderInfo = () => {\n    const {fetchedAt, selectedNode} = this.props;\n\n    if (!selectedNode) {\n      return false;\n    }\n\n    const {\n      station: {lat, lng},\n    } = selectedNode;\n\n    return (\n      <InfoWindow\n        position={{\n          lat,\n          lng,\n        }}\n        onCloseClick={this.props.hideInfo}\n        options={{\n          pixelOffset: new google.maps.Size(0, -100),\n        }}\n      >\n        <StationInfo fetchedAt={fetchedAt} station={selectedNode.station} />\n      </InfoWindow>\n    );\n  };\n\n  renderMarker = (node: StationNode) => {\n    if (!node.isValid) {\n      // this should never happen\n      // eslint-disable-next-line no-console\n      console.debug(`Bad Station Found`, node.station);\n      return false;\n    }\n\n    const {showInfo} = this.props;\n\n    return (\n      <StationMarker\n        key={node.station.number}\n        node={node}\n        showInfo={showInfo}\n      />\n    );\n  };\n\n  renderMarkers = (clustered = true) => {\n    const markers = Array.from(this.props.nodes.values()).map(\n      this.renderMarker,\n    );\n\n    return clustered ? (\n      <MarkerClusterer\n        averageCenter\n        enableRetinaIcons\n        gridSize={60}\n        maxZoom={17}\n      >\n        {markers}\n      </MarkerClusterer>\n    ) : (\n      markers\n    );\n  };\n\n  renderPosition = () => {\n    const {position} = this.props;\n\n    if (!position || !position.coords || !position.timestamp) {\n      return false;\n    }\n\n    return (\n      <GpsMarker coords={position.coords} timestamp={position.timestamp} />\n    );\n  };\n\n  render() {\n    const {hideInfo, defaultCenter, defaultZoom} = this.props;\n\n    return (\n      <GoogleMap\n        center={this.gpsCenter}\n        defaultCenter={defaultCenter}\n        defaultZoom={defaultZoom}\n        onClick={hideInfo}\n        onDrag={this.handleDrag}\n        zoom={this.gpsZoom}\n      >\n        <BicyclingLayer />\n        <ControlSite>\n          <Control onClick={this.handleGpsCenter}>GPS</Control>\n        </ControlSite>\n        {this.renderMarkers()}\n        {this.renderPosition()}\n        {this.renderInfo()}\n      </GoogleMap>\n    );\n  }\n}\n\nexport default compose<ComposedProps, Props>(\n  withMapsApiKey,\n  defaultProps<DefaultProps>({\n    defaultCenter: {\n      lat: 49.279627,\n      lng: -123.121116,\n    },\n    defaultZoom: 13,\n  }),\n  withStateHandlers<SelectedStationProps, ActionProps, ComposedProps>(\n    {},\n    {\n      showInfo() {\n        return (selectedNode: StationNode) => ({selectedNode});\n      },\n      hideInfo() {\n        return () => ({selectedNode: undefined});\n      },\n    },\n  ),\n  withProps<WithGoogleMapProps & WithScriptjsProps, WithMapsApiKeyProps>(\n    ({mapsApiKey}) => ({\n      googleMapURL: `https://maps.googleapis.com/maps/api/js?key=${mapsApiKey}&v=3.exp&libraries=geometry,drawing,places`,\n      loadingElement: <div className={styles.LoadingContainer}>Loading...</div>,\n      containerElement: <div className={styles.MapContainer} />,\n      mapElement: <div className={styles.Map} />,\n    }),\n  ),\n  mapProps<InjectedProps, WithMapsApiKeyProps & Props>(\n    ({mapsApiKey, nodes, ...props}) => {\n      return {\n        nodes: nodes.reduce((map, node) => {\n          return map.set(node.station.number, node);\n        }, new Map<number, StationNode>()),\n        ...props,\n      };\n    },\n  ),\n  withScriptjs,\n  withGoogleMap,\n)(StationMap);\n","import {withMapsApiKey, WithMapsApiKeyProps} from './decorators';\nimport StationMap, {Props} from './StationMap';\n\nexport type WithMapsApiKeyProps = WithMapsApiKeyProps;\nexport type StationMapProps = Props;\nexport {withMapsApiKey};\nexport default StationMap;\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\nimport Link, {\n  withPrefix,\n  navigate,\n  push,\n  replace,\n  navigateTo,\n  parsePath,\n} from \"gatsby-link\"\nimport PageRenderer from \"./public-page-renderer\"\n\nconst StaticQueryContext = React.createContext({})\n\nconst StaticQuery = props => (\n  <StaticQueryContext.Consumer>\n    {staticQueryData => {\n      if (\n        props.data ||\n        (staticQueryData[props.query] && staticQueryData[props.query].data)\n      ) {\n        return (props.render || props.children)(\n          props.data ? props.data.data : staticQueryData[props.query].data\n        )\n      } else {\n        return <div>Loading (StaticQuery)</div>\n      }\n    }}\n  </StaticQueryContext.Consumer>\n)\n\nconst useStaticQuery = query => {\n  if (\n    typeof React.useContext !== `function` &&\n    process.env.NODE_ENV === `development`\n  ) {\n    throw new Error(\n      `You're likely using a version of React that doesn't support Hooks\\n` +\n        `Please update React and ReactDOM to 16.8.0 or later to use the useStaticQuery hook.`\n    )\n  }\n  const context = React.useContext(StaticQueryContext)\n  if (context[query] && context[query].data) {\n    return context[query].data\n  } else {\n    throw new Error(\n      `The result of this StaticQuery could not be fetched.\\n\\n` +\n        `This is likely a bug in Gatsby and if refreshing the page does not fix it, ` +\n        `please open an issue in https://github.com/gatsbyjs/gatsby/issues`\n    )\n  }\n}\n\nStaticQuery.propTypes = {\n  data: PropTypes.object,\n  query: PropTypes.string.isRequired,\n  render: PropTypes.func,\n  children: PropTypes.func,\n}\n\nfunction graphql() {\n  throw new Error(\n    `It appears like Gatsby is misconfigured. Gatsby related \\`graphql\\` calls ` +\n      `are supposed to only be evaluated at compile time, and then compiled away,. ` +\n      `Unfortunately, something went wrong and the query was left in the compiled code.\\n\\n.` +\n      `Unless your site has a complex or custom babel/Gatsby configuration this is likely a bug in Gatsby.`\n  )\n}\n\nexport {\n  Link,\n  withPrefix,\n  graphql,\n  parsePath,\n  navigate,\n  push, // TODO replace for v3\n  replace, // TODO remove replace for v3\n  navigateTo, // TODO: remove navigateTo for v3\n  StaticQueryContext,\n  StaticQuery,\n  PageRenderer,\n  useStaticQuery,\n}\n","import * as React from 'react';\n\nimport * as styles from './Header.module.scss';\n\nexport interface Props {\n  description: string;\n  logo: string;\n  logoUrl: string;\n}\n\nexport function Header({description, logo, logoUrl}: Props) {\n  return (\n    <div className={styles.Header}>\n      <div className={styles.HeaderLogo}>\n        <a href={logoUrl}>\n          <img alt=\"logo\" src={logo} />\n        </a>\n      </div>\n      <div className={styles.HeaderContent}>\n        <h1>{description}</h1>\n      </div>\n    </div>\n  );\n}\n\nexport default Header;\n","import Header, {Props} from './Header';\n\nexport type HeaderProps = Props;\nexport default Header;\n","import * as React from 'react';\n\nimport {graphql, StaticQuery} from 'gatsby';\nimport {compose, defaultProps, fromRenderProps} from 'recompose';\nimport {Header, HeaderProps} from './components';\n\nimport * as styles from './DefaultLayout.module.scss';\n\nexport interface Props {\n  errors: any[];\n}\n\ninterface QueryProps {\n  site: {\n    siteMetadata: HeaderProps;\n  };\n}\n\ntype ComposedProps = Props & QueryProps;\n\nexport function DefaultLayout({\n  errors,\n  site: {\n    siteMetadata: {description, logo, logoUrl},\n  },\n  ...props\n}: ComposedProps) {\n  return (\n    <div className={styles.Container}>\n      <Header description={description} logo={logo} logoUrl={logoUrl} />\n      <div className={styles.Content} {...props} />\n      {errors.length === 0 ? false : <div>{errors}</div>}\n    </div>\n  );\n}\n\nconst query = graphql`\n  query {\n    site {\n      siteMetadata {\n        description\n        logo\n        logoUrl\n      }\n    }\n  }\n`;\n\nfunction DefaultLayoutQuery({...props}: any) {\n  return <StaticQuery query={query} {...props} />;\n}\n\nexport default compose<ComposedProps, {}>(\n  defaultProps({\n    errors: [],\n  }),\n  fromRenderProps<QueryProps, {}>(DefaultLayoutQuery, ({site}) => ({site})),\n)(DefaultLayout);\n","import DefaultLayout, {Props} from './DefaultLayout';\n\nexport type DefaultLayoutProps = Props;\nexport default DefaultLayout;\n","import {Station} from './Station';\n\nexport class StationNode {\n  public readonly station: Station;\n\n  constructor(station: Station) {\n    this.station = station;\n  }\n\n  public get isValid() {\n    return [\n      Number.isInteger(this.station.bikes),\n      Number.isInteger(this.station.free),\n      Number.isInteger(this.station.total),\n      Number.isInteger(this.station.number),\n      this.station.number > 0,\n      Number.isFinite(this.station.lat),\n      this.station.lat !== 0,\n      Number.isFinite(this.station.lng),\n      this.station.lng !== 0,\n      /^\\w/.test(this.station.name),\n      this.station.errors.length === 0,\n    ].every((x) => x);\n  }\n\n  toString() {\n    return this.isValid\n      ? `[${this.station.number}] ${this.station.name} (${\n          this.station.bikes\n        } | ${this.station.free})`\n      : 'INVALID';\n  }\n}\n","import {map} from 'rxjs/operators';\nimport {createStation, parseLatLng, Station} from '~/station';\n\nexport interface SmooveStation {\n  name: string;\n  coordinates: string;\n  // eslint-disable-next-line camelcase\n  total_slots: number;\n  // eslint-disable-next-line camelcase\n  free_slots: number;\n  // eslint-disable-next-line camelcase\n  avl_bikes: number;\n  operative: boolean;\n  style: string;\n}\n\nexport interface Response {\n  result: SmooveStation[];\n}\n\nexport function parseNameAndNumber({name}: SmooveStation, station: Station) {\n  try {\n    const match = /^(\\d+)\\s+(.*)$/.exec(name);\n\n    if (!match) {\n      throw new Error(`Unable to parse \"number name\" from ${name}`);\n    }\n\n    station.number = Number(match[1]);\n    station.name = match[2];\n  } catch (error) {\n    station.errors.push(error);\n  }\n}\n\nexport function create(data: SmooveStation) {\n  const station = createStation({\n    data,\n    bikes: data.avl_bikes,\n    free: data.free_slots,\n    operative: data.operative,\n    total: data.total_slots,\n  });\n\n  parseNameAndNumber(data, station);\n  parseLatLng(data.coordinates, station);\n\n  return station;\n}\n\nexport default map<Response, Station[]>(({result}) => result.map(create));\n","export interface Station extends google.maps.LatLngLiteral {\n  bikes: number;\n  data: any;\n  errors: any[];\n  free: number;\n  name: string;\n  number: number;\n  operative: boolean;\n  total: number;\n}\n\nexport function createStation(station: Partial<Station> = {}): Station {\n  return {\n    data: null,\n    errors: [],\n    bikes: 0,\n    free: 0,\n    lat: 0,\n    lng: 0,\n    name: '',\n    number: 0,\n    operative: false,\n    total: 0,\n    ...station,\n  };\n}\n\nexport function parseLatLng(position: string, station: Station) {\n  try {\n    const match = /^\\s*(-?\\d+\\.\\d+)\\s*,\\s*(-?\\d+\\.\\d+)\\s*$/.exec(position);\n\n    if (!match) {\n      throw new Error(`Unable to parse \"lat, lng\" from ${position}`);\n    }\n\n    station.lat = Number(match[1]);\n    station.lng = Number(match[2]);\n  } catch (error) {\n    station.errors.push(error);\n  }\n}\n","import {OperatorFunction} from 'rxjs';\nimport {Station} from '~/station';\nimport {Smoove} from './transform';\n\nenum StationSourceType {\n  Smoove,\n}\n\nexport interface StationSourceConfig {\n  location: google.maps.LatLngLiteral;\n  name: string;\n  options?: any;\n  type: keyof typeof StationSourceType;\n  uri: string;\n  cors?: boolean;\n}\n\nconst configMap = new Map<string, StationSourceConfig>([\n  [\n    'test',\n    {\n      location: {\n        lat: 49.279627,\n        lng: -123.121116,\n      },\n      name: 'Test Data',\n      type: 'Smoove',\n      uri: '/static_data',\n    },\n  ],\n  [\n    'vancouver',\n    {\n      location: {\n        lat: 49.279627,\n        lng: -123.121116,\n      },\n      name: 'Mobi Bike Vancouver',\n      type: 'Smoove',\n      uri: 'http://vancouver-ca.smoove.pro/api-public/stations',\n      cors: true,\n    },\n  ],\n]);\n\nexport function getConfig(key: string) {\n  const config = configMap.get(key.toLowerCase());\n\n  if (!config) {\n    throw new Error(`No station data for source '${key}'`);\n  }\n\n  return config;\n}\n\nexport function getConfigByLocation(location: google.maps.LatLng) {\n  return Array.from(configMap.values())\n    .map((config) => ({\n      config,\n      distance: google.maps.geometry.spherical.computeDistanceBetween(\n        location,\n        new google.maps.LatLng(config.location.lat, config.location.lng),\n      ),\n    }))\n    .sort((left, right) => left.distance - right.distance)[0].config;\n}\n\nexport type StationSourceTransform = OperatorFunction<any, Station[]>;\n\nexport function mapTransform({\n  type,\n}: StationSourceConfig): StationSourceTransform {\n  switch (type) {\n    case 'Smoove':\n      return Smoove;\n    default:\n      throw new Error(`Invalid Configuration '${type}'`);\n  }\n}\n","import moment from 'moment';\nimport {Observable, of, timer, merge} from 'rxjs';\nimport {ajax} from 'rxjs/ajax';\nimport {tap, map, catchError, mergeMap, debounceTime} from 'rxjs/operators';\nimport {Station, StationNode} from '~/station';\nimport {\n  getConfig,\n  getConfigByLocation,\n  mapTransform,\n  StationSourceConfig,\n  StationSourceTransform,\n} from './config';\n\nexport interface StationSourceResult {\n  config: StationSourceConfig;\n  error?: any[];\n  fetchedAt: moment.Moment;\n  nodes: StationNode[];\n}\n\nexport interface Options {\n  debug?: boolean;\n}\n\nexport class StationSource {\n  public static create(\n    configOrKey: string | StationSourceConfig,\n    {debug}: Options,\n  ) {\n    const config =\n      typeof configOrKey === 'string' ? getConfig(configOrKey) : configOrKey;\n\n    return new StationSource(config, mapTransform(config), debug);\n  }\n\n  public static nearest(location: google.maps.LatLng, options: Options) {\n    return StationSource.create(getConfigByLocation(location), options);\n  }\n\n  readonly config: StationSourceConfig;\n  readonly verboseOutput: boolean;\n  private readonly transform: StationSourceTransform;\n\n  constructor(\n    config: StationSourceConfig,\n    transform: StationSourceTransform,\n    // eslint-disable-next-line no-process-env\n    verboseOutput = process.env.NODE_ENV !== 'production',\n  ) {\n    this.config = config;\n    this.transform = transform;\n    this.verboseOutput = verboseOutput;\n  }\n\n  getJSON() {\n    const uri = this.config.cors\n      ? `https://cors.io/?${this.config.uri}`\n      : this.config.uri;\n    this.debug(`Fetching stations from '${uri}' ...`);\n\n    const headers = this.config.options\n      ? this.config.options.headers\n      : undefined;\n    return ajax.getJSON(uri, headers);\n  }\n\n  getStations(source?: Observable<any>) {\n    return (source || this.getJSON()).pipe(\n      tap((response) => {\n        this.debug('Fetch Response', response);\n      }),\n      this.transform,\n      map<Station[], StationSourceResult>((stations) => {\n        this.debug(`Fetched ${stations.length} stations`);\n\n        return {\n          config: this.config,\n          nodes: stations.map((station) => new StationNode(station)),\n          fetchedAt: moment(),\n        };\n      }),\n      catchError((error = {}) => {\n        this.debug(`Fetch failed: ${error.message || 'Unknown Error'}`, error);\n\n        return of<StationSourceResult>({\n          error,\n          config: this.config,\n          fetchedAt: moment(),\n          nodes: [],\n        });\n      }),\n    );\n  }\n\n  watchStations(\n    reloader: Observable<any> = of(true),\n    interval = 300,\n    source?: Observable<any>,\n  ) {\n    return merge(timer(0, 1000 * interval), reloader).pipe(\n      debounceTime(100),\n      mergeMap(() => this.getStations(source)),\n    );\n  }\n\n  protected debug(message: string, ...args: any[]) {\n    if (this.verboseOutput) {\n      // eslint-disable-next-line no-console\n      console.log(message, args);\n    }\n  }\n}\n","import {mapPropsStream, setObservableConfig, withProps} from 'recompose';\nimport {from, Observable} from 'rxjs';\nimport {\n  combineLatest,\n  distinctUntilChanged,\n  filter,\n  map,\n  mergeMap,\n  startWith,\n} from 'rxjs/operators';\nimport {StationSource, StationSourceResult} from '~/data';\nimport {Subject} from 'rxjs/internal/Subject';\n\nsetObservableConfig({\n  fromESObservable: from as any,\n});\n\nexport type QueryParams = Map<string, string>;\n\nexport interface WithQueryParamProps {\n  params: QueryParams | null;\n}\n\nfunction getUrlParams() {\n  if (typeof window === 'undefined') {\n    return null;\n  }\n\n  const params = new Map<string, string>();\n\n  new URLSearchParams(window.location.search).forEach((value, key) => {\n    params.set(key.toLowerCase(), value);\n  });\n\n  return params;\n}\n\nexport const withQueryParams = withProps<WithQueryParamProps, {}>(() => {\n  return {\n    params: getUrlParams(),\n  };\n});\n\ninterface PositionProps {\n  coords?: Coordinates;\n  timestamp?: number;\n  error?: any;\n}\n\nexport interface WithPositionProps {\n  position?: PositionProps;\n}\n\nexport function withPosition(\n  options: PositionOptions = {enableHighAccuracy: true},\n) {\n  const reloader = new Subject();\n  const reload = () => reloader.next();\n\n  return mapPropsStream<WithPositionProps, {}>((props) => {\n    return props.pipe(\n      map(() => typeof navigator !== 'undefined' && navigator.geolocation),\n      filter((geolocation): geolocation is Geolocation => Boolean(geolocation)),\n      mergeMap((geolocation) => {\n        return new Observable<PositionProps>((observer) => {\n          geolocation.watchPosition(\n            (position) => {\n              observer.next(position);\n            },\n            (error) => {\n              observer.error({error});\n            },\n            options,\n          );\n        });\n      }),\n      startWith(undefined),\n      combineLatest(props, (position, prev) => {\n        // eslint-disable-next-line no-console\n        console.log('[position]', position, prev);\n        return {\n          ...prev,\n          reload,\n          position,\n        };\n      }),\n    );\n  });\n}\n\nexport interface WithStationsProps {\n  stations?: StationSourceResult;\n  reload(): void;\n}\n\nexport function withStations(defaultKey = 'vancouver') {\n  const reloader = new Subject();\n  const reload = () => {\n    // eslint-disable-next-line no-console\n    console.log('reload');\n    reloader.next();\n  };\n\n  return mapPropsStream<\n    WithStationsProps,\n    WithStationsProps & WithQueryParamProps\n  >((props) => {\n    return props.pipe(\n      map(({params}) => params),\n      filter((params): params is QueryParams => params != null),\n      map((params) => {\n        return {\n          debug: Boolean(params.get('debug')),\n          source:\n            params.get('source') ||\n            (params.get('test') && 'test') ||\n            defaultKey,\n        };\n      }),\n      distinctUntilChanged(\n        (left, right) =>\n          left.debug === right.debug && left.source === right.source,\n      ),\n      mergeMap(({debug, source}) => {\n        // eslint-disable-next-line no-console\n        console.log('fetch', {source, debug});\n        return StationSource.create(source, {debug}).watchStations(reloader);\n      }),\n      combineLatest(props, (stations, prev) => {\n        // eslint-disable-next-line no-console\n        console.log('[stations]', stations, prev);\n        return {\n          ...prev,\n          reload,\n          stations,\n        };\n      }),\n    );\n  });\n}\n","import * as React from 'react';\n\nimport {compose} from 'recompose';\nimport {Loader, StationMap} from '~/components';\nimport {DefaultLayout} from '~/layouts';\nimport {\n  withPosition,\n  WithPositionProps,\n  withQueryParams,\n  WithQueryParamProps,\n  withStations,\n  WithStationsProps,\n} from './decorators';\n\ntype ComposedProps = WithPositionProps &\n  WithQueryParamProps &\n  WithStationsProps;\n\nexport function IndexPage({position, reload, stations}: ComposedProps) {\n  return (\n    <DefaultLayout>\n      {stations ? (\n        <StationMap\n          fetchedAt={stations.fetchedAt}\n          location={stations.config.location}\n          nodes={stations.nodes}\n          position={position}\n          reload={reload}\n        />\n      ) : (\n        <Loader />\n      )}\n    </DefaultLayout>\n  );\n}\n\nexport default compose<ComposedProps, {}>(\n  withQueryParams,\n  withPosition(),\n  withStations(),\n)(IndexPage);\n","import IndexPage from './IndexPage';\n\nexport default IndexPage;\n","import * as React from 'react';\n\nimport * as styles from './NotFoundPage.module.scss';\n\nexport function NotFoundPage() {\n  return (\n    <div className={styles.Container}>\n      <h1>NOT FOUND</h1>\n      <p>You just hit a route that doesn&#39;t exist... the sadness.</p>\n    </div>\n  );\n}\n\nexport default NotFoundPage;\n","import NotFoundPage from './NotFoundPage';\n\nexport default NotFoundPage;\n","export {default as IndexPage} from './IndexPage';\nexport {default as NotFoundPage} from './NotFoundPage';\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\n\nimport InternalPageRenderer from \"./page-renderer\"\nimport loader from \"./loader\"\n\nconst ProdPageRenderer = ({ location }) => {\n  const pageResources = loader.getResourcesForPathnameSync(location.pathname)\n  return React.createElement(InternalPageRenderer, {\n    location,\n    pageResources,\n    ...pageResources.json,\n  })\n}\n\nProdPageRenderer.propTypes = {\n  location: PropTypes.shape({\n    pathname: PropTypes.string.isRequired,\n  }).isRequired,\n}\n\nexport default ProdPageRenderer\n"],"sourceRoot":""}