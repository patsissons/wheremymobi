(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{137:function(e,t,n){"use strict";n.r(t);var r=n(245);t.default=r.b},172:function(e,t,n){var r;e.exports=(r=n(209))&&r.default||r},179:function(e,t,n){"use strict";n.r(t),n.d(t,"graphql",function(){return g}),n.d(t,"StaticQueryContext",function(){return f}),n.d(t,"StaticQuery",function(){return p});var r=n(0),a=n.n(r),o=n(4),i=n.n(o),s=n(148),c=n.n(s);n.d(t,"Link",function(){return c.a}),n.d(t,"withPrefix",function(){return s.withPrefix}),n.d(t,"navigate",function(){return s.navigate}),n.d(t,"push",function(){return s.push}),n.d(t,"replace",function(){return s.replace}),n.d(t,"navigateTo",function(){return s.navigateTo});var l=n(32);n.d(t,"waitForRouteChange",function(){return l.c});var u=n(172),d=n.n(u);n.d(t,"PageRenderer",function(){return d.a});var m=n(39);n.d(t,"parsePath",function(){return m.a});var f=a.a.createContext({}),p=function(e){return a.a.createElement(f.Consumer,null,function(t){return e.data||t[e.query]&&t[e.query].data?(e.render||e.children)(e.data?e.data.data:t[e.query].data):a.a.createElement("div",null,"Loading (StaticQuery)")})};function g(){throw new Error("It appears like Gatsby is misconfigured. Gatsby related `graphql` calls are supposed to only be evaluated at compile time, and then compiled away,. Unfortunately, something went wrong and the query was left in the compiled code.\n\n.Unless your site has a complex or custom babel/Gatsby configuration this is likely a bug in Gatsby.")}p.propTypes={data:i.a.object,query:i.a.string.isRequired,render:i.a.func,children:i.a.func}},208:function(e){e.exports={data:{site:{siteMetadata:{description:"Find mobi bikes in Vancouver, BC.",logo:"https://www.mobibikes.ca/sites/all/themes/smoove_bootstrap/logo.png",logoUrl:"https://www.mobibikes.ca/en#the-map"}}}}},209:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(4),i=n.n(o),s=n(63),c=n(1),l=function(e){var t=e.location,n=c.default.getResourcesForPathname(t.pathname);return a.a.createElement(s.a,{location:t,pageResources:n})};l.propTypes={location:i.a.shape({pathname:i.a.string.isRequired}).isRequired},t.default=l},210:function(e,t,n){e.exports={Container:"DefaultLayout-module--Container--3gsXm",Content:"DefaultLayout-module--Content--s5QCN",Header:"DefaultLayout-module--Header--3j_Vz",HeaderLogo:"DefaultLayout-module--HeaderLogo--2R2pt",HeaderContent:"DefaultLayout-module--HeaderContent--NWecx"}},235:function(e,t,n){e.exports={LoadingContainer:"StationMap-module--LoadingContainer--3ziae",MapContainer:"StationMap-module--MapContainer--3ypYa",Map:"StationMap-module--Map--foP4U"}},243:function(e,t,n){e.exports={LoadingContainer:"Loader-module--LoadingContainer--3Tudp",Loader:"Loader-module--Loader--3XLHx"}},245:function(e,t,n){"use strict";var r=n(0),a=n(178),o=n.n(a),i=n(151),s=n(583),c=n(580),l=n(313),u=n(584),d=(n(38),n(159)),m=n.n(d),f=n(208),p=n(179),g=n(210);function h(e){var t=e.description,n=e.logo,a=e.logoUrl;return r.createElement("div",{className:g.Header},r.createElement("div",{className:g.HeaderLogo},r.createElement("a",{href:a},r.createElement("img",{src:n}))),r.createElement("div",{className:g.HeaderContent},r.createElement("h1",null,t)))}var v="3229557108";var b=Object(i.compose)(Object(i.fromRenderProps)(function(e){var t=Object.assign({},e);return r.createElement(p.StaticQuery,Object.assign({query:v},t,{data:f}))},function(e){return{site:e.site}}))(function(e){var t=e.site.siteMetadata,n=t.description,a=t.logo,o=t.logoUrl,i=m()(e,["site"]);return r.createElement("div",{className:g.Container},r.createElement(h,{description:n,logo:a,logoUrl:o}),r.createElement("div",Object.assign({className:g.Content},i)))}),w=(n(247),n(54),n(84),n(55),n(83),n(252),n(52),n(9)),y=n.n(w),E=n(180),C=n(304),O=n.n(C);n(201),n(305),n(307),n(308);var k=function(e){var t=e.fetchedAt,n=e.station;return r.createElement("div",null,r.createElement("ul",null,r.createElement("li",null,"["+n.number.toString().padStart(4,"0")+"] "+n.name+(n.operative?"":" (CLOSED)")),r.createElement("li",null,n.bikes+" bikes / "+n.free+" slots ("+n.total+" total)"),r.createElement("li",null,r.createElement("a",{target:"_blank",href:"https://www.google.com/maps/dir/?api=1&travelmode=bicycling&destination="+n.lat+","+n.lng},n.lat+", "+n.lng)),r.createElement("li",null,"Last Updated: "+t.fromNow())))};var j=Object(i.compose)(Object(i.withHandlers)({handleOnClick:function(e){var t=e.showInfo,n=e.station;return function(){return t(n)}}}))(function(e){var t=e.handleOnClick,n=(e.showInfo,e.station),a=m()(e,["handleOnClick","showInfo","station"]),o=n.bikes>10?"forestgreen":n.bikes>5?"coral":"crimson";return r.createElement(E.Marker,Object.assign({onClick:t,icon:{url:function(e){return'data:image/svg+xml;utf-8,<svg width="100px" height="100px" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve" fill="'+e.fillColor+'">\n  <path id="bg" fill="#ffffff" d="m77.438,31.70225c-0.139,-5.802 -1.797,-10.248 -4.202,-14.012c-2.307,-3.607 -5.341,-6.666 -9.258,-8.958c-4.793,-2.803 -11.556,-4.639 -18.766,-3.553c-8.819,1.33 -15.391,6.39 -19.316,12.561c-2.385,3.752 -4.039,8.341 -4.152,14.062c-0.117,5.854 1.706,10.369 3.954,14.261c1.122,1.948 2.132,3.929 3.302,5.805c3.504,5.621 7.291,10.97 10.559,16.765c4.406,7.812 8.044,16.242 10.108,26.371c2.984,-15.367 9.802,-26.583 17.063,-37.58c2.439,-3.692 4.867,-7.382 6.806,-11.41c0.993,-2.063 2.107,-3.996 2.803,-6.306c0.684,-2.283 1.172,-5.035 1.099,-8.006z"/>\n  <path id="fill" d="M77.438,31.834c-0.139-5.802-1.797-10.248-4.202-14.012c-2.307-3.607-5.341-6.666-9.258-8.958   c-4.793-2.803-11.556-4.639-18.766-3.553c-8.819,1.33-15.391,6.39-19.316,12.561c-2.385,3.752-4.039,8.341-4.152,14.062   c-0.117,5.854,1.706,10.369,3.954,14.261C26.82,48.143,27.83,50.124,29,52c3.504,5.621,7.291,10.97,10.559,16.765   c4.406,7.812,8.044,16.242,10.108,26.371c2.984-15.367,9.802-26.583,17.063-37.58c2.439-3.692,4.867-7.382,6.806-11.41   c0.993-2.063,2.107-3.996,2.803-6.306C77.023,37.557,77.511,34.805,77.438,31.834z M49.685,52.47   c-11.004,0-19.923-8.92-19.923-19.923c0-11.002,8.919-19.922,19.923-19.922c11.003,0,19.923,8.92,19.923,19.922   C69.607,43.55,60.688,52.47,49.685,52.47z"/>\n  </svg>'}({fillColor:o}),labelOrigin:{x:49,y:33}},label:{text:n.bikes+" | "+n.free,fontSize:"0.75rem",fontWeight:"bold"}},a))}),x=n(235),L=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).renderInfo=function(){var e=t.props,n=e.fetchedAt,a=e.selectedStation;return a&&r.createElement(E.InfoWindow,{position:{lat:a.lat,lng:a.lng},onCloseClick:t.props.hideInfo,options:{pixelOffset:new google.maps.Size(0,-100)}},r.createElement(k,{fetchedAt:n,station:a}))||!1},t.renderMarker=function(e){return!!e.valid&&r.createElement(j,{key:e.number,station:e,showInfo:t.props.showInfo,position:{lat:e.lat,lng:e.lng}})},t.renderMarkers=function(e){void 0===e&&(e=!0);var n=Array.from(t.props.stations.values()).map(t.renderMarker);return e?r.createElement(O.a,{averageCenter:!0,enableRetinaIcons:!0,gridSize:30},n):n},t}return y()(t,e),t.prototype.render=function(){return r.createElement(E.GoogleMap,{defaultZoom:13,defaultCenter:{lat:49.279627,lng:-123.121116},onClick:this.props.hideInfo},r.createElement(E.BicyclingLayer,null),this.renderInfo(),this.renderMarkers())},t}(r.PureComponent),M=Object(i.compose)(Object(i.withProps)({mapsApiKey:"AIzaSyBXrYScIU6sWYUWLLlovYhzq-bLzwTgAoc"}),Object(i.mapProps)(function(e){var t=e.mapsApiKey,n=e.stations,r=m()(e,["mapsApiKey","stations"]);return Object.assign({googleMapURL:"https://maps.googleapis.com/maps/api/js?key="+t+"&v=3.exp&libraries=geometry,drawing,places",stations:n.reduce(function(e,t){return e.set(t.number,t)},new Map)},r)}),Object(i.withProps)({loadingElement:r.createElement("div",{className:x.LoadingContainer}),containerElement:r.createElement("div",{className:x.MapContainer}),mapElement:r.createElement("div",{className:x.Map})}),Object(i.withStateHandlers)({},{showInfo:function(){return function(e){return{selectedStation:e}}},hideInfo:function(){return function(){return{selectedStation:void 0}}}}),E.withScriptjs,E.withGoogleMap)(L),N=n(547),S=n(585),I=n(581),A=n(582);n(309),n(310),n(311),n(312);function U(e){return t=Object.assign({},function(e){var t=e.name;try{var n=/^(\d+)\s+(.*)$/.exec(t);if(!n)throw new Error('Unable to parse "number name" from '+t);return{name:n[2],number:Number(n[1])}}catch(e){return{name:t,number:0,error_name:e.message}}}(e),function(e){var t=e.coordinates;try{var n=/^\s*(-?\d+\.\d+)\s*,\s*(-?\d+\.\d+)\s*$/.exec(t);if(!n)throw new Error('Unable to parse "lat, lng" from '+t);return{lat:Number(n[1]),lng:Number(n[2])}}catch(e){return{lat:0,lng:0,error_coordinates:e.message}}}(e),{bikes:e.avl_bikes,free:e.free_slots,operative:Boolean(e.operative),style:e.style,total:e.total_slots}),Object.assign({},t,{valid:[Number.isInteger(t.bikes),Number.isInteger(t.free),Number.isInteger(t.total),Number.isInteger(t.number),Number.isFinite(t.lat),0!==t.lat,Number.isFinite(t.lng),0!==t.lng,/^\w/.test(t.name),!t.error_coordinates,!t.error_name].every(function(e){return e})});var t}var R="http://vancouver-ca.smoove.pro/api-public/stations";function q(e,t){void 0===e&&(e=R);var n=void 0===t?{}:t,r=n.headers,a=void 0===r?{}:r,i=n.verboseOutput,s=void 0!==i&&i,c=function(e){if(s){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.length}};return c("Fetching stations from '"+e+"' ..."),S.a.getJSON("https://cors.io/?"+e,a).pipe(Object(I.a)(function(e){if(c("Fetch Response",e),!e||!e.result)throw new Error("Invalid Response: "+(e?"Missing result":"Empty"));c("Fetched "+e.result.length+" stations")}),Object(l.a)(function(e){var t=e.result;return{fetchedAt:o()(),stations:t.map(function(e){return U(e)})}}),Object(A.a)(function(e){return c("Fetch failed: "+e.message,e),Object(N.a)({error:e,fetchedAt:o()(),stations:[]})}))}var H=n(331),P=n.n(H),z=n(243),F=["double-bounce","chasing-dots","circle","cube-grid"];var _=function(){return r.createElement("div",{className:z.LoadingContainer},r.createElement(P.a,{className:z.Loader,name:F[Math.floor(Math.random()*F.length)]}))};var D=Object(i.compose)(Object(i.mapPropsStream)(function(){return Object(s.a)(0,3e5).pipe(Object(c.a)(function(){return q()}),Object(l.a)(function(e){return{result:e}}),Object(u.a)({}))}))(function(e){var t=e.result;if(!t)return r.createElement(_,null);var n=t&&t.fetchedAt&&t.stations?t:{error:new Error("fail"),fetchedAt:o()(),stations:[]},a=n.error,i=n.fetchedAt,s=n.stations;return r.createElement(b,null,Boolean(a)&&r.createElement("div",null,a.message),r.createElement(M,{fetchedAt:i,stations:s}))});var T=function(){return r.createElement("div",null,r.createElement("h1",null,"NOT FOUND"),r.createElement("p",null,"You just hit a route that doesn't exist... the sadness."))};n.d(t,"a",function(){return D}),n.d(t,"b",function(){return T})}}]);
//# sourceMappingURL=component---src-pages-404-ts-707d96cf5446ba3ae4c3.js.map