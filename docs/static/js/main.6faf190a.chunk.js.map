{"version":3,"sources":["App/components/Header/Header.module.scss","components/Loader/Loader.module.scss","App/App.module.scss","config/env.ts","App/components/StationMap/components/CustomButton/CustomButton.module.scss","App/components/StationMap/images/autorenew-1x.png","App/components/StationMap/images/bike-1x.png","App/components/StationMap/StationMap.module.scss","components/Loader/Loader.tsx","App/components/Header/Header.tsx","utilities/google.ts","App/components/StationMap/components/CustomButton/CustomButton.tsx","App/components/StationMap/components/CustomControl/CustomControl.ts","App/components/StationMap/components/GpsCenterButton/GpsCenterButton.tsx","App/components/StationMap/components/GpsMarker/GpsMarker.tsx","App/components/StationMap/components/StationInfo/StationInfo.tsx","App/components/StationMap/components/StationMarker/icon.ts","App/components/StationMap/components/StationMarker/StationMarker.tsx","App/components/StationMap/StationMap.tsx","App/components/StationMap/hooks/useMarkerClusterer.tsx","App/hooks/usePosition.ts","data/config.ts","data/transform/Smoove.ts","models/Station.ts","data/StationSource.ts","App/hooks/useStations.ts","serviceWorker.ts","index.tsx","App/App.tsx","App/hooks/useQueryParams.ts","App/components/StationMap/components/GpsCenterButton/GpsCenterButton.module.scss"],"names":["module","exports","Header","HeaderLogo","HeaderContent","LoadingContainer","Loader","Container","Content","process","dotenv__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","n","dotenv","config","env","CustomButton","MapContainer","loaders","_ref","_ref$name","name","Math","floor","random","length","react_default","a","createElement","className","styles","dist_default","href","alt","src","metadata","description","mockGoogle","maps","googleMapsAsync","allowMock","arguments","undefined","window","google","Error","useGoogleNamespace","props","Object","objectWithoutProperties","assign","classNames","type","CustomControl","_ref$bindingPosition","bindingPosition","children","_ref$onMounted","onMounted","onContainerMounted","state","useContext","GoogleMapContext","_useState","useState","_useState2","slicedToArray","mounted","setMounted","_useState3","document","container","_useGoogleNamespace","useLayoutEffect","map","controls","ControlPosition","push","ReactDOM","createPortal","style","margin","GpsCenterButton","followGps","position","onClick","aria-label","GpsButton","disabled","isValidPosition","GpsIcon","GpsIconActive","GpsIconInactive","coords","latitude","longitude","GpsMarker","_ref$color","color","timestamp","radius","accuracy","heading","lat","lng","Fragment","index_esm","opts","center","fillColor","strokeColor","fillOpacity","strokeWeight","icon","anchor","Point","path","SymbolPath","FORWARD_CLOSED_ARROW","rotation","scale","zIndex","Marker","MAX_ZINDEX","StationInfo","fetchedAt","station","concat","number","toString","padStart","operative","bikes","free","total","rel","target","fromNow","createMarkerSVG","createMarkerUrl","svg","encodeURIComponent","greenBikeCount","coralBikeCount","green","coral","crimson","markerForBikes","createIcon","url","labelOrigin","StationMarker","id","showInfo","useMemo","label","text","fontSize","fontWeight","handleClick","useCallback","defaultZoom","StationMap","location","stations","updateStations","_useContext$state","_useContext$state$map","setFollowGps","_useState4","validStations","setValidStations","_useState5","_useState6","selectedStation","setSelectedStation","MarkerClusterer","_useContext","dispatch","clusterer","MarkerClustererPlus","averageCenter","gridSize","maxZoom","enableRetinaIcons","context","setContext","Provider","value","useEffect","action","object","objects","addMarker","marker","get","removeMarker","useMarkerClusterer","selectedNearestStation","source","LatLng","distance","geometry","spherical","computeDistanceBetween","sort","left","right","nearestStation","panTo","centerGps","_position$coords","gpsCenter","zoom","min","max","log2","gpsZoom","setCenter","setZoom","filter","shift","hideInfo","renderInfoWindow","onCloseClick","pixelOffset","Size","visible","renderGpsMarker","handleDrag","handleGpsCenter","updatedStations","forEach","valid","console","debug","prev","next","prevSorted","_ref3","_ref4","_ref3$number","aId","_ref4$number","bId","nextSorted","_ref5","_ref6","_ref5$number","_ref6$number","every","i","JSON","stringify","data","stationComparer","stationCollectionComparer","apiKey","onDrag","LoadingComponent","useDrawing","useGeometry","usePlaces","useVisualization","AutoRenewImage","BikeImage","_ref2","key","defaultOptions","enableHighAccuracy","StationSourceType","create","smooveData","_parseNameAndNumber","match","exec","Number","error","nameNumberError","parseNameAndNumber","_parseLatLng","coordinates","latLngError","parseLatLng","objectSpread","avl_bikes","free_slots","total_slots","errors","isInteger","isFinite","test","x","createStation","Smoove","result","configMap","Map","uri","cors","StationSource","transform","verboseOutput","classCallCheck","this","createClass","configOrKey","getConfig","mapTransform","options","Array","from","values","getConfigByLocation","_getJSON","asyncToGenerator","regenerator_default","mark","_callee","response","json","wrap","_context","fetch","headers","sent","abrupt","stop","apply","_getStations","_callee2","_context2","getJSON","moment","t0","message","_len","args","_key","log","defaultSourceName","useStations","_getSourceName","params","Boolean","sourceName","getSourceName","stationSourceResult","setStationSourceResult","getStations","then","useDebugValue","hostname","render","setParams","URLSearchParams","search","set","toLowerCase","useQueryParams","watchId","setWatchId","setPosition","setError","handlePositionChanged","handleError","updatePosition","navigator","geolocation","getCurrentPosition","watchPosition","clearWatch","usePosition","_useStations","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.6faf190a.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Header\":\"Header_Header__1XO4R\",\"HeaderLogo\":\"Header_HeaderLogo__1dLj0\",\"HeaderContent\":\"Header_HeaderContent__3wHIB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LoadingContainer\":\"Loader_LoadingContainer__1zHC6\",\"Loader\":\"Loader_Loader__3w7V8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Container\":\"App_Container__Sk-T4\",\"Content\":\"App_Content__2YSLD\"};","import dotenv from 'dotenv';\n\ndotenv.config();\nconst {env = {}} = typeof process === 'undefined' ? {} : process;\n\nexport {env};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"CustomButton\":\"CustomButton_CustomButton__2nL-I\"};","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAQAAAD8x0bcAAAApUlEQVR4AY3RtVUFMBQA0IszAwyDywTQQ4PtgjXIENDiFVbivgHuHlyS8+22yXMZVCrAtDJ5hezfqNDnSBAEkzKqsiOYMSB41CSDIktONMDvl2IVIh2CdkArYFS3yKp1qR0rIjfGpYZdiJwakhpzLbJiT2rDqkiv0aTtNkFneq9iUOseNDixrFjq+0swZFawpVpGE4IgONKrgswqLAgyS74VoJLUG1g+MxexkmmNAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAQAAAD8x0bcAAAA/ElEQVR4AZ3KAUQDQAAAwJNCrCJKRgCEMFBEy6qAEgohBSChUpAAoAWqAEFQAYwMUm1jIESEyhgUgUYbwbZvAMyUDsD5vzEZ635xL6jp0dKwXieCJ21aWFRVMWtCnxaWVAXBt2ktTKoLgjU5dWdWdGuyJwiSiLgQBCOaDPoQXGoHURO6AIjLKys6NORRcIqIY0VleQkYUbMrYdu7axGvsrjxbMa8czWj3DoADPgUl5U1rmQAkHRHRQxAypZGsikFIKZMQQLAg2WNZFkOwJwC+9I6wIayfjEx/UrioM+LJJ0yio6kVSwCWPDlypE3GZ3AlB2rogAgasWOKX/1AyBMVBoNviXZAAAAAElFTkSuQmCC\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"MapContainer\":\"StationMap_MapContainer__2mxHY\"};","import React from 'react';\nimport Spinner, {SpinnerProps} from 'react-spinkit';\n\nimport styles from './Loader.module.scss';\n\ntype SpinnerName = 'double-bounce' | 'chasing-dots' | 'circle' | 'cube-grid';\nexport const loaders: Required<SpinnerProps['name']>[] = [\n  'double-bounce',\n  'chasing-dots',\n  'circle',\n  'cube-grid',\n];\n\nexport function randomLoaderName() {\n  return loaders[Math.floor(Math.random() * loaders.length)] as SpinnerName;\n}\n\nexport interface Props {\n  name?: SpinnerName;\n}\n\nexport function Loader({name = randomLoaderName()}: Props) {\n  if (name) {\n    return (\n      <div className={styles.LoadingContainer}>\n        <Spinner className={styles.Loader} name={name} />\n      </div>\n    );\n  }\n\n  return null;\n}\n","import React from 'react';\nimport {metadata} from 'config';\n\nimport styles from './Header.module.scss';\n\nexport function Header() {\n  return (\n    <div className={styles.Header}>\n      <div className={styles.HeaderLogo}>\n        <a href=\"https://www.mobibikes.ca/en#the-map\">\n          <img\n            alt=\"logo\"\n            src=\"https://www.mobibikes.ca/sites/all/themes/smoove_bootstrap/logo.png\"\n          />\n        </a>\n      </div>\n      <div className={styles.HeaderContent}>\n        <h1>{metadata.description}</h1>\n      </div>\n    </div>\n  );\n}\n","/* global google */\n\ndeclare global {\n  interface Window {\n    google: typeof google;\n  }\n}\n\nconst mockGoogle: any = {\n  maps: {},\n};\n\nexport type google = typeof google;\n\nexport function googleMapsAsync(allowMock = true): typeof google {\n  if (window.google) {\n    return window.google;\n  }\n\n  if (allowMock) {\n    return mockGoogle;\n  }\n\n  throw new Error('google.maps API has not yet loaded');\n}\n\nexport function useGoogleNamespace(): [typeof google, () => typeof google] {\n  return [googleMapsAsync(), googleMapsAsync];\n}\n","import React, {ButtonHTMLAttributes} from 'react';\nimport classNames from 'classnames';\n\nimport styles from './CustomButton.module.scss';\n\nexport function CustomButton({\n  className,\n  ...props\n}: ButtonHTMLAttributes<HTMLButtonElement>) {\n  return (\n    <button\n      className={classNames(styles.CustomButton, className)}\n      type=\"button\"\n      {...props}\n    />\n  );\n}\n","import {ReactNode, useContext, useLayoutEffect, useState} from 'react';\nimport ReactDOM from 'react-dom';\nimport {GoogleMapContext} from '@googlemap-react/core';\nimport {google, useGoogleNamespace} from 'utilities/google';\n\ninterface Props {\n  bindingPosition: keyof typeof google.maps.ControlPosition;\n  children?: ReactNode;\n  onMounted?(container: HTMLDivElement): void;\n}\n\nexport function CustomControl({\n  bindingPosition = 'RIGHT_TOP',\n  children,\n  onMounted = onContainerMounted,\n}: Props) {\n  const {state} = useContext(GoogleMapContext);\n  const [mounted, setMounted] = useState(false);\n  const [container] = useState(document.createElement('div'));\n  const [google] = useGoogleNamespace();\n  useLayoutEffect(() => {\n    if (state && state.map && !mounted) {\n      state.map.controls[google.maps.ControlPosition[bindingPosition]].push(\n        container,\n      );\n\n      onMounted(container);\n\n      setMounted(true);\n    }\n  }, [\n    bindingPosition,\n    container,\n    google.maps.ControlPosition,\n    mounted,\n    onMounted,\n    state,\n    state.map,\n  ]);\n\n  return typeof document === 'undefined'\n    ? null\n    : ReactDOM.createPortal(children, container);\n}\n\nexport function onContainerMounted(container: HTMLDivElement) {\n  container.style.margin = '10px 10px 23px';\n}\n","import React from 'react';\nimport classNames from 'classnames';\nimport {CustomButton} from '../CustomButton';\n\nimport styles from './GpsCenterButton.module.scss';\n\ninterface Props {\n  followGps: boolean;\n  position: Position | undefined;\n  onClick(): void;\n}\n\nexport function GpsCenterButton({followGps, position, onClick}: Props) {\n  return (\n    <CustomButton\n      aria-label=\"Gps Center\"\n      className={styles.GpsButton}\n      disabled={!isValidPosition(position) || followGps}\n      onClick={onClick}\n    >\n      <span\n        className={classNames(\n          styles.GpsIcon,\n          position &&\n            (followGps ? styles.GpsIconActive : styles.GpsIconInactive),\n        )}\n      />\n    </CustomButton>\n  );\n}\n\nexport function isValidPosition(position: Position | undefined) {\n  return (\n    position &&\n    position.coords.latitude !== 0 &&\n    position.coords.longitude !== 0\n  );\n}\n","import React from 'react';\nimport {Circle, Marker} from '@googlemap-react/core';\nimport {useGoogleNamespace} from 'utilities/google';\n\ninterface Props {\n  color?: string;\n  coords: Coordinates;\n  timestamp: number;\n}\n\nexport function GpsMarker({color = 'magenta', coords, timestamp}: Props) {\n  const [google] = useGoogleNamespace();\n  const {accuracy: radius, heading, latitude, longitude} = coords;\n\n  const position: google.maps.LatLngLiteral = {\n    lat: latitude,\n    lng: longitude,\n  };\n\n  return (\n    <>\n      <Circle\n        opts={{\n          center: position,\n          radius,\n          fillColor: color,\n          strokeColor: color,\n          fillOpacity: 0.25,\n          strokeWeight: 1,\n        }}\n      />\n      <Marker\n        opts={{\n          icon: {\n            anchor: new google.maps.Point(0, 2.6),\n            path: google.maps.SymbolPath.FORWARD_CLOSED_ARROW,\n            strokeColor: color,\n            fillColor: color,\n            fillOpacity: 1,\n            rotation: heading || 0,\n            scale: 10,\n            strokeWeight: 1,\n          },\n          position,\n          zIndex: google.maps.Marker.MAX_ZINDEX,\n        }}\n      />\n    </>\n  );\n}\n","import React from 'react';\nimport moment from 'moment';\nimport {ValidStation} from 'models';\n\ninterface Props {\n  fetchedAt: moment.Moment;\n  station: ValidStation;\n}\n\nexport function StationInfo({fetchedAt, station}: Props) {\n  return (\n    <div>\n      <ul>\n        <li>{`[${station.number.toString().padStart(4, '0')}] ${station.name}${\n          station.operative ? '' : ' (CLOSED)'\n        }`}</li>\n        <li>{`${station.bikes} bikes / ${station.free} slots (${\n          station.total\n        } total)`}</li>\n        <li>\n          <a\n            rel=\"noopener noreferrer\"\n            target=\"_blank\"\n            href={`https://www.google.com/maps/dir/?api=${1}&travelmode=bicycling&destination=${\n              station.lat\n            },${station.lng}`}\n          >{`${station.lat}, ${station.lng}`}</a>\n        </li>\n        <li>{`Last Updated: ${fetchedAt.fromNow()}`}</li>\n      </ul>\n    </div>\n  );\n}\n","import {googleMapsAsync} from 'utilities/google';\n\nfunction createMarkerSVG(color: string) {\n  return `<svg width=\"100px\" height=\"100px\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 100 100\" enable-background=\"new 0 0 100 100\" xml:space=\"preserve\">\n  <path id=\"bg\" fill=\"#ffffff\" d=\"m77.438,31.70225c-0.139,-5.802 -1.797,-10.248 -4.202,-14.012c-2.307,-3.607 -5.341,-6.666 -9.258,-8.958c-4.793,-2.803 -11.556,-4.639 -18.766,-3.553c-8.819,1.33 -15.391,6.39 -19.316,12.561c-2.385,3.752 -4.039,8.341 -4.152,14.062c-0.117,5.854 1.706,10.369 3.954,14.261c1.122,1.948 2.132,3.929 3.302,5.805c3.504,5.621 7.291,10.97 10.559,16.765c4.406,7.812 8.044,16.242 10.108,26.371c2.984,-15.367 9.802,-26.583 17.063,-37.58c2.439,-3.692 4.867,-7.382 6.806,-11.41c0.993,-2.063 2.107,-3.996 2.803,-6.306c0.684,-2.283 1.172,-5.035 1.099,-8.006z\"/>\n  <path id=\"fill\" fill=\"${color}\" d=\"M77.438,31.834c-0.139-5.802-1.797-10.248-4.202-14.012c-2.307-3.607-5.341-6.666-9.258-8.958   c-4.793-2.803-11.556-4.639-18.766-3.553c-8.819,1.33-15.391,6.39-19.316,12.561c-2.385,3.752-4.039,8.341-4.152,14.062   c-0.117,5.854,1.706,10.369,3.954,14.261C26.82,48.143,27.83,50.124,29,52c3.504,5.621,7.291,10.97,10.559,16.765   c4.406,7.812,8.044,16.242,10.108,26.371c2.984-15.367,9.802-26.583,17.063-37.58c2.439-3.692,4.867-7.382,6.806-11.41   c0.993-2.063,2.107-3.996,2.803-6.306C77.023,37.557,77.511,34.805,77.438,31.834z M49.685,52.47   c-11.004,0-19.923-8.92-19.923-19.923c0-11.002,8.919-19.922,19.923-19.922c11.003,0,19.923,8.92,19.923,19.922   C69.607,43.55,60.688,52.47,49.685,52.47z\"/>\n</svg>`;\n}\n\nfunction createMarkerUrl(svg: string) {\n  return `data:image/svg+xml;charset=UTF-8,${encodeURIComponent(svg)}`;\n}\n\nconst greenBikeCount = 10;\nconst coralBikeCount = 5;\n\nconst green = createMarkerUrl(createMarkerSVG('forestgreen'));\nconst coral = createMarkerUrl(createMarkerSVG('coral'));\nconst crimson = createMarkerUrl(createMarkerSVG('crimson'));\n\nexport function markerForBikes(bikes: number) {\n  if (bikes > greenBikeCount) {\n    return green;\n  }\n\n  if (bikes > coralBikeCount) {\n    return coral;\n  }\n\n  return crimson;\n}\n\nexport function createIcon(bikes: number): google.maps.Icon {\n  const google = googleMapsAsync();\n\n  return {\n    url: markerForBikes(bikes),\n    labelOrigin: new google.maps.Point(49, 33),\n  };\n}\n","import React, {useCallback, useMemo} from 'react';\nimport {Marker} from '@googlemap-react/core';\nimport {createIcon} from './icon';\n\nexport interface Props {\n  bikes: number;\n  free: number;\n  id: number;\n  lat: number;\n  lng: number;\n  showInfo(id: number): void;\n}\n\nexport function StationMarker({bikes, free, id, lat, lng, showInfo}: Props) {\n  const opts = useMemo<google.maps.MarkerOptions>(\n    () => ({\n      icon: createIcon(bikes),\n      label: {\n        text: `${bikes} | ${free}`,\n        fontSize: '0.75rem',\n        fontWeight: 'bold',\n      },\n      position: {lat, lng},\n    }),\n    [bikes, free, lat, lng],\n  );\n  const handleClick = useCallback(() => {\n    return showInfo(id);\n  }, [id, showInfo]);\n\n  return <Marker onClick={handleClick} opts={opts} />;\n}\n","import React, {useCallback, useContext, useEffect, useState} from 'react';\nimport {\n  BicyclingLayer,\n  GoogleMapContext,\n  InfoWindow,\n  MapBox,\n} from '@googlemap-react/core';\nimport moment from 'moment';\nimport {Loader} from 'components';\nimport {Station, ValidStation} from 'models';\nimport {googleMapsAsync, useGoogleNamespace} from 'utilities/google';\nimport {\n  CustomButton,\n  CustomControl,\n  GpsCenterButton,\n  GpsMarker,\n  StationInfo,\n  StationMarker,\n} from './components';\nimport {useMarkerClusterer} from './hooks';\n\nimport AutoRenewImage from './images/autorenew-1x.png';\nimport BikeImage from './images/bike-1x.png';\nimport styles from './StationMap.module.scss';\n\nconst defaultZoom = 13;\n\nexport interface Props {\n  fetchedAt: moment.Moment;\n  location: google.maps.LatLngLiteral;\n  stations: Station[];\n  position: Position | undefined;\n  updateStations(): void;\n}\n\nexport function StationMap({\n  fetchedAt,\n  location,\n  stations,\n  updateStations,\n  position,\n}: Props) {\n  const {state: {map = undefined} = {}} = useContext(GoogleMapContext);\n  const [followGps, setFollowGps] = useState(true);\n  const [validStations, setValidStations] = useState<ValidStation[]>([]);\n  const [selectedStation, setSelectedStation] = useState<ValidStation>();\n  const [google] = useGoogleNamespace();\n  const MarkerClusterer = useMarkerClusterer();\n  const selectedNearestStation = useCallback(() => {\n    const station = nearestStation(position, validStations);\n\n    if (station) {\n      if (station === selectedStation) {\n        if (map) {\n          map.panTo(station);\n        }\n      } else {\n        setFollowGps(false);\n        setSelectedStation(station);\n      }\n    }\n  }, [map, position, selectedStation, validStations]);\n  const centerGps = useCallback(() => {\n    if (map) {\n      const center = gpsCenter(position);\n      const zoom = gpsZoom(position);\n\n      if (center) {\n        map.setCenter(center);\n      }\n\n      if (zoom) {\n        map.setZoom(zoom);\n      }\n    }\n  }, [map, position]);\n  const showInfo = useCallback(\n    (id: number) => {\n      setSelectedStation(\n        validStations.filter((station) => station.number === id).shift(),\n      );\n    },\n    [validStations],\n  );\n  const hideInfo = useCallback(() => {\n    setSelectedStation(undefined);\n  }, []);\n  const renderInfoWindow = useCallback(() => {\n    if (!map || !selectedStation) {\n      return null;\n    }\n\n    const {lat, lng} = selectedStation;\n\n    return (\n      <InfoWindow\n        onCloseClick={hideInfo}\n        opts={{\n          position: {lat, lng},\n          pixelOffset: new google.maps.Size(0, -100),\n        }}\n        visible\n      >\n        <StationInfo fetchedAt={fetchedAt} station={selectedStation} />\n      </InfoWindow>\n    );\n  }, [fetchedAt, google.maps.Size, hideInfo, map, selectedStation]);\n  const renderGpsMarker = useCallback(() => {\n    if (!map || !position || !position.coords || !position.timestamp) {\n      return null;\n    }\n\n    return (\n      <GpsMarker coords={position.coords} timestamp={position.timestamp} />\n    );\n  }, [map, position]);\n  const handleDrag = useCallback(() => {\n    setFollowGps(false);\n  }, []);\n  const handleGpsCenter = useCallback(() => {\n    if (followGps) {\n      centerGps();\n    } else {\n      setFollowGps(true);\n    }\n  }, [centerGps, followGps]);\n  useEffect(() => {\n    const updatedStations: ValidStation[] = [];\n\n    stations.forEach((station) => {\n      if (!station.valid) {\n        // this should never happen\n        // eslint-disable-next-line no-console\n        console.debug(`Bad Station Found`, station);\n      }\n\n      updatedStations.push(station as ValidStation);\n    });\n\n    if (!stationCollectionComparer(validStations, updatedStations)) {\n      setValidStations(updatedStations);\n    }\n  }, [stations, validStations]);\n  useEffect(() => {\n    if (followGps) {\n      centerGps();\n    }\n  }, [followGps, position, centerGps]);\n\n  return (\n    <div className={styles.MapContainer}>\n      <MapBox\n        apiKey=\"AIzaSyBXrYScIU6sWYUWLLlovYhzq-bLzwTgAoc\"\n        opts={{\n          center: location,\n          zoom: defaultZoom,\n        }}\n        onClick={hideInfo}\n        onDrag={handleDrag}\n        LoadingComponent={<Loader />}\n        useDrawing\n        useGeometry\n        usePlaces\n        useVisualization\n      />\n      <BicyclingLayer />\n      <CustomControl bindingPosition=\"BOTTOM_CENTER\">\n        <CustomButton onClick={updateStations}>\n          <img alt=\"Update stations\" src={AutoRenewImage} />\n        </CustomButton>\n      </CustomControl>\n      <CustomControl bindingPosition=\"BOTTOM_CENTER\">\n        <GpsCenterButton\n          followGps={followGps}\n          position={position}\n          onClick={handleGpsCenter}\n        />\n      </CustomControl>\n      <CustomControl bindingPosition=\"BOTTOM_CENTER\">\n        <CustomButton onClick={selectedNearestStation}>\n          <img alt=\"Nearest stations\" src={BikeImage} />\n        </CustomButton>\n      </CustomControl>\n      {map && validStations.length > 0 && (\n        <MarkerClusterer>\n          {validStations.map(({bikes, free, lat, lng, number}) => {\n            return (\n              <StationMarker\n                key={number}\n                bikes={bikes}\n                free={free}\n                id={number}\n                lat={lat}\n                lng={lng}\n                showInfo={showInfo}\n              />\n            );\n          })}\n        </MarkerClusterer>\n      )}\n      {renderGpsMarker()}\n      {renderInfoWindow()}\n    </div>\n  );\n}\n\nexport function nearestStation(\n  position: Position | undefined,\n  stations: ValidStation[],\n) {\n  if (!position || stations.length === 0) {\n    return undefined;\n  }\n\n  const google = googleMapsAsync(false);\n\n  const source = new google.maps.LatLng(\n    position.coords.latitude,\n    position.coords.longitude,\n  );\n\n  return stations\n    .map((station) => ({\n      station,\n      distance: google.maps.geometry.spherical.computeDistanceBetween(\n        source,\n        new google.maps.LatLng(station.lat, station.lng),\n      ),\n    }))\n    .sort((left, right) => left.distance - right.distance)[0].station;\n}\n\nfunction stationCollectionComparer(prev: Station[], next: Station[]) {\n  if (prev.length !== next.length) {\n    return false;\n  }\n\n  const prevSorted = prev.sort(\n    ({number: aId = 0}, {number: bId = 0}) => aId - bId,\n  );\n  const nextSorted = next.sort(\n    ({number: aId = 0}, {number: bId = 0}) => aId - bId,\n  );\n\n  return prevSorted.every((prev, i) => stationComparer(prev, nextSorted[i]));\n}\n\nfunction stationComparer(prev: Station, next: Station) {\n  return (\n    prev.number === next.number &&\n    prev.valid === next.valid &&\n    JSON.stringify(prev.data) === JSON.stringify(next.data)\n  );\n}\n\nfunction gpsCenter(position: Position | undefined) {\n  if (position) {\n    const {\n      coords: {latitude, longitude},\n    } = position;\n\n    const google = googleMapsAsync();\n\n    return new google.maps.LatLng(latitude, longitude);\n  }\n\n  return undefined;\n}\n\nfunction gpsZoom(position: Position | undefined) {\n  if (position) {\n    const {\n      coords: {accuracy},\n    } = position;\n\n    // magic number explained here: https://gis.stackexchange.com/a/111589\n    return Math.min(20, Math.max(1, Math.log2(591657550 / accuracy) - 6));\n  }\n\n  return undefined;\n}\n","import React, {\n  useCallback,\n  useContext,\n  useMemo,\n  useState,\n  useEffect,\n} from 'react';\nimport MarkerClustererPlus from '@google/markerclustererplus';\nimport {GoogleMapContext} from '@googlemap-react/core';\nimport {Props} from '@shopify/useful-types';\nimport {useGoogleNamespace} from 'utilities/google';\n\ntype Context = Props<typeof GoogleMapContext.Provider>['value'];\ntype Action = Context['dispatch'] extends (action: infer T) => void ? T : never;\n\nexport function useMarkerClusterer() {\n  const {dispatch, state} = useContext(GoogleMapContext);\n  const clusterer = useMemo(() => {\n    if (state && state.map) {\n      return new MarkerClustererPlus(state.map, [], {\n        averageCenter: true,\n        gridSize: 60,\n        maxZoom: 17,\n        enableRetinaIcons: true,\n      });\n    }\n\n    return undefined;\n  }, [state]);\n  const [context, setContext] = useState<Context>();\n  const Provider = useCallback(\n    (props: {children?: any}) =>\n      context ? <GoogleMapContext.Provider value={context} {...props} /> : null,\n    [context],\n  );\n  const [google] = useGoogleNamespace();\n  useEffect(() => {\n    if (!context && clusterer && state) {\n      setContext({\n        dispatch(action: Action) {\n          const {type, id, object} = action;\n\n          if (clusterer && state && state.objects) {\n            switch (type) {\n              case 'add_object':\n                if (object && object instanceof google.maps.Marker) {\n                  clusterer.addMarker(object);\n                }\n                break;\n              case 'remove_object':\n                if (id) {\n                  const marker = state.objects.get(id);\n\n                  if (marker && marker instanceof google.maps.Marker) {\n                    clusterer.removeMarker(marker);\n                  }\n                }\n                break;\n            }\n          }\n\n          dispatch(action);\n        },\n        state,\n      });\n    }\n  }, [clusterer, context, dispatch, google.maps.Marker, state]);\n\n  return Provider;\n}\n","import {useCallback, useDebugValue, useEffect, useState} from 'react';\nimport moment from 'moment';\nimport {QueryParams} from './useQueryParams';\n\ninterface UsePositionProps {\n  options?: PositionOptions;\n  params: QueryParams | undefined;\n}\n\nconst defaultOptions: PositionOptions = {\n  enableHighAccuracy: true,\n};\n\nexport function usePosition({options}: UsePositionProps) {\n  const [watchId, setWatchId] = useState<number>();\n  const [position, setPosition] = useState<Position>();\n  const [error, setError] = useState<PositionError>();\n  const handlePositionChanged = useCallback<PositionCallback>(setPosition, [\n    setPosition,\n  ]);\n  const handleError = useCallback<PositionErrorCallback>(setError, [setError]);\n  const updatePosition = useCallback(() => {\n    if (typeof navigator !== 'undefined') {\n      navigator.geolocation.getCurrentPosition(\n        handlePositionChanged,\n        handleError,\n        options || defaultOptions,\n      );\n    }\n  }, [handleError, handlePositionChanged, options]);\n  useEffect(() => {\n    if (!watchId && typeof navigator !== 'undefined') {\n      const id = navigator.geolocation.watchPosition(\n        handlePositionChanged,\n        handleError,\n        options || defaultOptions,\n      );\n\n      setWatchId(id);\n\n      return () => {\n        if (watchId) {\n          navigator.geolocation.clearWatch(watchId);\n\n          setWatchId(undefined);\n        }\n      };\n    }\n\n    return undefined;\n  }, [handleError, handlePositionChanged, options, watchId]);\n  useDebugValue(\n    position\n      ? `[${position.coords.latitude}, ${position.coords.longitude}] @ ${moment(\n          position.timestamp,\n        ).fromNow()}`\n      : 'Loading...',\n  );\n\n  return {\n    error,\n    position,\n    updatePosition,\n  };\n}\n","import {Station} from 'models';\nimport {googleMapsAsync} from 'utilities/google';\nimport {Smoove} from './transform';\n\nenum StationSourceType {\n  Smoove,\n}\n\nexport type SourceName = 'vancouver' | 'test';\n\nexport interface StationSourceConfig {\n  location: google.maps.LatLngLiteral;\n  name: string;\n  options?: any;\n  type: keyof typeof StationSourceType;\n  uri: string;\n  cors?: boolean;\n}\n\nconst configMap = new Map<SourceName, StationSourceConfig>([\n  [\n    'test',\n    {\n      location: {\n        lat: 49.279627,\n        lng: -123.121116,\n      },\n      name: 'Test Data',\n      type: 'Smoove',\n      uri: '/test_data',\n    },\n  ],\n  [\n    'vancouver',\n    {\n      location: {\n        lat: 49.279627,\n        lng: -123.121116,\n      },\n      name: 'Mobi Bike Vancouver',\n      type: 'Smoove',\n      uri: 'http://vancouver-ca.smoove.pro/api-public/stations',\n      cors: true,\n    },\n  ],\n]);\n\nexport function getConfig(key: SourceName) {\n  const config = configMap.get(key);\n\n  if (!config) {\n    throw new Error(`No station data for source '${key}'`);\n  }\n\n  return config;\n}\n\nexport function getConfigByLocation(location: google.maps.LatLngLiteral) {\n  const google = googleMapsAsync(false);\n\n  return Array.from<StationSourceConfig>(configMap.values())\n    .map((config) => ({\n      config,\n      distance: google.maps.geometry.spherical.computeDistanceBetween(\n        new google.maps.LatLng(location),\n        new google.maps.LatLng(config.location.lat, config.location.lng),\n      ),\n    }))\n    .sort((left, right) => left.distance - right.distance)[0].config;\n}\n\nexport type StationSourceTransform = (response: any) => Station[];\n\nexport function mapTransform({type}: StationSourceConfig) {\n  switch (type) {\n    case 'Smoove':\n      return Smoove;\n    default:\n      throw new Error(`Invalid Configuration '${type}'`);\n  }\n}\n","import {createStation, StationData} from 'models';\n\nexport interface SmooveStation {\n  name: string;\n  coordinates: string;\n  // eslint-disable-next-line babel/camelcase\n  total_slots: number;\n  // eslint-disable-next-line babel/camelcase\n  free_slots: number;\n  // eslint-disable-next-line babel/camelcase\n  avl_bikes: number;\n  operative: boolean;\n  style: string;\n}\n\nexport interface Response {\n  result: SmooveStation[];\n}\n\nexport function parseLatLng({coordinates}: SmooveStation) {\n  try {\n    const match = /^\\s*(-?\\d+\\.\\d+)\\s*,\\s*(-?\\d+\\.\\d+)\\s*$/.exec(coordinates);\n\n    if (!match) {\n      throw new Error(`Unable to parse \"lat, lng\" from ${coordinates}`);\n    }\n\n    return {\n      lat: Number(match[1]),\n      lng: Number(match[2]),\n    };\n  } catch (error) {\n    return {\n      latLngError: error,\n    };\n  }\n}\n\nexport function parseNameAndNumber({name}: SmooveStation) {\n  try {\n    const match = /^(\\d+)\\s+(.*)$/.exec(name);\n\n    if (!match) {\n      throw new Error(`Unable to parse \"number name\" from ${name}`);\n    }\n\n    return {\n      name: match[2],\n      number: Number(match[1]),\n    };\n  } catch (error) {\n    return {\n      nameNumberError: error,\n    };\n  }\n}\n\nexport function create(smooveData: SmooveStation) {\n  const {nameNumberError, name, number} = parseNameAndNumber(smooveData);\n  const {lat, latLngError, lng} = parseLatLng(smooveData);\n  const data: StationData = {\n    ...smooveData,\n    bikes: smooveData.avl_bikes,\n    free: smooveData.free_slots,\n    lat,\n    lng,\n    name,\n    number,\n    operative: smooveData.operative,\n    total: smooveData.total_slots,\n    errors: [],\n  };\n\n  if (nameNumberError) {\n    data.errors.push(nameNumberError);\n  }\n\n  if (latLngError) {\n    data.errors.push(latLngError);\n  }\n\n  return createStation(data);\n}\n\nexport function Smoove({result}: Response) {\n  return result.map(create);\n}\n","export interface StationData extends Partial<google.maps.LatLngLiteral> {\n  bikes: number;\n  errors: any[];\n  free: number;\n  name: string | undefined;\n  number: number | undefined;\n  operative: boolean;\n  total: number;\n}\n\nexport interface Station extends StationData {\n  data: StationData;\n  valid?: boolean;\n}\n\nexport interface ValidStation extends Station {\n  lat: number;\n  lng: number;\n  name: string;\n  number: number;\n  valid: true;\n}\n\nexport function createStation(data: StationData): Station {\n  return {\n    data,\n    valid: [\n      Number.isInteger(data.bikes),\n      Number.isInteger(data.free),\n      Number.isInteger(data.total),\n      data.number != null && Number.isInteger(data.number) && data.number > 0,\n      data.lat != null && Number.isFinite(data.lat) && data.lat !== 0,\n      data.lng != null && Number.isFinite(data.lng) && data.lng !== 0,\n      data.name != null && /^\\w/.test(data.name),\n      data.errors.length === 0,\n    ].every((x) => x),\n    ...data,\n  };\n}\n","import fetch from 'isomorphic-fetch';\nimport moment from 'moment';\nimport {Station} from 'models';\nimport {\n  getConfig,\n  getConfigByLocation,\n  mapTransform,\n  SourceName,\n  StationSourceConfig,\n  StationSourceTransform,\n} from './config';\n\nexport interface StationSourceResult {\n  config: StationSourceConfig;\n  error?: any;\n  fetchedAt: moment.Moment;\n  stations: Station[];\n}\n\nexport interface Options {\n  debug?: boolean;\n}\n\nexport class StationSource {\n  public static create(\n    configOrKey: SourceName | StationSourceConfig,\n    {debug}: Options,\n  ) {\n    const config =\n      typeof configOrKey === 'string' ? getConfig(configOrKey) : configOrKey;\n\n    return new StationSource(config, mapTransform(config), debug);\n  }\n\n  public static nearest(location: google.maps.LatLngLiteral, options: Options) {\n    return StationSource.create(getConfigByLocation(location), options);\n  }\n\n  readonly config: StationSourceConfig;\n  readonly verboseOutput: boolean;\n  private readonly transform: StationSourceTransform;\n\n  constructor(\n    config: StationSourceConfig,\n    transform: StationSourceTransform,\n    // eslint-disable-next-line no-process-env\n    verboseOutput = process.env.NODE_ENV !== 'production',\n  ) {\n    this.config = config;\n    this.transform = transform;\n    this.verboseOutput = verboseOutput;\n  }\n\n  async getJSON() {\n    const uri = this.config.cors\n      ? `https://cors.io/?${this.config.uri}`\n      : this.config.uri;\n    this.debug(`Fetching stations from '${uri}' ...`);\n\n    const response = await fetch(uri, {\n      headers: this.config.options ? this.config.options.headers : undefined,\n    });\n\n    const json = response.json();\n\n    this.debug('Fetch Response', json);\n\n    return json;\n  }\n\n  async getStations(): Promise<StationSourceResult> {\n    try {\n      const json = await this.getJSON();\n\n      const stations = this.transform(json);\n\n      this.debug(`Fetched ${stations.length} stations`);\n\n      return {\n        config: this.config,\n        fetchedAt: moment(),\n        stations,\n      };\n    } catch (error) {\n      this.debug(`Fetch failed: ${error.message || 'Unknown Error'}`, error);\n\n      return {\n        config: this.config,\n        error,\n        fetchedAt: moment(),\n        stations: [],\n      };\n    }\n  }\n\n  protected debug(message: string, ...args: any[]) {\n    if (this.verboseOutput) {\n      // eslint-disable-next-line no-console\n      console.log(message, args);\n    }\n  }\n}\n","import {useCallback, useDebugValue, useEffect, useMemo, useState} from 'react';\nimport {SourceName, StationSource, StationSourceResult} from 'data';\nimport {QueryParams} from './useQueryParams';\n\ninterface UseStationsProps {\n  params: QueryParams | undefined;\n}\n\nexport const defaultSourceName: SourceName = 'vancouver';\n\nfunction getSourceName(params: QueryParams | undefined) {\n  if (!params) {\n    return {};\n  }\n\n  return {\n    debug: Boolean(params.get('debug')),\n    sourceName: (params.get('source') ||\n      (params.get('test') && 'test') ||\n      defaultSourceName) as SourceName,\n  };\n}\n\nexport function useStations({params}: UseStationsProps) {\n  const {debug, sourceName} = getSourceName(params);\n  const [stationSourceResult, setStationSourceResult] = useState<\n    StationSourceResult\n  >();\n  const source = useMemo(() => {\n    if (sourceName) {\n      return StationSource.create(sourceName, {debug});\n    }\n\n    return null;\n  }, [debug, sourceName]);\n  const updateStations = useCallback(() => {\n    if (source) {\n      return source.getStations().then(setStationSourceResult);\n    }\n\n    return undefined;\n  }, [source]);\n  useEffect(() => {\n    if (source) {\n      updateStations();\n    }\n  }, [source, updateStations]);\n  useDebugValue(\n    stationSourceResult\n      ? `${\n          stationSourceResult.stations.length\n        } stations loaded (${stationSourceResult.fetchedAt.fromNow()})`\n      : 'Loading...',\n  );\n\n  return {\n    stationSourceResult,\n    updateStations,\n  };\n}\n","/* eslint-disable */\n\n// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\n    ),\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as {env: {[key: string]: string}}).env.PUBLIC_URL,\n      window.location.href,\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA',\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.',\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.',\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {App} from './App';\nimport {unregister} from './serviceWorker';\n\nimport 'styles/_global.scss';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nunregister();\n","import React from 'react';\nimport {GoogleMapProvider} from '@googlemap-react/core';\nimport {Loader} from 'components';\nimport {Header, StationMap} from './components';\nimport {useQueryParams, usePosition, useStations} from './hooks';\n\nimport styles from './App.module.scss';\n\nexport function App() {\n  const {params} = useQueryParams();\n  const {position} = usePosition({params});\n  const {stationSourceResult, updateStations} = useStations({params});\n  return (\n    <div className={styles.Container}>\n      <Header />\n      <div className={styles.Content}>\n        {stationSourceResult ? (\n          <GoogleMapProvider>\n            <StationMap\n              fetchedAt={stationSourceResult.fetchedAt}\n              location={stationSourceResult.config.location}\n              stations={stationSourceResult.stations}\n              position={position}\n              updateStations={updateStations}\n            />\n          </GoogleMapProvider>\n        ) : (\n          <Loader />\n        )}\n      </div>\n    </div>\n  );\n}\n","import {useDebugValue, useEffect, useState} from 'react';\n\nexport type QueryParams = Map<string, string>;\n\nexport function useQueryParams() {\n  const [params, setParams] = useState<QueryParams>();\n  useEffect(() => {\n    if (typeof window !== 'undefined' && !params) {\n      const params = new Map<string, string>();\n\n      new URLSearchParams(window.location.search).forEach((value, key) => {\n        params.set(key.toLowerCase(), value);\n      });\n\n      setParams(params);\n    }\n  }, [params]);\n  useDebugValue(\n    typeof window === 'undefined' ? 'Loading...' : window.location.search,\n  );\n\n  return {\n    params,\n  };\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"GpsButton\":\"GpsCenterButton_GpsButton__2-_NB\",\"GpsIconInactive\":\"GpsCenterButton_GpsIconInactive__2Re2k\",\"GpsIcon\":\"GpsCenterButton_GpsIcon__1kSXV\",\"GpsIconActive\":\"GpsCenterButton_GpsIconActive__3fpf4\"};"],"sourceRoot":""}