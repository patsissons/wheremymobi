(this.webpackJsonpwheremymobi=this.webpackJsonpwheremymobi||[]).push([[0],{11:function(t,e,n){t.exports={Header:"Header_Header__1XO4R",HeaderLogo:"Header_HeaderLogo__1dLj0",HeaderContent:"Header_HeaderContent__3wHIB"}},15:function(t,e,n){t.exports={LoadingContainer:"Loader_LoadingContainer__1zHC6",Loader:"Loader_Loader__3w7V8"}},17:function(t,e,n){t.exports={Container:"App_Container__Sk-T4",Content:"App_Content__2YSLD"}},18:function(t,e,n){"use strict";(function(t){var e=n(21);n.n(e).a.config();("undefined"===typeof t?{}:t).env}).call(this,n(12))},19:function(t){t.exports=JSON.parse('{"name":"wheremymobi","description":"Find mobi bikes in Vancouver, BC.","version":"1.1.0","private":true,"author":{"name":"Pat Sissons","email":"patricksissons@gmail.com","url":"https://github.com/patsissons"},"repository":{"type":"git","url":"git+https://github.com/patsissons/wheremymobi.git"},"bugs":{"url":"https://github.com/patsissons/wheremymobi/issues"},"homepage":"https://wheremymobi.com","keywords":["mobi","bike"],"license":"MIT","dependencies":{"@googlemaps/markerclustererplus":"^1.0.0","@googlemap-react/core":"^0.1.0","@shopify/react-graphql":"^7.0.0","@shopify/react-hooks":"^2.0.0","@shopify/react-i18n":"^6.0.0","apollo-server-express":"^3.0.0","classnames":"^2.0.0","graphql":"^14.5.0","graphql-tag":"^2.0.0","isomorphic-fetch":"^3.0.0","moment":"^2.0.0","node-sass":"^6.0.0","react":"^16.8.0","react-dom":"^16.8.0","react-spinkit":"^3.0.0","scriptjs":"^2.0.0","typescript":"^4.0.0"},"devDependencies":{"@shopify/eslint-plugin":"^40.0.0","@shopify/react-testing":"^3.0.0","@types/classnames":"^2.0.0","@types/dotenv":"^8.0.0","@types/fs-extra":"^9.0.0","@types/googlemaps":"^3.0.0","@types/graphql":"^14.0.0","@types/isomorphic-fetch":"^0.0.35","@types/jest":"^26.0.0","@types/node":"^14.0.0","@types/react":"^16.8.0","@types/react-dom":"^16.8.0","@types/react-spinkit":"^3.0.0","del-cli":"^4.0.0","dotenv":"^10.0.0","eslint":"^7.0.0","eslint-stats":"^1.0.0","express":"^4.0.0","fs-extra":"^10.0.0","husky":"^7.0.0","ncp":"^2.0.0","prettier":"^2.0.0","pretty-quick":"^3.0.0","react-scripts":"^4.0.0","serve":"^12.0.0"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","clean":"del build docs .cache","deploy":"yarn clean && yarn build && ncp build docs","lint":"yarn lint:ts","lint:stats":"yarn lint:ts --format node_modules/eslint-stats/byError.js","lint:ts":"eslint . --ext .ts --ext .tsx --max-warnings 0 --format codeframe","pretty":"prettier --write \'**/*.{css,scss,js,json,md,ts,tsx,yml}\'","server":"serve -s build","validate":"tsc --noEmit"},"engines":{"node":">=11.0.0"},"eslintConfig":{"extends":["plugin:@shopify/typescript","plugin:@shopify/react","plugin:@shopify/jest","plugin:@shopify/prettier"],"settings":{"react":{"version":"16.9"}},"rules":{"@shopify/jsx-no-hardcoded-content":"off"},"overrides":[{"parserOptions":{"project":"./tsconfig.json"},"files":["*.ts","*.tsx"]}]},"eslintIgnore":["/.cache","/build","/docs","/public","/src/react-app-env.d.ts","/src/serviceWorker.ts"],"husky":{"hooks":{"pre-commit":"pretty-quick --staged"}},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}')},22:function(t,e,n){t.exports={CustomButton:"CustomButton_CustomButton__2nL-I"}},59:function(t,e,n){},6:function(t,e,n){t.exports={MapContainer:"StationMap_MapContainer__2mxHY",ButtonImage:"StationMap_ButtonImage__1ypMu"}},60:function(t,e,n){"use strict";n.r(e);var r=n(0),o=n(5),a=n.n(o),i=n(3),c=n(20),s=n.n(c),l=n(15),u=n.n(l),f=n(1),p=["double-bounce","chasing-dots","circle","cube-grid"];function b(t){var e=t.name,n=void 0===e?p[Math.floor(Math.random()*p.length)]:e;return n?Object(f.jsx)("div",{className:u.a.LoadingContainer,children:Object(f.jsx)(s.a,{className:u.a.Loader,name:n})}):null}n(18);var d=n(19),m=n(11),g=n.n(m);function v(){return Object(f.jsxs)("div",{className:g.a.Header,children:[Object(f.jsx)("div",{className:g.a.HeaderLogo,children:Object(f.jsx)("a",{href:"https://www.mobibikes.ca/en#the-map",children:Object(f.jsx)("img",{alt:"logo",src:"https://www.mobibikes.ca/sites/all/themes/smoove_bootstrap/logo.png"})})}),Object(f.jsx)("div",{className:g.a.HeaderContent,children:Object(f.jsx)("h1",{children:d.description})})]})}var h=n(2),j=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).GOOGLE_MAPS_API_KEY;var O={maps:{}};function A(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(window.google)return window.google;if(t)return O;throw new Error("google.maps API has not yet loaded")}function y(){return[A(),A]}var w=n(4),x=n(27),S=n(13),E=n.n(S),C=n(22),k=n.n(C),I=["className"];function M(t){var e=t.className,n=Object(x.a)(t,I);return Object(f.jsx)("button",Object(w.a)({className:E()(k.a.CustomButton,e),type:"button"},n))}function B(t){var e=t.bindingPosition,n=void 0===e?"RIGHT_TOP":e,o=t.children,c=t.onMounted,s=void 0===c?P:c,l=Object(r.useContext)(i.c).state,u=Object(r.useState)(!1),f=Object(h.a)(u,2),p=f[0],b=f[1],d=Object(r.useState)(document.createElement("div")),m=Object(h.a)(d,1)[0],g=y(),v=Object(h.a)(g,1)[0];return Object(r.useLayoutEffect)((function(){l&&l.map&&!p&&(l.map.controls[v.maps.ControlPosition[n]].push(m),s(m),b(!0))}),[n,m,v.maps.ControlPosition,p,s,l,l.map]),"undefined"===typeof document?null:a.a.createPortal(o,m)}function P(t){t.style.margin="10px 10px 23px"}function N(t){var e=t.color,n=void 0===e?"magenta":e,r=t.coords,o=(t.timestamp,y()),a=Object(h.a)(o,1)[0],c=r.accuracy,s=r.heading,l={lat:r.latitude,lng:r.longitude};return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(i.b,{opts:{center:l,radius:c,fillColor:n,strokeColor:n,fillOpacity:.25,strokeWeight:1}}),Object(f.jsx)(i.g,{opts:{icon:{anchor:new a.maps.Point(0,2.6),path:a.maps.SymbolPath.FORWARD_CLOSED_ARROW,strokeColor:n,fillColor:n,fillOpacity:1,rotation:s||0,scale:10,strokeWeight:1},position:l,zIndex:a.maps.Marker.MAX_ZINDEX}})]})}function R(t){var e=t.fetchedAt,n=t.station;return Object(f.jsxs)("ul",{children:[Object(f.jsx)("li",{children:"[".concat(n.number.toString().padStart(4,"0"),"] ").concat(n.name).concat(n.operative?"":" (CLOSED)")}),Object(f.jsx)("li",{children:"".concat(n.bikes," bikes / ").concat(n.free," slots (").concat(n.total," total)")}),Object(f.jsx)("li",{children:Object(f.jsx)("a",{rel:"noopener noreferrer",target:"_blank",href:"https://www.google.com/maps/dir/?api=".concat(1,"&travelmode=bicycling&destination=",n.lat,",").concat(n.lng),children:"".concat(n.lat,", ").concat(n.lng)})}),Object(f.jsx)("li",{children:"Last Updated: ".concat(e.fromNow())})]})}function L(t){var e=t.bikes,n=t.free,o=t.number,a=t.onClick,c=t.lat,s=t.lng,l=t.preferBikes,u=t.showLabel,p=t.total,b=Object(r.useState)(),d=Object(h.a)(b,2),m=d[0],g=d[1];return Object(r.useEffect)((function(){g(function(t,e,n,r,o,a,i){var c=A();return{icon:{url:D(o?t:e,i),size:new c.maps.Size(50,50),labelOrigin:new c.maps.Point(25,21)},label:a?{color:"white",text:"".concat(t," | ").concat(e),fontSize:"0.75rem",fontWeight:"bold"}:void 0,position:{lat:n,lng:r}}}(e,n,c,s,l,u,p))}),[e,n,c,s,l,u,p]),Object(f.jsx)(i.g,{id:"station-".concat(o),onClick:a,opts:m},o)}function D(t,e){if(t<=0)return"data:image/png;base64,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";var n=t/e;return n>=.5?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAAAclBMVEUAAAD////////////////9/v3p9+/////9/v3+//7////1+/jd8ub////////////////2+/j9/v79/v7///////////////88s3H///+G0Ke24sqe2bhIuHrP7NzD59Pb8eVtxpVhwYyS1bBVvYOq3sHWwgC0AAAAGHRSTlMAEKDQYNP9IPPxQPz8j3BQwPzi4bCAMJDZnGXvAAABVUlEQVRIx6XV2W6DMBCFYYwJSwhp9voYbANJ3/8Vu6jSmMV4qv73n0aMsJ0sE1kj8ZNsMpHEK9IKsK77ylmgSosIEA3gtFG/Ge2AZnPSWwX3UpNeDte3sDjiMKhFwwFZSKTojVrJ9EhDolWBWtzXREZizax8zx69CmcOZbHYbpUbtdF4lnNyx6A2e87XVpRWRcqv8229YkTPxpRORcvldF06Tjr4S3uHiZMRR4+cesUoP3kEjkNs5ZOOQzqQEFwivIU9eWT/nyn8b6HQckjrE2lZS5YeudUcck4nh3iIiwGZRwrO939gcpZlzvz5qQyaecSoSx4dclncYpo5hNrV45YYa5nMe5S92bz6HisPBWyYWOxXn4qta/z4x6u/pccibkjwDYm4iQsyz6noSISN9oUmEe4E7YtbEk9IaBJSJGxDgmtIMM0O+lvsSLAMCa6pSbBNUHwCmd6DeH76KRIAAAAASUVORK5CYII=":n>=.25?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAAAbFBMVEUAAAD////////////////+9e3////97+L/+/j//v3///7////////////////////97+P//////v7//v7////////////////0pGD////5x5z60rH73cT1qmr86Nj74873u4j2tX75zKb2sHQRU6flAAAAGHRSTlMA0RCgYP0g/vzz8Z+PQHBQ/sDi4bCAXzBKHBbEAAABTElEQVRIx6XU626DMAyG4QTGmULPzRcIoe393+OmaZJDIdjS3v+PDFYStS65txq/6faeKL68qYHJDz/5CaibnAFJC3jrzF/OeqDdndTX8G+z6O1x6eOiw3E2q+YjvmKiQeHMRq5AExOjiTTitiW+SGyZfi0OKEw8d6zy1XbrzJmdnqX+JDfMZrfX59ryajJM2WVJUrw5Yj/GVN6wZXq5LsuTAeHSWjiePNEF5FQYQdkpIPASMtUhGSRkAIlESpJgYS8ZOfxnivxfKIwSMoZETxIy6YBcSwkp08UlnnkxL45yjkF4LCmdiQ8/fZkVXjHqnLFDzgtAY/ghlC6fskeJelSFiwtXVA+1qscUJxMOaqNu7xnv1GYpxphIlWIMIxhDgjW8IPNaioFE3NhQWBLxTrChuCq+RMOS0IkSGxJSQ0JuSMgNCakpSYhNVHwD4ZOC/xT12P4AAAAASUVORK5CYII=":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAAAb1BMVEUAAAD//////////////////v724uL+/f3////99/f//////////////////////////v7//v7////////////67e3////NXFz////gmprnr6/swsLQZmbvzMz56+vy19fahYXXe3vjpKTTcXHy1tYWZQtuAAAAF3RSTlMAEKBg0PL+0yD8j0DPUMBw4uGwgDD9bxWtl28AAAFSSURBVEjHpdTrjoMgEIZhUKBqteddPhTUHu7/Gne72aQUikPT9/+TiRMcFsfLpsVfbVNyRlcVEphc/5ubAFlUBOAN4IzV/1njgGZxUifhrvqpq8O+S4tvqFlHzQplShRQVr/IKhQpMehEA46vROmL2HSxWEPpdFbJKtquHK1e6Fy3ITli1otdwrVVctJE4z7c1pUiJhgjnSYb2+d1GZr08JfWwNLkjK1HNkpnNG48ApdDJumTPof0eAieS7i3sEseWX8yJf9bPDLkkMEnYspasvDIoc4hdeGREjMt5qenXKF/91kyMdLkSwTnxbz7i7EdOWbcRVfM0EOCVvV5+SgJFnaSyi6evhOL6nBLkxvW7EXbpTO+JU5/LArGCEOIwNAiNpSITXgG+rugjPGFuQuqDYwvDoyOC5iHEJxlmljQJhC0WcHcxSoQlAkFbepI0CYpfgA+aX5ABt3FBwAAAABJRU5ErkJggg=="}var H,T=n(23),z={averageCenter:!0,gridSize:90,maxZoom:17,enableRetinaIcons:!1};var V=["title","titleId"];function F(){return(F=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function q(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function U(t,e){var n=t.title,o=t.titleId,a=q(t,V);return r.createElement("svg",F({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 612 612",ref:e,"aria-labelledby":o},a),n?r.createElement("title",{id:o},n):null,H||(H=r.createElement("path",{d:"M408,132.6c25.5,0,45.9-20.4,45.9-45.9S433.5,40.8,408,40.8s-45.9,20.4-45.9,45.9S382.5,132.6,408,132.6z M484.5,316.2 c-71.4,0-127.5,56.1-127.5,127.5s56.1,127.5,127.5,127.5S612,515.101,612,443.7S555.9,316.2,484.5,316.2z M484.5,532.95 c-48.45,0-89.25-40.801-89.25-89.25c0-48.451,40.8-89.25,89.25-89.25s89.25,40.799,89.25,89.25 C573.75,492.149,532.95,532.95,484.5,532.95z M377.4,265.2h107.1v-45.9h-81.6l-48.45-84.15c-7.65-12.75-20.4-20.4-38.25-20.4 c-12.75,0-22.95,5.1-30.6,12.75l-94.35,94.35c-7.65,7.65-12.75,17.85-12.75,30.6c0,15.3,7.65,30.6,20.4,38.25l86.7,51v127.5h45.9 V303.45l-56.1-43.35l58.65-58.65L377.4,265.2z M127.5,316.2C56.1,316.2,0,372.3,0,443.7s56.1,127.5,127.5,127.5 S255,515.101,255,443.7S198.9,316.2,127.5,316.2z M127.5,532.95c-48.45,0-89.25-40.801-89.25-89.25 c0-48.451,40.8-89.25,89.25-89.25s89.25,40.799,89.25,89.25C216.75,492.149,175.95,532.95,127.5,532.95z"})))}var Y,W=r.forwardRef(U),Q=(n.p,["title","titleId"]);function G(){return(G=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function Z(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function J(t,e){var n=t.title,o=t.titleId,a=Z(t,Q);return r.createElement("svg",G({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",ref:e,"aria-labelledby":o},a),n?r.createElement("title",{id:o},n):null,Y||(Y=r.createElement("path",{fill:"#637381",d:"M10 0C4.486 0 0 4.486 0 10s4.486 10 10 10 10-4.486 10-10S15.514 0 10 0m0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8m4-9H6a1 1 0 1 0 0 2h8a1 1 0 1 0 0-2"})))}var X,K,_=r.forwardRef(J),$=(n.p,["title","titleId"]);function tt(){return(tt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function et(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function nt(t,e){var n=t.title,o=t.titleId,a=et(t,$);return r.createElement("svg",tt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",ref:e,"aria-labelledby":o},a),n?r.createElement("title",{id:o},n):null,X||(X=r.createElement("path",{d:"M10 0C4.486 0 0 4.486 0 10s4.486 10 10 10 10-4.486 10-10S15.514 0 10 0zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8z",fill:"#637381"})),K||(K=r.createElement("path",{d:"M8.996 8.996V7.008c.001-.043 0-.054.004-.097.044-.449.423-.845.879-.9.094-.011.115-.007.145-.007.043.002.054.002.097.007.448.054.834.442.879.9.004.043.003.054.004.097v1.988h1.992c.016 0 .032 0 .048.001.49.035.918.441.954.93.039.545-.424 1.063-1.002 1.077h-1.992V13c-.01.411-.272.797-.648.939-.584.221-1.327-.217-1.359-.891-.001-.016-.001-.032-.001-.048v-1.996H7.004c-.511-.012-.966-.435-1.002-.931-.038-.53.396-1.049.954-1.076.016-.001.032-.001.048-.001h1.992z",fill:"#637381"})))}var rt,ot=r.forwardRef(nt),at=(n.p,["title","titleId"]);function it(){return(it=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function ct(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function st(t,e){var n=t.title,o=t.titleId,a=ct(t,at);return r.createElement("svg",it({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 561 561",ref:e,"aria-labelledby":o},a),n?r.createElement("title",{id:o},n):null,rt||(rt=r.createElement("path",{d:"M280.5,178.5c-56.1,0-102,45.9-102,102c0,56.1,45.9,102,102,102c56.1,0,102-45.9,102-102     C382.5,224.4,336.6,178.5,280.5,178.5z M507.45,255C494.7,147.9,410.55,63.75,306,53.55V0h-51v53.55     C147.9,63.75,63.75,147.9,53.55,255H0v51h53.55C66.3,413.1,150.45,497.25,255,507.45V561h51v-53.55     C413.1,494.7,497.25,410.55,507.45,306H561v-51H507.45z M280.5,459C181.05,459,102,379.95,102,280.5S181.05,102,280.5,102     S459,181.05,459,280.5S379.95,459,280.5,459z"})))}var lt,ut=r.forwardRef(st),ft=(n.p,["title","titleId"]);function pt(){return(pt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function bt(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function dt(t,e){var n=t.title,o=t.titleId,a=bt(t,ft);return r.createElement("svg",pt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 491.236 491.236",ref:e,"aria-labelledby":o},a),n?r.createElement("title",{id:o},n):null,lt||(lt=r.createElement("path",{d:"M55.89,262.818c-3-26-0.5-51.1,6.3-74.3c22.6-77.1,93.5-133.8,177.6-134.8v-50.4c0-2.8,3.5-4.3,5.8-2.6l103.7,76.2         c1.7,1.3,1.7,3.9,0,5.1l-103.6,76.2c-2.4,1.7-5.8,0.2-5.8-2.6v-50.3c-55.3,0.9-102.5,35-122.8,83.2c-7.7,18.2-11.6,38.3-10.5,59.4         c1.5,29,12.4,55.7,29.6,77.3c9.2,11.5,7,28.3-4.9,37c-11.3,8.3-27.1,6-35.8-5C74.19,330.618,59.99,298.218,55.89,262.818z         M355.29,166.018c17.3,21.5,28.2,48.3,29.6,77.3c1.1,21.2-2.9,41.3-10.5,59.4c-20.3,48.2-67.5,82.4-122.8,83.2v-50.3         c0-2.8-3.5-4.3-5.8-2.6l-103.7,76.2c-1.7,1.3-1.7,3.9,0,5.1l103.6,76.2c2.4,1.7,5.8,0.2,5.8-2.6v-50.4         c84.1-0.9,155.1-57.6,177.6-134.8c6.8-23.2,9.2-48.3,6.3-74.3c-4-35.4-18.2-67.8-39.5-94.4c-8.8-11-24.5-13.3-35.8-5         C348.29,137.718,346.09,154.518,355.29,166.018z"})))}var mt,gt=r.forwardRef(dt),vt=(n.p,["title","titleId"]);function ht(){return(ht=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function jt(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function Ot(t,e){var n=t.title,o=t.titleId,a=jt(t,vt);return r.createElement("svg",ht({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 459 459",ref:e,"aria-labelledby":o},a),n?r.createElement("title",{id:o},n):null,mt||(mt=r.createElement("g",null,r.createElement("path",{d:"M408,0H51C22.95,0,0,22.95,0,51v357c0,28.05,22.95,51,51,51h357c28.05,0,51-22.95,51-51V51C459,22.95,436.05,0,408,0z  M173.4,265.2V357h-45.9V102h109.65c38.25,0,56.1,7.65,71.399,22.95c17.851,15.3,22.95,35.7,22.95,58.65 c0,25.5-7.65,45.9-22.95,58.65s-33.149,20.4-71.399,20.4H173.4V265.2z"}),r.createElement("path",{d:"M173.4,229.5v-91.8h58.65c17.851,0,30.601,5.1,38.25,15.3c7.65,10.2,12.75,17.85,12.75,30.6c0,15.3-5.1,22.95-12.75,33.15 c-7.649,7.65-17.85,12.75-35.7,12.75H173.4z"}))))}var At=r.forwardRef(Ot),yt=(n.p,n(6)),wt=n.n(yt);function xt(t){var e=t.fetchedAt,n=t.location,o=t.stations,a=t.updateStations,c=t.position,s=Object(r.useContext)(i.c).state,l=(s=void 0===s?{}:s).map,u=void 0===l?void 0:l,p=Object(r.useState)(!0),d=Object(h.a)(p,2),m=d[0],g=d[1],v=Object(r.useState)(!1),O=Object(h.a)(v,2),x=O[0],S=O[1],E=Object(r.useState)([]),C=Object(h.a)(E,2),k=C[0],I=C[1],P=Object(r.useState)(),D=Object(h.a)(P,2),H=D[0],V=D[1],F=Object(r.useState)(!0),q=Object(h.a)(F,2),U=q[0],Y=q[1],Q=Object(r.useState)(!1),G=Object(h.a)(Q,2),Z=G[0],J=G[1],X=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object(r.useContext)(i.c),n=e.dispatch,o=e.state,a=Object(r.useState)(),c=Object(h.a)(a,2),s=c[0],l=c[1],u=Object(r.useState)(),p=Object(h.a)(u,2),b=p[0],d=p[1],m=Object(r.useCallback)((function(t){return b?Object(f.jsx)(i.c.Provider,Object(w.a)({value:b},t)):null}),[b]),g=y(),v=Object(h.a)(g,1)[0];return Object(r.useEffect)((function(){!s&&o&&o.map&&l(new T.a(o.map,[],Object(w.a)(Object(w.a)({},z),t))),!b&&s&&o&&d({dispatch:function(t){var e=t.type,r=t.id,a=t.object;if(s&&o&&o.objects)switch(e){case"add_object":a&&a instanceof v.maps.Marker&&s.addMarker(a);break;case"remove_object":if(r){var i=o.objects.get(r);i&&i instanceof v.maps.Marker&&s.removeMarker(i)}}n(t)},state:o})}),[s,b,n,v.maps.Marker,t,o]),m}(),K=Object(r.useCallback)((function(){if(u){var t=Et(c)&&St(c),e=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:17;if(t){var n=t.coords.accuracy;return Math.min(e,Math.max(1,Math.log2(591657550/n)-6))}return}(c);t&&u.setCenter(t),e&&u.setZoom(e),x||S(!0)}}),[x,u,c]);return Object(r.useEffect)((function(){var t=[];o.forEach((function(e){e.valid?t.push(e):console.debug("Bad Station Found",e)})),function(t,e){if(t.length!==e.length)return!1;var n=t.sort((function(t,e){var n=t.number,r=void 0===n?0:n,o=e.number;return r-(void 0===o?0:o)})),r=e.sort((function(t,e){var n=t.number,r=void 0===n?0:n,o=e.number;return r-(void 0===o?0:o)}));return n.every((function(t,e){return function(t,e){return t.number===e.number&&t.valid===e.valid&&JSON.stringify(t.data)===JSON.stringify(e.data)}(t,r[e])}))}(k,t)||I(t)}),[o,k]),Object(r.useEffect)((function(){m&&K()}),[m,K]),Object(f.jsxs)("div",{className:wt.a.MapContainer,children:[Object(f.jsx)(i.f,{apiKey:j||atob("QUl6YVN5QmtveTcwa0EtLWU3S21iRGhsUDdWY3NJQkNKZ3N6elFz"),opts:{center:n,zoom:13,maxZoom:17},onClick:function(){return V(void 0)},onDragStart:function(){m&&g(!1),x&&S(!1)},LoadingComponent:Object(f.jsx)(b,{})}),Object(f.jsx)(i.a,{}),Object(f.jsx)(B,{bindingPosition:"BOTTOM_CENTER",children:Object(f.jsx)(M,{onClick:a,children:Object(f.jsx)(gt,{className:wt.a.ButtonImage})})}),Object(f.jsx)(B,{bindingPosition:"BOTTOM_CENTER",children:Object(f.jsx)(M,{disabled:!Et(c),onClick:function(){m?x?(m&&g(!1),x&&S(!1)):K():m||g(!0)},children:Object(f.jsx)(ut,{className:wt.a.ButtonImage,style:{fill:m?"#008ABF":"#000",fillOpacity:Et(c)?1:.25},focusable:"false","aria-hidden":"true"})})}),Object(f.jsx)(B,{bindingPosition:"BOTTOM_CENTER",children:Object(f.jsx)(M,{onClick:function(){if(u){var t=function(t,e,n){var r=A();return e.map((function(e){return{station:e,distance:r.maps.geometry.spherical.computeDistanceBetween(t,new r.maps.LatLng(e.lat,e.lng))}})).filter((function(t){var e=t.station,r=e.bikes,o=e.errors,a=e.free,i=e.operative;return null==n||(!o||!o.length)&&i&&(n?r>0:a>0)})).sort((function(t,e){return t.distance-e.distance}))[0].station}(m&&Et(c)&&St(c)||u.getCenter(),k,U);t===H?(u.panTo(t),u.setZoom(17)):(m&&g(!1),V(t))}},children:$()})}),Object(f.jsx)(B,{bindingPosition:"RIGHT_TOP",children:Object(f.jsx)(M,{onClick:function(){return Y((function(t){return!t}))},children:$()})}),Object(f.jsx)(B,{bindingPosition:"RIGHT_TOP",children:Object(f.jsx)(M,{onClick:function(){return J((function(t){return!t}))},children:function(){if(Z)return Object(f.jsx)(_,{className:wt.a.ButtonImage});return Object(f.jsx)(ot,{className:wt.a.ButtonImage})}()})}),u&&k.length>0&&Object(f.jsx)(X,{children:k.map((function(t){var e=t.bikes,n=t.free,r=t.lat,o=t.lng,a=t.number,i=t.total;return Object(f.jsx)(L,{bikes:e,free:n,lat:r,lng:o,number:a,onClick:function(){return V(k.filter((function(t){return t.number===a})).shift())},preferBikes:U,showLabel:Z,total:i},a)}))}),u&&c&&c.coords&&c.timestamp&&Object(f.jsx)(N,{coords:c.coords,timestamp:c.timestamp}),u&&H&&Object(f.jsx)(i.e,{anchorId:"station-".concat(H.number),onCloseClick:function(){return V(void 0)},visible:!0,children:Object(f.jsx)(R,{fetchedAt:e,station:H})})]});function $(){return U?Object(f.jsx)(W,{className:wt.a.ButtonImage}):Object(f.jsx)(At,{className:wt.a.ButtonImage,style:{fill:"#008ABF"}})}}function St(t){var e=t.coords,n=e.latitude,r=e.longitude;return new(A().maps.LatLng)(n,r)}function Et(t){return Boolean(t&&0!==t.coords.latitude&&0!==t.coords.longitude)}var Ct=n(7),kt=n.n(Ct),It={enableHighAccuracy:!0};var Mt,Bt=n(9),Pt=n.n(Bt),Nt=n(16),Rt=n(24),Lt=n(25),Dt=n(26),Ht=n.n(Dt);function Tt(t){var e=function(t){var e=t.name;try{var n=/^(\d+)\s+(.*)$/.exec(e);if(!n)throw new Error('Unable to parse "number name" from '.concat(e));return{name:n[2],number:Number(n[1])}}catch(r){return{nameNumberError:r}}}(t),n=e.nameNumberError,r=e.name,o=e.number,a=function(t){var e=t.coordinates;try{var n=/^\s*(-?\d+\.\d+)\s*,\s*(-?\d+\.\d+)\s*$/.exec(e);if(!n)throw new Error('Unable to parse "lat, lng" from '.concat(e));return{lat:Number(n[1]),lng:Number(n[2])}}catch(r){return{latLngError:r}}}(t),i=a.lat,c=a.latLngError,s=a.lng,l=Object(w.a)(Object(w.a)({},t),{},{bikes:t.avl_bikes,free:t.free_slots,lat:i,lng:s,name:r,number:o,operative:t.operative,total:t.total_slots,errors:[]});return n&&l.errors.push(n),c&&l.errors.push(c),function(t){return Object(w.a)({data:t,valid:[Number.isInteger(t.bikes),Number.isInteger(t.free),Number.isInteger(t.total),null!=t.number&&Number.isInteger(t.number)&&t.number>0,null!=t.lat&&Number.isFinite(t.lat)&&0!==t.lat,null!=t.lng&&Number.isFinite(t.lng)&&0!==t.lng,null!=t.name&&/^\w/.test(t.name),0===t.errors.length].every((function(t){return t}))},t)}(l)}function zt(t){return t.result.map(Tt)}!function(t){t[t.Smoove=0]="Smoove"}(Mt||(Mt={}));var Vt=new Map([["test",{location:{lat:49.279627,lng:-123.121116},name:"Test Data",type:"Smoove",uri:"/test_data"}],["vancouver",{location:{lat:49.279627,lng:-123.121116},name:"Mobi Bike Vancouver",type:"Smoove",uri:"https://vancouver-ca.smoove.pro/api-public/stations",cors:!0}]]);function Ft(t){return"https://cors.bridged.cc/".concat(t)}var qt=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(Rt.a)(this,t),this.config=void 0,this.verboseOutput=void 0,this.transform=void 0,this.config=e,this.transform=n,this.verboseOutput=r}return Object(Lt.a)(t,[{key:"getJSON",value:function(){var t=Object(Nt.a)(Pt.a.mark((function t(){var e,n,r;return Pt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.config.cors?Ft(this.config.uri):this.config.uri,this.debug("Fetching stations from '".concat(e,"' ...")),t.next=4,Ht()(e,{headers:this.config.options?this.config.options.headers:void 0});case 4:return n=t.sent,r=n.json(),this.debug("Fetch Response",r),t.abrupt("return",r);case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getStations",value:function(){var t=Object(Nt.a)(Pt.a.mark((function t(){var e,n;return Pt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getJSON();case 3:return e=t.sent,n=this.transform(e),this.debug("Fetched ".concat(n.length," stations")),t.abrupt("return",{config:this.config,fetchedAt:kt()(),stations:n});case 9:return t.prev=9,t.t0=t.catch(0),this.debug("Fetch failed: ".concat(t.t0.message||"Unknown Error"),t.t0),t.abrupt("return",{config:this.config,error:t.t0,fetchedAt:kt()(),stations:[]});case 13:case"end":return t.stop()}}),t,this,[[0,9]])})));return function(){return t.apply(this,arguments)}}()},{key:"debug",value:function(t){if(this.verboseOutput){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];console.log(t,n)}}}],[{key:"create",value:function(e,n){var r=n.debug,o="string"===typeof e?function(t){var e=Vt.get(t);if(!e)throw new Error("No station data for source '".concat(t,"'"));return e}(e):e;return new t(o,function(t){var e=t.type;switch(e){case"Smoove":return zt;default:throw new Error("Invalid Configuration '".concat(e,"'"))}}(o),r)}},{key:"nearest",value:function(e,n){return t.create(function(t){var e=A(!1);return Array.from(Vt.values()).map((function(n){return{config:n,distance:e.maps.geometry.spherical.computeDistanceBetween(new e.maps.LatLng(t),new e.maps.LatLng(n.location.lat,n.location.lng))}})).sort((function(t,e){return t.distance-e.distance}))[0].config}(e),n)}}]),t}();function Ut(t){var e=function(t){return t?{debug:Boolean(t.get("debug")),sourceName:t.get("source")||t.get("test")&&"test"||"vancouver"}:{}}(t.params),n=e.debug,o=e.sourceName,a=Object(r.useState)(),i=Object(h.a)(a,2),c=i[0],s=i[1],l=Object(r.useMemo)((function(){return o?qt.create(o,{debug:n}):null}),[n,o]),u=Object(r.useCallback)((function(){if(l)return l.getStations().then(s)}),[l]);return Object(r.useEffect)((function(){l&&u()}),[l,u]),Object(r.useDebugValue)(c?"".concat(c.stations.length," stations loaded (").concat(c.fetchedAt.fromNow(),")"):"Loading..."),{stationSourceResult:c,updateStations:u}}var Yt=n(17),Wt=n.n(Yt);function Qt(){var t=function(){var t=Object(r.useState)(),e=Object(h.a)(t,2),n=e[0],o=e[1];return Object(r.useEffect)((function(){if("undefined"!==typeof window&&!n){var t=new Map;new URLSearchParams(window.location.search).forEach((function(e,n){t.set(n.toLowerCase(),e)})),o(t)}}),[n]),Object(r.useDebugValue)("undefined"===typeof window?"Loading...":window.location.search),{params:n}}().params,e=function(t){var e=t.options,n=Object(r.useState)(),o=Object(h.a)(n,2),a=o[0],i=o[1],c=Object(r.useState)(),s=Object(h.a)(c,2),l=s[0],u=s[1],f=Object(r.useState)(),p=Object(h.a)(f,2),b=p[0],d=p[1],m=Object(r.useCallback)((function(){"undefined"!==typeof navigator&&navigator.geolocation.getCurrentPosition(u,d,e||It)}),[e]);return Object(r.useEffect)((function(){if(!a&&"undefined"!==typeof navigator){var t=navigator.geolocation.watchPosition(u,d,e||It);return i(t),function(){a&&(navigator.geolocation.clearWatch(a),i(void 0))}}}),[e,a]),Object(r.useDebugValue)(l?"[".concat(l.coords.latitude,", ").concat(l.coords.longitude,"] @ ").concat(kt()(l.timestamp).fromNow()):"Loading..."),{error:b,position:l,updatePosition:m}}({params:t}).position,n=Ut({params:t}),o=n.stationSourceResult,a=n.updateStations;return Object(f.jsxs)("div",{className:Wt.a.Container,children:[Object(f.jsx)(v,{}),Object(f.jsx)("div",{className:Wt.a.Content,children:function(){if(!o)return Object(f.jsx)(b,{});return Object(f.jsx)(i.d,{children:Object(f.jsx)(xt,{fetchedAt:o.fetchedAt,location:o.config.location,stations:o.stations,position:e,updateStations:a})})}()})]})}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(59);a.a.render(Object(f.jsx)(Qt,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[60,1,2]]]);
//# sourceMappingURL=main.bf5ab9c9.chunk.js.map