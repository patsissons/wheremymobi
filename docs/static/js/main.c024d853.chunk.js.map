{"version":3,"sources":["App/components/Header/Header.module.scss","components/Loader/Loader.module.scss","App/App.module.scss","config/env.ts","App/components/StationMap/components/StationMarker/images/marker-low.png","App/components/StationMap/components/StationMarker/images/marker-mid.png","App/components/StationMap/components/StationMarker/images/marker-high.png","App/components/StationMap/components/StationMarker/images/marker-none.png","App/components/StationMap/components/CustomButton/CustomButton.module.scss","App/components/StationMap/StationMap.module.scss","components/Loader/Loader.tsx","App/components/Header/Header.tsx","utilities/env.ts","utilities/google.ts","App/components/StationMap/components/CustomButton/CustomButton.tsx","App/components/StationMap/components/CustomControl/CustomControl.ts","App/components/StationMap/components/GpsMarker/GpsMarker.tsx","App/components/StationMap/components/StationInfo/StationInfo.tsx","App/components/StationMap/components/StationMarker/StationMarker.tsx","App/components/StationMap/hooks/useMarkerClusterer.tsx","App/components/StationMap/images/bike.svg","App/components/StationMap/images/circle-minus.svg","App/components/StationMap/images/circle-plus.svg","App/components/StationMap/images/gps.svg","App/components/StationMap/images/refresh.svg","App/components/StationMap/images/slot.svg","App/components/StationMap/StationMap.tsx","App/hooks/usePosition.ts","data/config.ts","models/Station.ts","data/transform/Smoove.ts","data/StationSource.ts","App/hooks/useStations.ts","serviceWorker.ts","index.tsx","App/App.tsx","App/hooks/useQueryParams.ts"],"names":["module","exports","dotenv","config","process","env","loaders","Loader","name","Math","floor","random","length","className","styles","LoadingContainer","Header","HeaderLogo","href","alt","src","HeaderContent","metadata","description","GOOGLE_MAPS_API_KEY","mockGoogle","maps","googleMapsAsync","allowMock","window","google","Error","useGoogleNamespace","CustomButton","props","classNames","type","CustomControl","bindingPosition","children","onMounted","onContainerMounted","state","useContext","GoogleMapContext","useState","mounted","setMounted","document","createElement","container","useLayoutEffect","map","controls","ControlPosition","push","ReactDOM","createPortal","style","margin","GpsMarker","color","coords","timestamp","radius","accuracy","heading","position","lat","latitude","lng","longitude","opts","center","fillColor","strokeColor","fillOpacity","strokeWeight","icon","anchor","Point","path","SymbolPath","FORWARD_CLOSED_ARROW","rotation","scale","zIndex","Marker","MAX_ZINDEX","StationInfo","fetchedAt","station","number","toString","padStart","operative","bikes","free","total","rel","target","fromNow","StationMarker","onClick","preferBikes","showLabel","setOpts","useEffect","url","markerForCount","size","Size","labelOrigin","label","text","fontSize","fontWeight","undefined","createMarkerOpts","key","id","count","MarkerNoneImage","fraction","MarkerHighImage","MarkerMidImage","MarkerLowImage","defaultOpts","averageCenter","gridSize","maxZoom","enableRetinaIcons","useMarkerClusterer","dispatch","clusterer","setClusterer","context","setContext","Provider","useCallback","value","MarkerClustererPlus","action","object","objects","addMarker","marker","get","removeMarker","_extends","Object","assign","i","arguments","source","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","d","_ref","svgRef","title","viewBox","ref","ForwardRef","forwardRef","fill","_ref3","defaultZoom","StationMap","location","stations","updateStations","followGps","setFollowGps","centered","setCentered","validStations","setValidStations","selectedStation","setSelectedStation","setPreferBikes","showLabels","setShowLabels","MarkerClusterer","centerGps","isValidPosition","latLngFromPosition","zoom","max","min","log2","gpsZoom","setCenter","setZoom","updatedStations","forEach","valid","console","debug","prev","next","prevSorted","sort","aId","nextSorted","every","JSON","stringify","data","stationComparer","stationCollectionComparer","MapContainer","apiKey","onDragStart","LoadingComponent","ButtonImage","disabled","focusable","aria-hidden","preferNearestBike","distance","geometry","spherical","computeDistanceBetween","LatLng","filter","errors","left","right","nearestStation","getCenter","panTo","shift","anchorId","onCloseClick","visible","Boolean","defaultOptions","enableHighAccuracy","StationSourceType","createStation","Number","isInteger","isFinite","test","x","create","smooveData","match","exec","error","nameNumberError","parseNameAndNumber","coordinates","latLngError","parseLatLng","avl_bikes","free_slots","total_slots","Smoove","result","configMap","Map","uri","cors","StationSource","transform","verboseOutput","configOrKey","getConfig","mapTransform","options","Array","from","values","getConfigByLocation","fetch","headers","response","json","getJSON","moment","message","args","log","defaultSourceName","useStations","params","sourceName","getSourceName","stationSourceResult","setStationSourceResult","useMemo","getStations","then","useDebugValue","hostname","render","setParams","URLSearchParams","search","set","toLowerCase","useQueryParams","watchId","setWatchId","setPosition","setError","updatePosition","navigator","geolocation","getCurrentPosition","watchPosition","clearWatch","usePosition","Container","Content","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.c024d853.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Header\":\"Header_Header__1XO4R\",\"HeaderLogo\":\"Header_HeaderLogo__1dLj0\",\"HeaderContent\":\"Header_HeaderContent__3wHIB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LoadingContainer\":\"Loader_LoadingContainer__1zHC6\",\"Loader\":\"Loader_Loader__3w7V8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Container\":\"App_Container__Sk-T4\",\"Content\":\"App_Content__2YSLD\"};","import dotenv from 'dotenv';\n\ndotenv.config();\nconst {env = {}} = typeof process === 'undefined' ? {} : process;\n\nexport {env};\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAAAb1BMVEUAAAD//////////////////v724uL+/f3////99/f//////////////////////////v7//v7////////////67e3////NXFz////gmprnr6/swsLQZmbvzMz56+vy19fahYXXe3vjpKTTcXHy1tYWZQtuAAAAF3RSTlMAEKBg0PL+0yD8j0DPUMBw4uGwgDD9bxWtl28AAAFSSURBVEjHpdTrjoMgEIZhUKBqteddPhTUHu7/Gne72aQUikPT9/+TiRMcFsfLpsVfbVNyRlcVEphc/5ubAFlUBOAN4IzV/1njgGZxUifhrvqpq8O+S4tvqFlHzQplShRQVr/IKhQpMehEA46vROmL2HSxWEPpdFbJKtquHK1e6Fy3ITli1otdwrVVctJE4z7c1pUiJhgjnSYb2+d1GZr08JfWwNLkjK1HNkpnNG48ApdDJumTPof0eAieS7i3sEseWX8yJf9bPDLkkMEnYspasvDIoc4hdeGREjMt5qenXKF/91kyMdLkSwTnxbz7i7EdOWbcRVfM0EOCVvV5+SgJFnaSyi6evhOL6nBLkxvW7EXbpTO+JU5/LArGCEOIwNAiNpSITXgG+rugjPGFuQuqDYwvDoyOC5iHEJxlmljQJhC0WcHcxSoQlAkFbepI0CYpfgA+aX5ABt3FBwAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAAAbFBMVEUAAAD////////////////+9e3////97+L/+/j//v3///7////////////////////97+P//////v7//v7////////////////0pGD////5x5z60rH73cT1qmr86Nj74873u4j2tX75zKb2sHQRU6flAAAAGHRSTlMA0RCgYP0g/vzz8Z+PQHBQ/sDi4bCAXzBKHBbEAAABTElEQVRIx6XU626DMAyG4QTGmULPzRcIoe393+OmaZJDIdjS3v+PDFYStS65txq/6faeKL68qYHJDz/5CaibnAFJC3jrzF/OeqDdndTX8G+z6O1x6eOiw3E2q+YjvmKiQeHMRq5AExOjiTTitiW+SGyZfi0OKEw8d6zy1XbrzJmdnqX+JDfMZrfX59ryajJM2WVJUrw5Yj/GVN6wZXq5LsuTAeHSWjiePNEF5FQYQdkpIPASMtUhGSRkAIlESpJgYS8ZOfxnivxfKIwSMoZETxIy6YBcSwkp08UlnnkxL45yjkF4LCmdiQ8/fZkVXjHqnLFDzgtAY/ghlC6fskeJelSFiwtXVA+1qscUJxMOaqNu7xnv1GYpxphIlWIMIxhDgjW8IPNaioFE3NhQWBLxTrChuCq+RMOS0IkSGxJSQ0JuSMgNCakpSYhNVHwD4ZOC/xT12P4AAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAAAclBMVEUAAAD////////////////9/v3p9+/////9/v3+//7////1+/jd8ub////////////////2+/j9/v79/v7///////////////88s3H///+G0Ke24sqe2bhIuHrP7NzD59Pb8eVtxpVhwYyS1bBVvYOq3sHWwgC0AAAAGHRSTlMAEKDQYNP9IPPxQPz8j3BQwPzi4bCAMJDZnGXvAAABVUlEQVRIx6XV2W6DMBCFYYwJSwhp9voYbANJ3/8Vu6jSmMV4qv73n0aMsJ0sE1kj8ZNsMpHEK9IKsK77ylmgSosIEA3gtFG/Ge2AZnPSWwX3UpNeDte3sDjiMKhFwwFZSKTojVrJ9EhDolWBWtzXREZizax8zx69CmcOZbHYbpUbtdF4lnNyx6A2e87XVpRWRcqv8229YkTPxpRORcvldF06Tjr4S3uHiZMRR4+cesUoP3kEjkNs5ZOOQzqQEFwivIU9eWT/nyn8b6HQckjrE2lZS5YeudUcck4nh3iIiwGZRwrO939gcpZlzvz5qQyaecSoSx4dclncYpo5hNrV45YYa5nMe5S92bz6HisPBWyYWOxXn4qta/z4x6u/pccibkjwDYm4iQsyz6noSISN9oUmEe4E7YtbEk9IaBJSJGxDgmtIMM0O+lvsSLAMCa6pSbBNUHwCmd6DeH76KRIAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,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\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"CustomButton\":\"CustomButton_CustomButton__2nL-I\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"MapContainer\":\"StationMap_MapContainer__2mxHY\",\"ButtonImage\":\"StationMap_ButtonImage__1ypMu\"};","import React from 'react';\nimport Spinner, {SpinnerProps} from 'react-spinkit';\n\nimport styles from './Loader.module.scss';\n\ntype SpinnerName = 'double-bounce' | 'chasing-dots' | 'circle' | 'cube-grid';\nexport const loaders: Required<SpinnerProps['name']>[] = [\n  'double-bounce',\n  'chasing-dots',\n  'circle',\n  'cube-grid',\n];\n\nexport function randomLoaderName() {\n  return loaders[Math.floor(Math.random() * loaders.length)] as SpinnerName;\n}\n\nexport interface Props {\n  name?: SpinnerName;\n}\n\nexport function Loader({name = randomLoaderName()}: Props) {\n  if (name) {\n    return (\n      <div className={styles.LoadingContainer}>\n        <Spinner className={styles.Loader} name={name} />\n      </div>\n    );\n  }\n\n  return null;\n}\n","import React from 'react';\nimport {metadata} from 'config';\n\nimport styles from './Header.module.scss';\n\nexport function Header() {\n  return (\n    <div className={styles.Header}>\n      <div className={styles.HeaderLogo}>\n        <a href=\"https://www.mobibikes.ca/en#the-map\">\n          <img\n            alt=\"logo\"\n            src=\"https://www.mobibikes.ca/sites/all/themes/smoove_bootstrap/logo.png\"\n          />\n        </a>\n      </div>\n      <div className={styles.HeaderContent}>\n        <h1>{metadata.description}</h1>\n      </div>\n    </div>\n  );\n}\n","export const {\n  // GOOGLE_MAPS_API_KEY = 'AIzaSyBXrYScIU6sWYUWLLlovYhzq-bLzwTgAoc',\n  GOOGLE_MAPS_API_KEY = 'AIzaSyBqnHB52AARBl2t1vG3kkY0q6obTTMyHVQ',\n  // eslint-disable-next-line no-process-env\n} = process.env;\n","/* global google */\n\ndeclare global {\n  interface Window {\n    google: typeof google;\n  }\n}\n\nconst mockGoogle: any = {\n  maps: {},\n};\n\nexport type google = typeof google;\n\nexport function googleMapsAsync(allowMock = true): typeof google {\n  if (window.google) {\n    return window.google;\n  }\n\n  if (allowMock) {\n    return mockGoogle;\n  }\n\n  throw new Error('google.maps API has not yet loaded');\n}\n\nexport function useGoogleNamespace(): [typeof google, () => typeof google] {\n  return [googleMapsAsync(), googleMapsAsync];\n}\n","import React, {ButtonHTMLAttributes} from 'react';\nimport classNames from 'classnames';\n\nimport styles from './CustomButton.module.scss';\n\nexport function CustomButton({\n  className,\n  ...props\n}: ButtonHTMLAttributes<HTMLButtonElement>) {\n  return (\n    <button\n      className={classNames(styles.CustomButton, className)}\n      type=\"button\"\n      {...props}\n    />\n  );\n}\n","import {ReactNode, useContext, useLayoutEffect, useState} from 'react';\nimport ReactDOM from 'react-dom';\nimport {GoogleMapContext} from '@googlemap-react/core';\nimport {google, useGoogleNamespace} from 'utilities/google';\n\ninterface Props {\n  bindingPosition: keyof typeof google.maps.ControlPosition;\n  children?: ReactNode;\n  onMounted?(container: HTMLDivElement): void;\n}\n\nexport function CustomControl({\n  bindingPosition = 'RIGHT_TOP',\n  children,\n  onMounted = onContainerMounted,\n}: Props) {\n  const {state} = useContext(GoogleMapContext);\n  const [mounted, setMounted] = useState(false);\n  const [container] = useState(document.createElement('div'));\n  const [google] = useGoogleNamespace();\n  useLayoutEffect(() => {\n    if (state && state.map && !mounted) {\n      state.map.controls[google.maps.ControlPosition[bindingPosition]].push(\n        container,\n      );\n\n      onMounted(container);\n\n      setMounted(true);\n    }\n  }, [\n    bindingPosition,\n    container,\n    google.maps.ControlPosition,\n    mounted,\n    onMounted,\n    state,\n    state.map,\n  ]);\n\n  return typeof document === 'undefined'\n    ? null\n    : ReactDOM.createPortal(children, container);\n}\n\nexport function onContainerMounted(container: HTMLDivElement) {\n  container.style.margin = '10px 10px 23px';\n}\n","import React from 'react';\nimport {Circle, Marker} from '@googlemap-react/core';\nimport {useGoogleNamespace} from 'utilities/google';\n\ninterface Props {\n  color?: string;\n  coords: Coordinates;\n  timestamp: number;\n}\n\nexport function GpsMarker({color = 'magenta', coords, timestamp}: Props) {\n  const [google] = useGoogleNamespace();\n  const {accuracy: radius, heading, latitude, longitude} = coords;\n\n  const position: google.maps.LatLngLiteral = {\n    lat: latitude,\n    lng: longitude,\n  };\n\n  return (\n    <>\n      <Circle\n        opts={{\n          center: position,\n          radius,\n          fillColor: color,\n          strokeColor: color,\n          fillOpacity: 0.25,\n          strokeWeight: 1,\n        }}\n      />\n      <Marker\n        opts={{\n          icon: {\n            anchor: new google.maps.Point(0, 2.6),\n            path: google.maps.SymbolPath.FORWARD_CLOSED_ARROW,\n            strokeColor: color,\n            fillColor: color,\n            fillOpacity: 1,\n            rotation: heading || 0,\n            scale: 10,\n            strokeWeight: 1,\n          },\n          position,\n          zIndex: google.maps.Marker.MAX_ZINDEX,\n        }}\n      />\n    </>\n  );\n}\n","import React from 'react';\nimport moment from 'moment';\nimport {ValidStation} from 'models';\n\ninterface Props {\n  fetchedAt: moment.Moment;\n  station: ValidStation;\n}\n\nexport function StationInfo({fetchedAt, station}: Props) {\n  return (\n    <ul>\n      <li>{`[${station.number.toString().padStart(4, '0')}] ${station.name}${\n        station.operative ? '' : ' (CLOSED)'\n      }`}</li>\n      <li>{`${station.bikes} bikes / ${station.free} slots (${station.total} total)`}</li>\n      <li>\n        <a\n          rel=\"noopener noreferrer\"\n          target=\"_blank\"\n          href={`https://www.google.com/maps/dir/?api=${1}&travelmode=bicycling&destination=${\n            station.lat\n          },${station.lng}`}\n        >{`${station.lat}, ${station.lng}`}</a>\n      </li>\n      <li>{`Last Updated: ${fetchedAt.fromNow()}`}</li>\n    </ul>\n  );\n}\n","import React, {useEffect, useState} from 'react';\nimport {Marker} from '@googlemap-react/core';\nimport {googleMapsAsync} from 'utilities/google';\nimport {\n  MarkerLowImage,\n  MarkerMidImage,\n  MarkerHighImage,\n  MarkerNoneImage,\n} from './images';\n\ninterface Props {\n  bikes: number;\n  free: number;\n  number: number;\n  onClick(): void;\n  lat: number;\n  lng: number;\n  preferBikes: boolean;\n  showLabel: boolean;\n  total: number;\n}\n\nexport function StationMarker({\n  bikes,\n  free,\n  number,\n  onClick,\n  lat,\n  lng,\n  preferBikes,\n  showLabel,\n  total,\n}: Props) {\n  const [opts, setOpts] = useState<google.maps.MarkerOptions>();\n  useEffect(() => {\n    setOpts(\n      createMarkerOpts(bikes, free, lat, lng, preferBikes, showLabel, total),\n    );\n  }, [bikes, free, lat, lng, preferBikes, showLabel, total]);\n\n  return (\n    <Marker\n      key={number}\n      id={`station-${number}`}\n      onClick={onClick}\n      opts={opts}\n    />\n  );\n}\n\nfunction createMarkerOpts(\n  bikes: number,\n  free: number,\n  lat: number,\n  lng: number,\n  preferBikes: boolean,\n  showLabel: boolean,\n  total: number,\n): google.maps.MarkerOptions {\n  const google = googleMapsAsync();\n\n  return {\n    icon: {\n      url: markerForCount(preferBikes ? bikes : free, total),\n      size: new google.maps.Size(50, 50),\n      labelOrigin: new google.maps.Point(25, 21),\n    },\n    label: showLabel\n      ? {\n          color: 'white',\n          text: `${bikes} | ${free}`,\n          fontSize: '0.75rem',\n          fontWeight: 'bold',\n        }\n      : undefined,\n    position: {lat, lng},\n  };\n}\n\nfunction markerForCount(count: number, total: number) {\n  if (count <= 0) {\n    return MarkerNoneImage;\n  }\n\n  const fraction = count / total;\n\n  if (fraction >= 0.5) {\n    return MarkerHighImage;\n  }\n\n  return fraction >= 0.25 ? MarkerMidImage : MarkerLowImage;\n}\n","import React, {useCallback, useContext, useState, useEffect} from 'react';\nimport MarkerClustererPlus, {Options} from '@google/markerclustererplus';\nimport {GoogleMapContext} from '@googlemap-react/core';\nimport {Props} from '@shopify/useful-types';\nimport {useGoogleNamespace} from 'utilities/google';\n\ntype Context = Props<typeof GoogleMapContext.Provider>['value'];\ntype Action = Context['dispatch'] extends (action: infer T) => void ? T : never;\n\nconst defaultOpts: Options = {\n  averageCenter: true,\n  gridSize: 90,\n  maxZoom: 17,\n  enableRetinaIcons: false,\n};\n\nexport function useMarkerClusterer(opts: Options = {}) {\n  const {dispatch, state} = useContext(GoogleMapContext);\n  const [clusterer, setClusterer] = useState<MarkerClustererPlus>();\n  const [context, setContext] = useState<Context>();\n  const Provider = useCallback(\n    (props: {children?: any}) =>\n      context ? <GoogleMapContext.Provider value={context} {...props} /> : null,\n    [context],\n  );\n  const [google] = useGoogleNamespace();\n  useEffect(() => {\n    if (!clusterer && state && state.map) {\n      setClusterer(\n        new MarkerClustererPlus(state.map, [], {\n          ...defaultOpts,\n          ...opts,\n        }),\n      );\n    }\n    if (!context && clusterer && state) {\n      setContext({\n        dispatch(action: Action) {\n          const {type, id, object} = action;\n\n          if (clusterer && state && state.objects) {\n            switch (type) {\n              case 'add_object':\n                if (object && object instanceof google.maps.Marker) {\n                  clusterer.addMarker(object);\n                }\n                break;\n              case 'remove_object':\n                if (id) {\n                  const marker = state.objects.get(id);\n\n                  if (marker && marker instanceof google.maps.Marker) {\n                    clusterer.removeMarker(marker);\n                  }\n                }\n                break;\n            }\n          }\n\n          dispatch(action);\n        },\n        state,\n      });\n    }\n  }, [clusterer, context, dispatch, google.maps.Marker, opts, state]);\n\n  return Provider;\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M408,132.6c25.5,0,45.9-20.4,45.9-45.9S433.5,40.8,408,40.8s-45.9,20.4-45.9,45.9S382.5,132.6,408,132.6z M484.5,316.2 c-71.4,0-127.5,56.1-127.5,127.5s56.1,127.5,127.5,127.5S612,515.101,612,443.7S555.9,316.2,484.5,316.2z M484.5,532.95 c-48.45,0-89.25-40.801-89.25-89.25c0-48.451,40.8-89.25,89.25-89.25s89.25,40.799,89.25,89.25 C573.75,492.149,532.95,532.95,484.5,532.95z M377.4,265.2h107.1v-45.9h-81.6l-48.45-84.15c-7.65-12.75-20.4-20.4-38.25-20.4 c-12.75,0-22.95,5.1-30.6,12.75l-94.35,94.35c-7.65,7.65-12.75,17.85-12.75,30.6c0,15.3,7.65,30.6,20.4,38.25l86.7,51v127.5h45.9 V303.45l-56.1-43.35l58.65-58.65L377.4,265.2z M127.5,316.2C56.1,316.2,0,372.3,0,443.7s56.1,127.5,127.5,127.5 S255,515.101,255,443.7S198.9,316.2,127.5,316.2z M127.5,532.95c-48.45,0-89.25-40.801-89.25-89.25 c0-48.451,40.8-89.25,89.25-89.25s89.25,40.799,89.25,89.25C216.75,492.149,175.95,532.95,127.5,532.95z\"\n});\n\nvar SvgBike = function SvgBike(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 612 612\",\n    ref: svgRef\n  }, props), React.createElement(\"title\", null, title), _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgBike, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/bike.44bc6267.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#637381\",\n  d: \"M10 0C4.486 0 0 4.486 0 10s4.486 10 10 10 10-4.486 10-10S15.514 0 10 0m0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8m4-9H6a1 1 0 1 0 0 2h8a1 1 0 1 0 0-2\"\n});\n\nvar SvgCircleMinus = function SvgCircleMinus(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 20 20\",\n    ref: svgRef\n  }, props), React.createElement(\"title\", null, title), _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgCircleMinus, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/circle-minus.e8cc111e.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M10 0C4.486 0 0 4.486 0 10s4.486 10 10 10 10-4.486 10-10S15.514 0 10 0zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8z\",\n  fill: \"#637381\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M8.996 8.996V7.008c.001-.043 0-.054.004-.097.044-.449.423-.845.879-.9.094-.011.115-.007.145-.007.043.002.054.002.097.007.448.054.834.442.879.9.004.043.003.054.004.097v1.988h1.992c.016 0 .032 0 .048.001.49.035.918.441.954.93.039.545-.424 1.063-1.002 1.077h-1.992V13c-.01.411-.272.797-.648.939-.584.221-1.327-.217-1.359-.891-.001-.016-.001-.032-.001-.048v-1.996H7.004c-.511-.012-.966-.435-1.002-.931-.038-.53.396-1.049.954-1.076.016-.001.032-.001.048-.001h1.992z\",\n  fill: \"#637381\"\n});\n\nvar SvgCirclePlus = function SvgCirclePlus(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 20 20\",\n    ref: svgRef\n  }, props), React.createElement(\"title\", null, title), _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgCirclePlus, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/circle-plus.2ab94f29.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M280.5,178.5c-56.1,0-102,45.9-102,102c0,56.1,45.9,102,102,102c56.1,0,102-45.9,102-102     C382.5,224.4,336.6,178.5,280.5,178.5z M507.45,255C494.7,147.9,410.55,63.75,306,53.55V0h-51v53.55     C147.9,63.75,63.75,147.9,53.55,255H0v51h53.55C66.3,413.1,150.45,497.25,255,507.45V561h51v-53.55     C413.1,494.7,497.25,410.55,507.45,306H561v-51H507.45z M280.5,459C181.05,459,102,379.95,102,280.5S181.05,102,280.5,102     S459,181.05,459,280.5S379.95,459,280.5,459z\"\n});\n\nvar SvgGps = function SvgGps(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 561 561\",\n    ref: svgRef\n  }, props), React.createElement(\"title\", null, title), _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgGps, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/gps.9f3589a2.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M55.89,262.818c-3-26-0.5-51.1,6.3-74.3c22.6-77.1,93.5-133.8,177.6-134.8v-50.4c0-2.8,3.5-4.3,5.8-2.6l103.7,76.2         c1.7,1.3,1.7,3.9,0,5.1l-103.6,76.2c-2.4,1.7-5.8,0.2-5.8-2.6v-50.3c-55.3,0.9-102.5,35-122.8,83.2c-7.7,18.2-11.6,38.3-10.5,59.4         c1.5,29,12.4,55.7,29.6,77.3c9.2,11.5,7,28.3-4.9,37c-11.3,8.3-27.1,6-35.8-5C74.19,330.618,59.99,298.218,55.89,262.818z         M355.29,166.018c17.3,21.5,28.2,48.3,29.6,77.3c1.1,21.2-2.9,41.3-10.5,59.4c-20.3,48.2-67.5,82.4-122.8,83.2v-50.3         c0-2.8-3.5-4.3-5.8-2.6l-103.7,76.2c-1.7,1.3-1.7,3.9,0,5.1l103.6,76.2c2.4,1.7,5.8,0.2,5.8-2.6v-50.4         c84.1-0.9,155.1-57.6,177.6-134.8c6.8-23.2,9.2-48.3,6.3-74.3c-4-35.4-18.2-67.8-39.5-94.4c-8.8-11-24.5-13.3-35.8-5         C348.29,137.718,346.09,154.518,355.29,166.018z\"\n});\n\nvar SvgRefresh = function SvgRefresh(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 491.236 491.236\",\n    ref: svgRef\n  }, props), React.createElement(\"title\", null, title), _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgRefresh, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/refresh.137b889f.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"path\", {\n  d: \"M408,0H51C22.95,0,0,22.95,0,51v357c0,28.05,22.95,51,51,51h357c28.05,0,51-22.95,51-51V51C459,22.95,436.05,0,408,0z  M173.4,265.2V357h-45.9V102h109.65c38.25,0,56.1,7.65,71.399,22.95c17.851,15.3,22.95,35.7,22.95,58.65 c0,25.5-7.65,45.9-22.95,58.65s-33.149,20.4-71.399,20.4H173.4V265.2z\"\n}), React.createElement(\"path\", {\n  d: \"M173.4,229.5v-91.8h58.65c17.851,0,30.601,5.1,38.25,15.3c7.65,10.2,12.75,17.85,12.75,30.6c0,15.3-5.1,22.95-12.75,33.15 c-7.649,7.65-17.85,12.75-35.7,12.75H173.4z\"\n}));\n\nvar SvgSlot = function SvgSlot(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 459 459\",\n    ref: svgRef\n  }, props), React.createElement(\"title\", null, title), _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgSlot, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/slot.ae84d45d.svg\";\nexport { ForwardRef as ReactComponent };","import React, {useContext, useEffect, useState, useCallback} from 'react';\nimport {\n  BicyclingLayer,\n  GoogleMapContext,\n  InfoWindow,\n  MapBox,\n} from '@googlemap-react/core';\nimport moment from 'moment';\nimport {Loader} from 'components';\nimport {Station, ValidStation} from 'models';\nimport {GOOGLE_MAPS_API_KEY} from 'utilities/env';\nimport {googleMapsAsync} from 'utilities/google';\nimport {\n  CustomButton,\n  CustomControl,\n  GpsMarker,\n  StationInfo,\n  StationMarker,\n} from './components';\nimport {useMarkerClusterer} from './hooks';\nimport {\n  BikeImage,\n  CircleMinus,\n  CirclePlus,\n  GpsImage,\n  RefreshImage,\n  SlotImage,\n} from './images';\n\nimport styles from './StationMap.module.scss';\n\nconst defaultZoom = 13;\nconst maxZoom = 17;\n\nexport interface Props {\n  fetchedAt: moment.Moment;\n  location: google.maps.LatLngLiteral;\n  stations: Station[];\n  position: Position | undefined;\n  updateStations(): void;\n}\n\nexport function StationMap({\n  fetchedAt,\n  location,\n  stations,\n  updateStations,\n  position,\n}: Props) {\n  const {state: {map = undefined} = {}} = useContext(GoogleMapContext);\n  const [followGps, setFollowGps] = useState(true);\n  const [centered, setCentered] = useState(false);\n  const [validStations, setValidStations] = useState<ValidStation[]>([]);\n  const [selectedStation, setSelectedStation] = useState<ValidStation>();\n  const [preferBikes, setPreferBikes] = useState(true);\n  const [showLabels, setShowLabels] = useState(false);\n  const MarkerClusterer = useMarkerClusterer();\n  const centerGps = useCallback(() => {\n    if (map) {\n      const center = isValidPosition(position) && latLngFromPosition(position);\n      const zoom = gpsZoom(position);\n\n      if (center) {\n        map.setCenter(center);\n      }\n\n      if (zoom) {\n        map.setZoom(zoom);\n      }\n\n      if (!centered) {\n        setCentered(true);\n      }\n    }\n  }, [centered, map, position]);\n  useEffect(() => {\n    const updatedStations: ValidStation[] = [];\n\n    stations.forEach((station) => {\n      if (!station.valid) {\n        // this should never happen\n        // eslint-disable-next-line no-console\n        console.debug(`Bad Station Found`, station);\n        return;\n      }\n\n      updatedStations.push(station as ValidStation);\n    });\n\n    if (!stationCollectionComparer(validStations, updatedStations)) {\n      setValidStations(updatedStations);\n    }\n  }, [stations, validStations]);\n  useEffect(() => {\n    if (followGps) {\n      centerGps();\n    }\n  }, [followGps, centerGps]);\n\n  function selectedNearestStation() {\n    if (map) {\n      const station = nearestStation(\n        (followGps &&\n          isValidPosition(position) &&\n          latLngFromPosition(position)) ||\n          map.getCenter(),\n        validStations,\n        preferBikes,\n      );\n\n      if (station === selectedStation) {\n        map.panTo(station);\n        map.setZoom(maxZoom);\n      } else {\n        if (followGps) {\n          setFollowGps(false);\n        }\n        setSelectedStation(station);\n      }\n    }\n  }\n\n  function handleDragStart() {\n    if (followGps) {\n      setFollowGps(false);\n    }\n\n    if (centered) {\n      setCentered(false);\n    }\n  }\n\n  function handleGpsCenter() {\n    if (followGps) {\n      if (centered) {\n        if (followGps) {\n          setFollowGps(false);\n        }\n\n        if (centered) {\n          setCentered(false);\n        }\n      } else {\n        centerGps();\n      }\n    } else if (!followGps) {\n      setFollowGps(true);\n    }\n  }\n\n  return (\n    <div className={styles.MapContainer}>\n      <MapBox\n        apiKey={GOOGLE_MAPS_API_KEY}\n        opts={{\n          center: location,\n          zoom: defaultZoom,\n          maxZoom,\n        }}\n        onClick={() => setSelectedStation(undefined)}\n        onDragStart={handleDragStart}\n        LoadingComponent={<Loader />}\n      />\n      <BicyclingLayer />\n      <CustomControl bindingPosition=\"BOTTOM_CENTER\">\n        <CustomButton onClick={updateStations}>\n          <RefreshImage className={styles.ButtonImage} />\n        </CustomButton>\n      </CustomControl>\n      <CustomControl bindingPosition=\"BOTTOM_CENTER\">\n        <CustomButton\n          disabled={!isValidPosition(position)}\n          onClick={handleGpsCenter}\n        >\n          <GpsImage\n            className={styles.ButtonImage}\n            style={{\n              fill: followGps ? '#008ABF' : '#000',\n              fillOpacity: isValidPosition(position) ? 1 : 0.25,\n            }}\n            focusable=\"false\"\n            aria-hidden=\"true\"\n          />\n        </CustomButton>\n      </CustomControl>\n      <CustomControl bindingPosition=\"BOTTOM_CENTER\">\n        <CustomButton onClick={selectedNearestStation}>\n          {preferBikes ? (\n            <BikeImage className={styles.ButtonImage} />\n          ) : (\n            <SlotImage\n              className={styles.ButtonImage}\n              style={{fill: '#008ABF'}}\n            />\n          )}\n        </CustomButton>\n      </CustomControl>\n      <CustomControl bindingPosition=\"RIGHT_TOP\">\n        <CustomButton onClick={() => setPreferBikes((value) => !value)}>\n          {preferBikes ? (\n            <BikeImage className={styles.ButtonImage} />\n          ) : (\n            <SlotImage\n              className={styles.ButtonImage}\n              style={{fill: '#008ABF'}}\n            />\n          )}\n        </CustomButton>\n      </CustomControl>\n      <CustomControl bindingPosition=\"RIGHT_TOP\">\n        <CustomButton onClick={() => setShowLabels((value) => !value)}>\n          {showLabels ? (\n            <CircleMinus className={styles.ButtonImage} />\n          ) : (\n            <CirclePlus className={styles.ButtonImage} />\n          )}\n        </CustomButton>\n      </CustomControl>\n      {map && validStations.length > 0 && (\n        <MarkerClusterer>\n          {validStations.map(({bikes, free, lat, lng, number, total}) => {\n            return (\n              <StationMarker\n                key={number}\n                bikes={bikes}\n                free={free}\n                lat={lat}\n                lng={lng}\n                number={number}\n                onClick={() =>\n                  setSelectedStation(\n                    validStations\n                      .filter((station) => station.number === number)\n                      .shift(),\n                  )\n                }\n                preferBikes={preferBikes}\n                showLabel={showLabels}\n                total={total}\n              />\n            );\n          })}\n        </MarkerClusterer>\n      )}\n      {map && position && position.coords && position.timestamp && (\n        <GpsMarker coords={position.coords} timestamp={position.timestamp} />\n      )}\n      {map && selectedStation && (\n        <InfoWindow\n          anchorId={`station-${selectedStation.number}`}\n          onCloseClick={() => setSelectedStation(undefined)}\n          visible\n        >\n          <StationInfo fetchedAt={fetchedAt} station={selectedStation} />\n        </InfoWindow>\n      )}\n    </div>\n  );\n}\n\nexport function nearestStation(\n  source: google.maps.LatLng,\n  stations: ValidStation[],\n  preferNearestBike: boolean | undefined,\n) {\n  const google = googleMapsAsync();\n\n  return stations\n    .map((station) => ({\n      station,\n      distance: google.maps.geometry.spherical.computeDistanceBetween(\n        source,\n        new google.maps.LatLng(station.lat, station.lng),\n      ),\n    }))\n    .filter(\n      ({station: {bikes, errors, free, operative}}) =>\n        preferNearestBike == null ||\n        ((!errors || !errors.length) &&\n          operative &&\n          (preferNearestBike ? bikes > 0 : free > 0)),\n    )\n    .sort((left, right) => left.distance - right.distance)[0].station;\n}\n\nfunction stationCollectionComparer(prev: Station[], next: Station[]) {\n  if (prev.length !== next.length) {\n    return false;\n  }\n\n  const prevSorted = prev.sort(\n    ({number: aId = 0}, {number: bId = 0}) => aId - bId,\n  );\n  const nextSorted = next.sort(\n    ({number: aId = 0}, {number: bId = 0}) => aId - bId,\n  );\n\n  return prevSorted.every((prev, i) => stationComparer(prev, nextSorted[i]));\n}\n\nfunction stationComparer(prev: Station, next: Station) {\n  return (\n    prev.number === next.number &&\n    prev.valid === next.valid &&\n    JSON.stringify(prev.data) === JSON.stringify(next.data)\n  );\n}\n\nfunction latLngFromPosition({coords: {latitude, longitude}}: Position) {\n  const google = googleMapsAsync();\n\n  return new google.maps.LatLng(latitude, longitude);\n}\n\nfunction gpsZoom(position: Position | undefined, max = maxZoom) {\n  if (position) {\n    const {\n      coords: {accuracy},\n    } = position;\n\n    // magic number explained here: https://gis.stackexchange.com/a/111589\n    return Math.min(max, Math.max(1, Math.log2(591657550 / accuracy) - 6));\n  }\n\n  return undefined;\n}\n\nfunction isValidPosition(position: Position | undefined): position is Position {\n  return Boolean(\n    position &&\n      position.coords.latitude !== 0 &&\n      position.coords.longitude !== 0,\n  );\n}\n","import {useCallback, useDebugValue, useEffect, useState} from 'react';\nimport moment from 'moment';\nimport {QueryParams} from './useQueryParams';\n\ninterface UsePositionProps {\n  options?: PositionOptions;\n  params: QueryParams | undefined;\n}\n\nconst defaultOptions: PositionOptions = {\n  enableHighAccuracy: true,\n};\n\nexport function usePosition({options}: UsePositionProps) {\n  const [watchId, setWatchId] = useState<number>();\n  const [position, setPosition] = useState<Position>();\n  const [error, setError] = useState<PositionError>();\n  const updatePosition = useCallback(() => {\n    if (typeof navigator !== 'undefined') {\n      navigator.geolocation.getCurrentPosition(\n        setPosition,\n        setError,\n        options || defaultOptions,\n      );\n    }\n  }, [options]);\n  useEffect(() => {\n    if (!watchId && typeof navigator !== 'undefined') {\n      const id = navigator.geolocation.watchPosition(\n        setPosition,\n        setError,\n        options || defaultOptions,\n      );\n\n      setWatchId(id);\n\n      return () => {\n        if (watchId) {\n          navigator.geolocation.clearWatch(watchId);\n\n          setWatchId(undefined);\n        }\n      };\n    }\n\n    return undefined;\n  }, [options, watchId]);\n  useDebugValue(\n    position\n      ? `[${position.coords.latitude}, ${position.coords.longitude}] @ ${moment(\n          position.timestamp,\n        ).fromNow()}`\n      : 'Loading...',\n  );\n\n  return {\n    error,\n    position,\n    updatePosition,\n  };\n}\n","import {Station} from 'models';\nimport {googleMapsAsync} from 'utilities/google';\nimport {Smoove} from './transform';\n\nenum StationSourceType {\n  Smoove,\n}\n\nexport type SourceName = 'vancouver' | 'test';\n\nexport interface StationSourceConfig {\n  location: google.maps.LatLngLiteral;\n  name: string;\n  options?: any;\n  type: keyof typeof StationSourceType;\n  uri: string;\n  cors?: boolean;\n}\n\nconst configMap = new Map<SourceName, StationSourceConfig>([\n  [\n    'test',\n    {\n      location: {\n        lat: 49.279627,\n        lng: -123.121116,\n      },\n      name: 'Test Data',\n      type: 'Smoove',\n      uri: '/test_data',\n    },\n  ],\n  [\n    'vancouver',\n    {\n      location: {\n        lat: 49.279627,\n        lng: -123.121116,\n      },\n      name: 'Mobi Bike Vancouver',\n      type: 'Smoove',\n      uri: 'http://vancouver-ca.smoove.pro/api-public/stations',\n      cors: true,\n    },\n  ],\n]);\n\nexport function getConfig(key: SourceName) {\n  const config = configMap.get(key);\n\n  if (!config) {\n    throw new Error(`No station data for source '${key}'`);\n  }\n\n  return config;\n}\n\nexport function getConfigByLocation(location: google.maps.LatLngLiteral) {\n  const google = googleMapsAsync(false);\n\n  return Array.from<StationSourceConfig>(configMap.values())\n    .map((config) => ({\n      config,\n      distance: google.maps.geometry.spherical.computeDistanceBetween(\n        new google.maps.LatLng(location),\n        new google.maps.LatLng(config.location.lat, config.location.lng),\n      ),\n    }))\n    .sort((left, right) => left.distance - right.distance)[0].config;\n}\n\nexport type StationSourceTransform = (response: any) => Station[];\n\nexport function mapTransform({type}: StationSourceConfig) {\n  switch (type) {\n    case 'Smoove':\n      return Smoove;\n    default:\n      throw new Error(`Invalid Configuration '${type}'`);\n  }\n}\n","export interface StationData extends Partial<google.maps.LatLngLiteral> {\n  bikes: number;\n  errors: any[];\n  free: number;\n  name: string | undefined;\n  number: number | undefined;\n  operative: boolean;\n  total: number;\n}\n\nexport interface Station extends StationData {\n  data: StationData;\n  valid?: boolean;\n}\n\nexport interface ValidStation extends Station {\n  lat: number;\n  lng: number;\n  name: string;\n  number: number;\n  valid: true;\n}\n\nexport function createStation(data: StationData): Station {\n  return {\n    data,\n    valid: [\n      Number.isInteger(data.bikes),\n      Number.isInteger(data.free),\n      Number.isInteger(data.total),\n      data.number != null && Number.isInteger(data.number) && data.number > 0,\n      data.lat != null && Number.isFinite(data.lat) && data.lat !== 0,\n      data.lng != null && Number.isFinite(data.lng) && data.lng !== 0,\n      data.name != null && /^\\w/.test(data.name),\n      data.errors.length === 0,\n    ].every((x) => x),\n    ...data,\n  };\n}\n","import {createStation, StationData} from 'models';\n\nexport interface SmooveStation {\n  name: string;\n  coordinates: string;\n  // eslint-disable-next-line babel/camelcase\n  total_slots: number;\n  // eslint-disable-next-line babel/camelcase\n  free_slots: number;\n  // eslint-disable-next-line babel/camelcase\n  avl_bikes: number;\n  operative: boolean;\n  style: string;\n}\n\nexport interface Response {\n  result: SmooveStation[];\n}\n\nexport function parseLatLng({coordinates}: SmooveStation) {\n  try {\n    const match = /^\\s*(-?\\d+\\.\\d+)\\s*,\\s*(-?\\d+\\.\\d+)\\s*$/.exec(coordinates);\n\n    if (!match) {\n      throw new Error(`Unable to parse \"lat, lng\" from ${coordinates}`);\n    }\n\n    return {\n      lat: Number(match[1]),\n      lng: Number(match[2]),\n    };\n  } catch (error) {\n    return {\n      latLngError: error,\n    };\n  }\n}\n\nexport function parseNameAndNumber({name}: SmooveStation) {\n  try {\n    const match = /^(\\d+)\\s+(.*)$/.exec(name);\n\n    if (!match) {\n      throw new Error(`Unable to parse \"number name\" from ${name}`);\n    }\n\n    return {\n      name: match[2],\n      number: Number(match[1]),\n    };\n  } catch (error) {\n    return {\n      nameNumberError: error,\n    };\n  }\n}\n\nexport function create(smooveData: SmooveStation) {\n  const {nameNumberError, name, number} = parseNameAndNumber(smooveData);\n  const {lat, latLngError, lng} = parseLatLng(smooveData);\n  const data: StationData = {\n    ...smooveData,\n    bikes: smooveData.avl_bikes,\n    free: smooveData.free_slots,\n    lat,\n    lng,\n    name,\n    number,\n    operative: smooveData.operative,\n    total: smooveData.total_slots,\n    errors: [],\n  };\n\n  if (nameNumberError) {\n    data.errors.push(nameNumberError);\n  }\n\n  if (latLngError) {\n    data.errors.push(latLngError);\n  }\n\n  return createStation(data);\n}\n\nexport function Smoove({result}: Response) {\n  return result.map(create);\n}\n","import fetch from 'isomorphic-fetch';\nimport moment from 'moment';\nimport {Station} from 'models';\nimport {\n  getConfig,\n  getConfigByLocation,\n  mapTransform,\n  SourceName,\n  StationSourceConfig,\n  StationSourceTransform,\n} from './config';\n\nexport interface StationSourceResult {\n  config: StationSourceConfig;\n  error?: any;\n  fetchedAt: moment.Moment;\n  stations: Station[];\n}\n\nexport interface Options {\n  debug?: boolean;\n}\n\nexport class StationSource {\n  public static create(\n    configOrKey: SourceName | StationSourceConfig,\n    {debug}: Options,\n  ) {\n    const config =\n      typeof configOrKey === 'string' ? getConfig(configOrKey) : configOrKey;\n\n    return new StationSource(config, mapTransform(config), debug);\n  }\n\n  public static nearest(location: google.maps.LatLngLiteral, options: Options) {\n    return StationSource.create(getConfigByLocation(location), options);\n  }\n\n  readonly config: StationSourceConfig;\n  readonly verboseOutput: boolean;\n  private readonly transform: StationSourceTransform;\n\n  constructor(\n    config: StationSourceConfig,\n    transform: StationSourceTransform,\n    // eslint-disable-next-line no-process-env\n    verboseOutput = process.env.NODE_ENV !== 'production',\n  ) {\n    this.config = config;\n    this.transform = transform;\n    this.verboseOutput = verboseOutput;\n  }\n\n  async getJSON() {\n    const uri = this.config.cors\n      ? `https://cors-anywhere.herokuapp.com/${this.config.uri}`\n      : this.config.uri;\n    this.debug(`Fetching stations from '${uri}' ...`);\n\n    const response = await fetch(uri, {\n      headers: this.config.options ? this.config.options.headers : undefined,\n    });\n\n    const json = response.json();\n\n    this.debug('Fetch Response', json);\n\n    return json;\n  }\n\n  async getStations(): Promise<StationSourceResult> {\n    try {\n      const json = await this.getJSON();\n\n      const stations = this.transform(json);\n\n      this.debug(`Fetched ${stations.length} stations`);\n\n      return {\n        config: this.config,\n        fetchedAt: moment(),\n        stations,\n      };\n    } catch (error) {\n      this.debug(`Fetch failed: ${error.message || 'Unknown Error'}`, error);\n\n      return {\n        config: this.config,\n        error,\n        fetchedAt: moment(),\n        stations: [],\n      };\n    }\n  }\n\n  protected debug(message: string, ...args: any[]) {\n    if (this.verboseOutput) {\n      // eslint-disable-next-line no-console\n      console.log(message, args);\n    }\n  }\n}\n","import {useCallback, useDebugValue, useEffect, useMemo, useState} from 'react';\nimport {SourceName, StationSource, StationSourceResult} from 'data';\nimport {QueryParams} from './useQueryParams';\n\ninterface UseStationsProps {\n  params: QueryParams | undefined;\n}\n\nexport const defaultSourceName: SourceName = 'vancouver';\n\nfunction getSourceName(params: QueryParams | undefined) {\n  if (!params) {\n    return {};\n  }\n\n  return {\n    debug: Boolean(params.get('debug')),\n    sourceName: (params.get('source') ||\n      (params.get('test') && 'test') ||\n      defaultSourceName) as SourceName,\n  };\n}\n\nexport function useStations({params}: UseStationsProps) {\n  const {debug, sourceName} = getSourceName(params);\n  const [stationSourceResult, setStationSourceResult] = useState<\n    StationSourceResult\n  >();\n  const source = useMemo(() => {\n    if (sourceName) {\n      return StationSource.create(sourceName, {debug});\n    }\n\n    return null;\n  }, [debug, sourceName]);\n  const updateStations = useCallback(() => {\n    if (source) {\n      return source.getStations().then(setStationSourceResult);\n    }\n\n    return undefined;\n  }, [source]);\n  useEffect(() => {\n    if (source) {\n      updateStations();\n    }\n  }, [source, updateStations]);\n  useDebugValue(\n    stationSourceResult\n      ? `${\n          stationSourceResult.stations.length\n        } stations loaded (${stationSourceResult.fetchedAt.fromNow()})`\n      : 'Loading...',\n  );\n\n  return {\n    stationSourceResult,\n    updateStations,\n  };\n}\n","/* eslint-disable */\n\n// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\n    ),\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as {env: {[key: string]: string}}).env.PUBLIC_URL,\n      window.location.href,\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA',\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.',\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.',\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {App} from './App';\nimport {unregister} from './serviceWorker';\n\nimport 'styles/_global.scss';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nunregister();\n","import React from 'react';\nimport {GoogleMapProvider} from '@googlemap-react/core';\nimport {Loader} from 'components';\nimport {Header, StationMap} from './components';\nimport {useQueryParams, usePosition, useStations} from './hooks';\n\nimport styles from './App.module.scss';\n\nexport function App() {\n  const {params} = useQueryParams();\n  const {position} = usePosition({params});\n  const {stationSourceResult, updateStations} = useStations({params});\n  return (\n    <div className={styles.Container}>\n      <Header />\n      <div className={styles.Content}>\n        {stationSourceResult ? (\n          <GoogleMapProvider>\n            <StationMap\n              fetchedAt={stationSourceResult.fetchedAt}\n              location={stationSourceResult.config.location}\n              stations={stationSourceResult.stations}\n              position={position}\n              updateStations={updateStations}\n            />\n          </GoogleMapProvider>\n        ) : (\n          <Loader />\n        )}\n      </div>\n    </div>\n  );\n}\n","import {useDebugValue, useEffect, useState} from 'react';\n\nexport type QueryParams = Map<string, string>;\n\nexport function useQueryParams() {\n  const [params, setParams] = useState<QueryParams>();\n  useEffect(() => {\n    if (typeof window !== 'undefined' && !params) {\n      const params = new Map<string, string>();\n\n      new URLSearchParams(window.location.search).forEach((value, key) => {\n        params.set(key.toLowerCase(), value);\n      });\n\n      setParams(params);\n    }\n  }, [params]);\n  useDebugValue(\n    typeof window === 'undefined' ? 'Loading...' : window.location.search,\n  );\n\n  return {\n    params,\n  };\n}\n"],"sourceRoot":""}