{"version":3,"sources":["App/components/Header/Header.module.scss","components/Loader/Loader.module.scss","App/App.module.scss","config/env.ts","App/components/StationMap/components/CustomButton/CustomButton.module.scss","App/components/StationMap/StationMap.module.scss","components/Loader/Loader.tsx","App/components/Header/Header.tsx","utilities/google.ts","App/components/StationMap/components/CustomButton/CustomButton.tsx","App/components/StationMap/components/CustomControl/CustomControl.ts","App/components/StationMap/components/GpsMarker/GpsMarker.tsx","App/components/StationMap/components/StationInfo/StationInfo.tsx","App/components/StationMap/components/StationMarker/StationMarker.tsx","App/components/StationMap/images/bike.svg","App/components/StationMap/images/gps.svg","App/components/StationMap/images/refresh.svg","App/components/StationMap/images/slot.svg","App/components/StationMap/StationMap.tsx","App/components/StationMap/hooks/useMarkerClusterer.tsx","App/hooks/usePosition.ts","data/config.ts","data/transform/Smoove.ts","models/Station.ts","data/StationSource.ts","App/hooks/useStations.ts","serviceWorker.ts","index.tsx","App/App.tsx","App/hooks/useQueryParams.ts"],"names":["module","exports","Header","HeaderLogo","HeaderContent","LoadingContainer","Loader","Container","Content","process","dotenv__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","n","dotenv","config","env","CustomButton","MapContainer","ButtonImage","loaders","_ref","_ref$name","name","Math","floor","random","length","react_default","a","createElement","className","styles","dist_default","href","alt","src","metadata","description","mockGoogle","maps","googleMapsAsync","allowMock","arguments","undefined","window","google","Error","useGoogleNamespace","props","Object","objectWithoutProperties","assign","classNames","type","CustomControl","_ref$bindingPosition","bindingPosition","children","_ref$onMounted","onMounted","onContainerMounted","state","useContext","GoogleMapContext","_useState","useState","_useState2","slicedToArray","mounted","setMounted","_useState3","document","container","_useGoogleNamespace","useLayoutEffect","map","controls","ControlPosition","push","ReactDOM","createPortal","style","margin","GpsMarker","_ref$color","color","coords","timestamp","radius","accuracy","heading","position","lat","latitude","lng","longitude","Fragment","index_esm","opts","center","fillColor","strokeColor","fillOpacity","strokeWeight","icon","anchor","Point","path","SymbolPath","FORWARD_CLOSED_ARROW","rotation","scale","zIndex","Marker","MAX_ZINDEX","StationInfo","fetchedAt","station","concat","number","toString","padStart","operative","bikes","free","total","rel","target","fromNow","colors","low","mid","high","StationMarker","id","preferBikes","showInfo","onClick","colorForCount","strokeOpacity","label","text","fontSize","fontWeight","count","_extends","i","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","bike_ref2","d","bike_SvgBike","svgRef","viewBox","ref","ForwardRef","forwardRef","p","gps_extends","gps_objectWithoutProperties","gps_objectWithoutPropertiesLoose","gps_ref2","gps_SvgGps","gps_ForwardRef","refresh_extends","refresh_objectWithoutProperties","refresh_objectWithoutPropertiesLoose","refresh_ref2","refresh_SvgRefresh","refresh_ForwardRef","slot_extends","slot_objectWithoutProperties","slot_objectWithoutPropertiesLoose","slot_ref2","slot_SvgSlot","slot_ForwardRef","defaultZoom","maxZoom","StationMap","location","stations","updateStations","_useContext$state","_useContext$state$map","followGps","setFollowGps","_useState4","centered","setCentered","_useState5","_useState6","validStations","setValidStations","_useState7","_useState8","selectedStation","setSelectedStation","_useState9","_useState10","setPreferBikes","MarkerClusterer","_useContext","dispatch","clusterer","setClusterer","context","setContext","Provider","useCallback","value","useEffect","MarkerClustererPlus","averageCenter","gridSize","enableRetinaIcons","action","object","objects","addMarker","marker","get","removeMarker","useMarkerClusterer","centerGps","_position$coords","LatLng","gpsCenter","zoom","max","min","log2","gpsZoom","setCenter","setZoom","filter","shift","hideInfo","updatedStations","forEach","valid","console","debug","prev","next","prevSorted","sort","_ref4","_ref5","_ref4$number","aId","_ref5$number","bId","nextSorted","_ref6","_ref7","_ref6$number","_ref7$number","every","JSON","stringify","data","stationComparer","stationCollectionComparer","apiKey","onDragStart","LoadingComponent","useDrawing","useGeometry","usePlaces","useVisualization","disabled","isValidPosition","fill","focusable","aria-hidden","preferNearestBike","distance","geometry","spherical","computeDistanceBetween","_ref3","_ref3$station","errors","left","right","nearestStation","panTo","_ref2","anchorId","onCloseClick","visible","renderInfoWindow","defaultOptions","enableHighAccuracy","StationSourceType","create","smooveData","_parseNameAndNumber","match","exec","Number","error","nameNumberError","parseNameAndNumber","_parseLatLng","coordinates","latLngError","parseLatLng","objectSpread","avl_bikes","free_slots","total_slots","isInteger","isFinite","test","x","createStation","Smoove","result","configMap","Map","uri","cors","StationSource","transform","verboseOutput","classCallCheck","createClass","configOrKey","getConfig","mapTransform","options","Array","from","values","getConfigByLocation","_getJSON","asyncToGenerator","regenerator_default","mark","_callee","response","json","wrap","_context","fetch","headers","sent","abrupt","stop","_getStations","_callee2","_context2","getJSON","moment","t0","message","_len","args","_key","log","defaultSourceName","useStations","_getSourceName","params","Boolean","sourceName","getSourceName","stationSourceResult","setStationSourceResult","useMemo","getStations","then","useDebugValue","hostname","render","setParams","URLSearchParams","search","set","toLowerCase","useQueryParams","watchId","setWatchId","setPosition","setError","updatePosition","navigator","geolocation","getCurrentPosition","watchPosition","clearWatch","usePosition","_useStations","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.43282eef.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Header\":\"Header_Header__1XO4R\",\"HeaderLogo\":\"Header_HeaderLogo__1dLj0\",\"HeaderContent\":\"Header_HeaderContent__3wHIB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LoadingContainer\":\"Loader_LoadingContainer__1zHC6\",\"Loader\":\"Loader_Loader__3w7V8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Container\":\"App_Container__Sk-T4\",\"Content\":\"App_Content__2YSLD\"};","import dotenv from 'dotenv';\n\ndotenv.config();\nconst {env = {}} = typeof process === 'undefined' ? {} : process;\n\nexport {env};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"CustomButton\":\"CustomButton_CustomButton__2nL-I\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"MapContainer\":\"StationMap_MapContainer__2mxHY\",\"ButtonImage\":\"StationMap_ButtonImage__1ypMu\"};","import React from 'react';\nimport Spinner, {SpinnerProps} from 'react-spinkit';\n\nimport styles from './Loader.module.scss';\n\ntype SpinnerName = 'double-bounce' | 'chasing-dots' | 'circle' | 'cube-grid';\nexport const loaders: Required<SpinnerProps['name']>[] = [\n  'double-bounce',\n  'chasing-dots',\n  'circle',\n  'cube-grid',\n];\n\nexport function randomLoaderName() {\n  return loaders[Math.floor(Math.random() * loaders.length)] as SpinnerName;\n}\n\nexport interface Props {\n  name?: SpinnerName;\n}\n\nexport function Loader({name = randomLoaderName()}: Props) {\n  if (name) {\n    return (\n      <div className={styles.LoadingContainer}>\n        <Spinner className={styles.Loader} name={name} />\n      </div>\n    );\n  }\n\n  return null;\n}\n","import React from 'react';\nimport {metadata} from 'config';\n\nimport styles from './Header.module.scss';\n\nexport function Header() {\n  return (\n    <div className={styles.Header}>\n      <div className={styles.HeaderLogo}>\n        <a href=\"https://www.mobibikes.ca/en#the-map\">\n          <img\n            alt=\"logo\"\n            src=\"https://www.mobibikes.ca/sites/all/themes/smoove_bootstrap/logo.png\"\n          />\n        </a>\n      </div>\n      <div className={styles.HeaderContent}>\n        <h1>{metadata.description}</h1>\n      </div>\n    </div>\n  );\n}\n","/* global google */\n\ndeclare global {\n  interface Window {\n    google: typeof google;\n  }\n}\n\nconst mockGoogle: any = {\n  maps: {},\n};\n\nexport type google = typeof google;\n\nexport function googleMapsAsync(allowMock = true): typeof google {\n  if (window.google) {\n    return window.google;\n  }\n\n  if (allowMock) {\n    return mockGoogle;\n  }\n\n  throw new Error('google.maps API has not yet loaded');\n}\n\nexport function useGoogleNamespace(): [typeof google, () => typeof google] {\n  return [googleMapsAsync(), googleMapsAsync];\n}\n","import React, {ButtonHTMLAttributes} from 'react';\nimport classNames from 'classnames';\n\nimport styles from './CustomButton.module.scss';\n\nexport function CustomButton({\n  className,\n  ...props\n}: ButtonHTMLAttributes<HTMLButtonElement>) {\n  return (\n    <button\n      className={classNames(styles.CustomButton, className)}\n      type=\"button\"\n      {...props}\n    />\n  );\n}\n","import {ReactNode, useContext, useLayoutEffect, useState} from 'react';\nimport ReactDOM from 'react-dom';\nimport {GoogleMapContext} from '@googlemap-react/core';\nimport {google, useGoogleNamespace} from 'utilities/google';\n\ninterface Props {\n  bindingPosition: keyof typeof google.maps.ControlPosition;\n  children?: ReactNode;\n  onMounted?(container: HTMLDivElement): void;\n}\n\nexport function CustomControl({\n  bindingPosition = 'RIGHT_TOP',\n  children,\n  onMounted = onContainerMounted,\n}: Props) {\n  const {state} = useContext(GoogleMapContext);\n  const [mounted, setMounted] = useState(false);\n  const [container] = useState(document.createElement('div'));\n  const [google] = useGoogleNamespace();\n  useLayoutEffect(() => {\n    if (state && state.map && !mounted) {\n      state.map.controls[google.maps.ControlPosition[bindingPosition]].push(\n        container,\n      );\n\n      onMounted(container);\n\n      setMounted(true);\n    }\n  }, [\n    bindingPosition,\n    container,\n    google.maps.ControlPosition,\n    mounted,\n    onMounted,\n    state,\n    state.map,\n  ]);\n\n  return typeof document === 'undefined'\n    ? null\n    : ReactDOM.createPortal(children, container);\n}\n\nexport function onContainerMounted(container: HTMLDivElement) {\n  container.style.margin = '10px 10px 23px';\n}\n","import React from 'react';\nimport {Circle, Marker} from '@googlemap-react/core';\nimport {useGoogleNamespace} from 'utilities/google';\n\ninterface Props {\n  color?: string;\n  coords: Coordinates;\n  timestamp: number;\n}\n\nexport function GpsMarker({color = 'magenta', coords, timestamp}: Props) {\n  const [google] = useGoogleNamespace();\n  const {accuracy: radius, heading, latitude, longitude} = coords;\n\n  const position: google.maps.LatLngLiteral = {\n    lat: latitude,\n    lng: longitude,\n  };\n\n  return (\n    <>\n      <Circle\n        opts={{\n          center: position,\n          radius,\n          fillColor: color,\n          strokeColor: color,\n          fillOpacity: 0.25,\n          strokeWeight: 1,\n        }}\n      />\n      <Marker\n        opts={{\n          icon: {\n            anchor: new google.maps.Point(0, 2.6),\n            path: google.maps.SymbolPath.FORWARD_CLOSED_ARROW,\n            strokeColor: color,\n            fillColor: color,\n            fillOpacity: 1,\n            rotation: heading || 0,\n            scale: 10,\n            strokeWeight: 1,\n          },\n          position,\n          zIndex: google.maps.Marker.MAX_ZINDEX,\n        }}\n      />\n    </>\n  );\n}\n","import React from 'react';\nimport moment from 'moment';\nimport {ValidStation} from 'models';\n\ninterface Props {\n  fetchedAt: moment.Moment;\n  station: ValidStation;\n}\n\nexport function StationInfo({fetchedAt, station}: Props) {\n  return (\n    <ul>\n      <li>{`[${station.number.toString().padStart(4, '0')}] ${station.name}${\n        station.operative ? '' : ' (CLOSED)'\n      }`}</li>\n      <li>{`${station.bikes} bikes / ${station.free} slots (${\n        station.total\n      } total)`}</li>\n      <li>\n        <a\n          rel=\"noopener noreferrer\"\n          target=\"_blank\"\n          href={`https://www.google.com/maps/dir/?api=${1}&travelmode=bicycling&destination=${\n            station.lat\n          },${station.lng}`}\n        >{`${station.lat}, ${station.lng}`}</a>\n      </li>\n      <li>{`Last Updated: ${fetchedAt.fromNow()}`}</li>\n    </ul>\n  );\n}\n","import React from 'react';\nimport {Marker} from '@googlemap-react/core';\n\nexport const colors = {\n  low: 'salmon',\n  mid: 'sandybrown',\n  high: 'mediumseagreen',\n};\n\nexport interface Props {\n  bikes: number;\n  free: number;\n  id: number;\n  lat: number;\n  lng: number;\n  preferBikes: boolean;\n  showInfo(id: number): void;\n  total: number;\n}\n\nexport function StationMarker({\n  bikes,\n  free,\n  id,\n  lat,\n  lng,\n  preferBikes,\n  showInfo,\n  total,\n}: Props) {\n  return (\n    <Marker\n      id={`station-${id}`}\n      onClick={() => showInfo(id)}\n      opts={{\n        icon: {\n          path: 'M-20,0a20,20 0 1,0 40,0a20,20 0 1,0 -40,0',\n          fillColor: colorForCount(preferBikes ? bikes : free, total),\n          fillOpacity: 1,\n          strokeColor: 'white',\n          strokeOpacity: 1,\n        },\n        label: {\n          color: 'white',\n          text: `${bikes} | ${free}`,\n          fontSize: '0.75rem',\n          fontWeight: 'bold',\n        },\n        position: {lat, lng},\n      }}\n    />\n  );\n}\n\nexport function colorForCount(count: number, total: number) {\n  const fraction = count / total;\n  if (fraction >= 0.5) {\n    return colors.high;\n  }\n\n  return count >= 0.25 ? colors.mid : colors.low;\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M408,132.6c25.5,0,45.9-20.4,45.9-45.9S433.5,40.8,408,40.8s-45.9,20.4-45.9,45.9S382.5,132.6,408,132.6z M484.5,316.2 c-71.4,0-127.5,56.1-127.5,127.5s56.1,127.5,127.5,127.5S612,515.101,612,443.7S555.9,316.2,484.5,316.2z M484.5,532.95 c-48.45,0-89.25-40.801-89.25-89.25c0-48.451,40.8-89.25,89.25-89.25s89.25,40.799,89.25,89.25 C573.75,492.149,532.95,532.95,484.5,532.95z M377.4,265.2h107.1v-45.9h-81.6l-48.45-84.15c-7.65-12.75-20.4-20.4-38.25-20.4 c-12.75,0-22.95,5.1-30.6,12.75l-94.35,94.35c-7.65,7.65-12.75,17.85-12.75,30.6c0,15.3,7.65,30.6,20.4,38.25l86.7,51v127.5h45.9 V303.45l-56.1-43.35l58.65-58.65L377.4,265.2z M127.5,316.2C56.1,316.2,0,372.3,0,443.7s56.1,127.5,127.5,127.5 S255,515.101,255,443.7S198.9,316.2,127.5,316.2z M127.5,532.95c-48.45,0-89.25-40.801-89.25-89.25 c0-48.451,40.8-89.25,89.25-89.25s89.25,40.799,89.25,89.25C216.75,492.149,175.95,532.95,127.5,532.95z\"\n});\n\nvar SvgBike = function SvgBike(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 612 612\",\n    ref: svgRef\n  }, props), _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgBike, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/bike.44bc6267.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M280.5,178.5c-56.1,0-102,45.9-102,102c0,56.1,45.9,102,102,102c56.1,0,102-45.9,102-102     C382.5,224.4,336.6,178.5,280.5,178.5z M507.45,255C494.7,147.9,410.55,63.75,306,53.55V0h-51v53.55     C147.9,63.75,63.75,147.9,53.55,255H0v51h53.55C66.3,413.1,150.45,497.25,255,507.45V561h51v-53.55     C413.1,494.7,497.25,410.55,507.45,306H561v-51H507.45z M280.5,459C181.05,459,102,379.95,102,280.5S181.05,102,280.5,102     S459,181.05,459,280.5S379.95,459,280.5,459z\"\n});\n\nvar SvgGps = function SvgGps(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 561 561\",\n    ref: svgRef\n  }, props), _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgGps, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/gps.9f3589a2.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M55.89,262.818c-3-26-0.5-51.1,6.3-74.3c22.6-77.1,93.5-133.8,177.6-134.8v-50.4c0-2.8,3.5-4.3,5.8-2.6l103.7,76.2         c1.7,1.3,1.7,3.9,0,5.1l-103.6,76.2c-2.4,1.7-5.8,0.2-5.8-2.6v-50.3c-55.3,0.9-102.5,35-122.8,83.2c-7.7,18.2-11.6,38.3-10.5,59.4         c1.5,29,12.4,55.7,29.6,77.3c9.2,11.5,7,28.3-4.9,37c-11.3,8.3-27.1,6-35.8-5C74.19,330.618,59.99,298.218,55.89,262.818z         M355.29,166.018c17.3,21.5,28.2,48.3,29.6,77.3c1.1,21.2-2.9,41.3-10.5,59.4c-20.3,48.2-67.5,82.4-122.8,83.2v-50.3         c0-2.8-3.5-4.3-5.8-2.6l-103.7,76.2c-1.7,1.3-1.7,3.9,0,5.1l103.6,76.2c2.4,1.7,5.8,0.2,5.8-2.6v-50.4         c84.1-0.9,155.1-57.6,177.6-134.8c6.8-23.2,9.2-48.3,6.3-74.3c-4-35.4-18.2-67.8-39.5-94.4c-8.8-11-24.5-13.3-35.8-5         C348.29,137.718,346.09,154.518,355.29,166.018z\"\n});\n\nvar SvgRefresh = function SvgRefresh(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 491.236 491.236\",\n    ref: svgRef\n  }, props), _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgRefresh, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/refresh.137b889f.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"path\", {\n  d: \"M408,0H51C22.95,0,0,22.95,0,51v357c0,28.05,22.95,51,51,51h357c28.05,0,51-22.95,51-51V51C459,22.95,436.05,0,408,0z  M173.4,265.2V357h-45.9V102h109.65c38.25,0,56.1,7.65,71.399,22.95c17.851,15.3,22.95,35.7,22.95,58.65 c0,25.5-7.65,45.9-22.95,58.65s-33.149,20.4-71.399,20.4H173.4V265.2z\"\n}), React.createElement(\"path\", {\n  d: \"M173.4,229.5v-91.8h58.65c17.851,0,30.601,5.1,38.25,15.3c7.65,10.2,12.75,17.85,12.75,30.6c0,15.3-5.1,22.95-12.75,33.15 c-7.649,7.65-17.85,12.75-35.7,12.75H173.4z\"\n}));\n\nvar SvgSlot = function SvgSlot(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 459 459\",\n    ref: svgRef\n  }, props), _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgSlot, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/slot.ae84d45d.svg\";\nexport { ForwardRef as ReactComponent };","import React, {useContext, useEffect, useState, useCallback} from 'react';\nimport {\n  BicyclingLayer,\n  GoogleMapContext,\n  InfoWindow,\n  MapBox,\n} from '@googlemap-react/core';\nimport moment from 'moment';\nimport {Loader} from 'components';\nimport {Station, ValidStation} from 'models';\nimport {googleMapsAsync} from 'utilities/google';\nimport {\n  CustomButton,\n  CustomControl,\n  GpsMarker,\n  StationInfo,\n  StationMarker,\n} from './components';\nimport {useMarkerClusterer} from './hooks';\nimport {BikeImage, GpsImage, RefreshImage, SlotImage} from './images';\n\nimport styles from './StationMap.module.scss';\n\nconst defaultZoom = 13;\nconst maxZoom = 17;\n\nexport interface Props {\n  fetchedAt: moment.Moment;\n  location: google.maps.LatLngLiteral;\n  stations: Station[];\n  position: Position | undefined;\n  updateStations(): void;\n}\n\nexport function StationMap({\n  fetchedAt,\n  location,\n  stations,\n  updateStations,\n  position,\n}: Props) {\n  const {state: {map = undefined} = {}} = useContext(GoogleMapContext);\n  const [followGps, setFollowGps] = useState(true);\n  const [centered, setCentered] = useState(false);\n  const [validStations, setValidStations] = useState<ValidStation[]>([]);\n  const [selectedStation, setSelectedStation] = useState<ValidStation>();\n  const [preferBikes, setPreferBikes] = useState(true);\n  const MarkerClusterer = useMarkerClusterer();\n  const centerGps = useCallback(() => {\n    if (map) {\n      const center = gpsCenter(position);\n      const zoom = gpsZoom(position);\n\n      if (center) {\n        map.setCenter(center);\n      }\n\n      if (zoom) {\n        map.setZoom(zoom);\n      }\n\n      if (!centered) {\n        setCentered(true);\n      }\n    }\n  }, [centered, map, position]);\n  useEffect(() => {\n    const updatedStations: ValidStation[] = [];\n\n    stations.forEach((station) => {\n      if (!station.valid) {\n        // this should never happen\n        // eslint-disable-next-line no-console\n        console.debug(`Bad Station Found`, station);\n      }\n\n      updatedStations.push(station as ValidStation);\n    });\n\n    if (!stationCollectionComparer(validStations, updatedStations)) {\n      setValidStations(updatedStations);\n    }\n  }, [stations, validStations]);\n  useEffect(() => {\n    if (followGps) {\n      centerGps();\n    }\n  }, [followGps, centerGps]);\n\n  function selectedNearestStation() {\n    if (map) {\n      const station = nearestStation(position, validStations, preferBikes);\n\n      if (station) {\n        if (station === selectedStation) {\n          map.panTo(station);\n          map.setZoom(maxZoom);\n        } else {\n          if (followGps) {\n            setFollowGps(false);\n          }\n          setSelectedStation(station);\n        }\n      }\n    }\n  }\n\n  function showInfo(id: number) {\n    setSelectedStation(\n      validStations.filter((station) => station.number === id).shift(),\n    );\n  }\n\n  function hideInfo() {\n    setSelectedStation(undefined);\n  }\n\n  function renderInfoWindow() {\n    if (!map || !selectedStation) {\n      return null;\n    }\n\n    const {number} = selectedStation;\n\n    return (\n      <InfoWindow\n        anchorId={`station-${number}`}\n        onCloseClick={hideInfo}\n        visible\n      >\n        <StationInfo fetchedAt={fetchedAt} station={selectedStation} />\n      </InfoWindow>\n    );\n  }\n\n  function renderGpsMarker() {\n    if (!map || !position || !position.coords || !position.timestamp) {\n      return null;\n    }\n\n    return (\n      <GpsMarker coords={position.coords} timestamp={position.timestamp} />\n    );\n  }\n\n  function handleDragStart() {\n    if (followGps) {\n      setFollowGps(false);\n    }\n\n    if (centered) {\n      setCentered(false);\n    }\n  }\n\n  function handleGpsCenter() {\n    if (followGps) {\n      if (centered) {\n        if (followGps) {\n          setFollowGps(false);\n        }\n\n        if (centered) {\n          setCentered(false);\n        }\n      } else {\n        centerGps();\n      }\n    } else if (!followGps) {\n      setFollowGps(true);\n    }\n  }\n\n  function handleTogglePreference() {\n    setPreferBikes((value) => !value);\n  }\n\n  return (\n    <div className={styles.MapContainer}>\n      <MapBox\n        apiKey=\"AIzaSyBXrYScIU6sWYUWLLlovYhzq-bLzwTgAoc\"\n        opts={{\n          center: location,\n          zoom: defaultZoom,\n          maxZoom,\n        }}\n        onClick={hideInfo}\n        onDragStart={handleDragStart}\n        LoadingComponent={<Loader />}\n        useDrawing\n        useGeometry\n        usePlaces\n        useVisualization\n      />\n      <BicyclingLayer />\n      <CustomControl bindingPosition=\"BOTTOM_CENTER\">\n        <CustomButton onClick={updateStations}>\n          <RefreshImage className={styles.ButtonImage} />\n        </CustomButton>\n      </CustomControl>\n      <CustomControl bindingPosition=\"BOTTOM_CENTER\">\n        <CustomButton\n          disabled={!isValidPosition(position)}\n          onClick={handleGpsCenter}\n        >\n          <GpsImage\n            className={styles.ButtonImage}\n            style={{\n              fill: followGps ? '#008ABF' : '#000',\n              fillOpacity: isValidPosition(position) ? 1 : 0.25,\n            }}\n            focusable=\"false\"\n            aria-hidden=\"true\"\n          />\n        </CustomButton>\n      </CustomControl>\n      <CustomControl bindingPosition=\"BOTTOM_CENTER\">\n        <CustomButton onClick={selectedNearestStation}>\n          {preferBikes ? (\n            <BikeImage className={styles.ButtonImage} />\n          ) : (\n            <SlotImage\n              className={styles.ButtonImage}\n              style={{fill: '#008ABF'}}\n            />\n          )}\n        </CustomButton>\n      </CustomControl>\n      <CustomControl bindingPosition=\"RIGHT_TOP\">\n        <CustomButton onClick={handleTogglePreference}>\n          {preferBikes ? (\n            <BikeImage className={styles.ButtonImage} />\n          ) : (\n            <SlotImage\n              className={styles.ButtonImage}\n              style={{fill: '#008ABF'}}\n            />\n          )}\n        </CustomButton>\n      </CustomControl>\n      {map && validStations.length > 0 && (\n        <MarkerClusterer>\n          {validStations.map(({bikes, free, lat, lng, number, total}) => {\n            return (\n              <StationMarker\n                key={number}\n                bikes={bikes}\n                free={free}\n                id={number}\n                lat={lat}\n                lng={lng}\n                preferBikes={preferBikes}\n                showInfo={showInfo}\n                total={total}\n              />\n            );\n          })}\n        </MarkerClusterer>\n      )}\n      {renderGpsMarker()}\n      {renderInfoWindow()}\n    </div>\n  );\n}\n\nexport function nearestStation(\n  position: Position | undefined,\n  stations: ValidStation[],\n  preferNearestBike: boolean | undefined,\n) {\n  if (!position || stations.length === 0) {\n    return undefined;\n  }\n\n  const google = googleMapsAsync(false);\n\n  const source = new google.maps.LatLng(\n    position.coords.latitude,\n    position.coords.longitude,\n  );\n\n  return stations\n    .map((station) => ({\n      station,\n      distance: google.maps.geometry.spherical.computeDistanceBetween(\n        source,\n        new google.maps.LatLng(station.lat, station.lng),\n      ),\n    }))\n    .filter(\n      ({station: {bikes, errors, free, operative}}) =>\n        preferNearestBike == null ||\n        ((!errors || !errors.length) &&\n          operative &&\n          (preferNearestBike ? bikes > 0 : free > 0)),\n    )\n    .sort((left, right) => left.distance - right.distance)[0].station;\n}\n\nfunction stationCollectionComparer(prev: Station[], next: Station[]) {\n  if (prev.length !== next.length) {\n    return false;\n  }\n\n  const prevSorted = prev.sort(\n    ({number: aId = 0}, {number: bId = 0}) => aId - bId,\n  );\n  const nextSorted = next.sort(\n    ({number: aId = 0}, {number: bId = 0}) => aId - bId,\n  );\n\n  return prevSorted.every((prev, i) => stationComparer(prev, nextSorted[i]));\n}\n\nfunction stationComparer(prev: Station, next: Station) {\n  return (\n    prev.number === next.number &&\n    prev.valid === next.valid &&\n    JSON.stringify(prev.data) === JSON.stringify(next.data)\n  );\n}\n\nfunction gpsCenter(position: Position | undefined) {\n  if (position) {\n    const {\n      coords: {latitude, longitude},\n    } = position;\n\n    const google = googleMapsAsync();\n\n    return new google.maps.LatLng(latitude, longitude);\n  }\n\n  return undefined;\n}\n\nfunction gpsZoom(position: Position | undefined, max = maxZoom) {\n  if (position) {\n    const {\n      coords: {accuracy},\n    } = position;\n\n    // magic number explained here: https://gis.stackexchange.com/a/111589\n    return Math.min(max, Math.max(1, Math.log2(591657550 / accuracy) - 6));\n  }\n\n  return undefined;\n}\n\nfunction isValidPosition(position: Position | undefined) {\n  return (\n    position &&\n    position.coords.latitude !== 0 &&\n    position.coords.longitude !== 0\n  );\n}\n","import React, {useCallback, useContext, useState, useEffect} from 'react';\nimport MarkerClustererPlus from '@google/markerclustererplus';\nimport {GoogleMapContext} from '@googlemap-react/core';\nimport {Props} from '@shopify/useful-types';\nimport {useGoogleNamespace} from 'utilities/google';\n\ntype Context = Props<typeof GoogleMapContext.Provider>['value'];\ntype Action = Context['dispatch'] extends (action: infer T) => void ? T : never;\n\nexport function useMarkerClusterer() {\n  const {dispatch, state} = useContext(GoogleMapContext);\n  const [clusterer, setClusterer] = useState<MarkerClustererPlus>();\n  const [context, setContext] = useState<Context>();\n  const Provider = useCallback(\n    (props: {children?: any}) =>\n      context ? <GoogleMapContext.Provider value={context} {...props} /> : null,\n    [context],\n  );\n  const [google] = useGoogleNamespace();\n  useEffect(() => {\n    if (!clusterer && state && state.map) {\n      setClusterer(\n        new MarkerClustererPlus(state.map, [], {\n          averageCenter: true,\n          gridSize: 60,\n          maxZoom: 17,\n          enableRetinaIcons: true,\n        }),\n      );\n    }\n    if (!context && clusterer && state) {\n      setContext({\n        dispatch(action: Action) {\n          const {type, id, object} = action;\n\n          if (clusterer && state && state.objects) {\n            switch (type) {\n              case 'add_object':\n                if (object && object instanceof google.maps.Marker) {\n                  clusterer.addMarker(object);\n                }\n                break;\n              case 'remove_object':\n                if (id) {\n                  const marker = state.objects.get(id);\n\n                  if (marker && marker instanceof google.maps.Marker) {\n                    clusterer.removeMarker(marker);\n                  }\n                }\n                break;\n            }\n          }\n\n          dispatch(action);\n        },\n        state,\n      });\n    }\n  }, [clusterer, context, dispatch, google.maps.Marker, state]);\n\n  return Provider;\n}\n","import {useCallback, useDebugValue, useEffect, useState} from 'react';\nimport moment from 'moment';\nimport {QueryParams} from './useQueryParams';\n\ninterface UsePositionProps {\n  options?: PositionOptions;\n  params: QueryParams | undefined;\n}\n\nconst defaultOptions: PositionOptions = {\n  enableHighAccuracy: true,\n};\n\nexport function usePosition({options}: UsePositionProps) {\n  const [watchId, setWatchId] = useState<number>();\n  const [position, setPosition] = useState<Position>();\n  const [error, setError] = useState<PositionError>();\n  const updatePosition = useCallback(() => {\n    if (typeof navigator !== 'undefined') {\n      navigator.geolocation.getCurrentPosition(\n        setPosition,\n        setError,\n        options || defaultOptions,\n      );\n    }\n  }, [options]);\n  useEffect(() => {\n    if (!watchId && typeof navigator !== 'undefined') {\n      const id = navigator.geolocation.watchPosition(\n        setPosition,\n        setError,\n        options || defaultOptions,\n      );\n\n      setWatchId(id);\n\n      return () => {\n        if (watchId) {\n          navigator.geolocation.clearWatch(watchId);\n\n          setWatchId(undefined);\n        }\n      };\n    }\n\n    return undefined;\n  }, [options, watchId]);\n  useDebugValue(\n    position\n      ? `[${position.coords.latitude}, ${position.coords.longitude}] @ ${moment(\n          position.timestamp,\n        ).fromNow()}`\n      : 'Loading...',\n  );\n\n  return {\n    error,\n    position,\n    updatePosition,\n  };\n}\n","import {Station} from 'models';\nimport {googleMapsAsync} from 'utilities/google';\nimport {Smoove} from './transform';\n\nenum StationSourceType {\n  Smoove,\n}\n\nexport type SourceName = 'vancouver' | 'test';\n\nexport interface StationSourceConfig {\n  location: google.maps.LatLngLiteral;\n  name: string;\n  options?: any;\n  type: keyof typeof StationSourceType;\n  uri: string;\n  cors?: boolean;\n}\n\nconst configMap = new Map<SourceName, StationSourceConfig>([\n  [\n    'test',\n    {\n      location: {\n        lat: 49.279627,\n        lng: -123.121116,\n      },\n      name: 'Test Data',\n      type: 'Smoove',\n      uri: '/test_data',\n    },\n  ],\n  [\n    'vancouver',\n    {\n      location: {\n        lat: 49.279627,\n        lng: -123.121116,\n      },\n      name: 'Mobi Bike Vancouver',\n      type: 'Smoove',\n      uri: 'http://vancouver-ca.smoove.pro/api-public/stations',\n      cors: true,\n    },\n  ],\n]);\n\nexport function getConfig(key: SourceName) {\n  const config = configMap.get(key);\n\n  if (!config) {\n    throw new Error(`No station data for source '${key}'`);\n  }\n\n  return config;\n}\n\nexport function getConfigByLocation(location: google.maps.LatLngLiteral) {\n  const google = googleMapsAsync(false);\n\n  return Array.from<StationSourceConfig>(configMap.values())\n    .map((config) => ({\n      config,\n      distance: google.maps.geometry.spherical.computeDistanceBetween(\n        new google.maps.LatLng(location),\n        new google.maps.LatLng(config.location.lat, config.location.lng),\n      ),\n    }))\n    .sort((left, right) => left.distance - right.distance)[0].config;\n}\n\nexport type StationSourceTransform = (response: any) => Station[];\n\nexport function mapTransform({type}: StationSourceConfig) {\n  switch (type) {\n    case 'Smoove':\n      return Smoove;\n    default:\n      throw new Error(`Invalid Configuration '${type}'`);\n  }\n}\n","import {createStation, StationData} from 'models';\n\nexport interface SmooveStation {\n  name: string;\n  coordinates: string;\n  // eslint-disable-next-line babel/camelcase\n  total_slots: number;\n  // eslint-disable-next-line babel/camelcase\n  free_slots: number;\n  // eslint-disable-next-line babel/camelcase\n  avl_bikes: number;\n  operative: boolean;\n  style: string;\n}\n\nexport interface Response {\n  result: SmooveStation[];\n}\n\nexport function parseLatLng({coordinates}: SmooveStation) {\n  try {\n    const match = /^\\s*(-?\\d+\\.\\d+)\\s*,\\s*(-?\\d+\\.\\d+)\\s*$/.exec(coordinates);\n\n    if (!match) {\n      throw new Error(`Unable to parse \"lat, lng\" from ${coordinates}`);\n    }\n\n    return {\n      lat: Number(match[1]),\n      lng: Number(match[2]),\n    };\n  } catch (error) {\n    return {\n      latLngError: error,\n    };\n  }\n}\n\nexport function parseNameAndNumber({name}: SmooveStation) {\n  try {\n    const match = /^(\\d+)\\s+(.*)$/.exec(name);\n\n    if (!match) {\n      throw new Error(`Unable to parse \"number name\" from ${name}`);\n    }\n\n    return {\n      name: match[2],\n      number: Number(match[1]),\n    };\n  } catch (error) {\n    return {\n      nameNumberError: error,\n    };\n  }\n}\n\nexport function create(smooveData: SmooveStation) {\n  const {nameNumberError, name, number} = parseNameAndNumber(smooveData);\n  const {lat, latLngError, lng} = parseLatLng(smooveData);\n  const data: StationData = {\n    ...smooveData,\n    bikes: smooveData.avl_bikes,\n    free: smooveData.free_slots,\n    lat,\n    lng,\n    name,\n    number,\n    operative: smooveData.operative,\n    total: smooveData.total_slots,\n    errors: [],\n  };\n\n  if (nameNumberError) {\n    data.errors.push(nameNumberError);\n  }\n\n  if (latLngError) {\n    data.errors.push(latLngError);\n  }\n\n  return createStation(data);\n}\n\nexport function Smoove({result}: Response) {\n  return result.map(create);\n}\n","export interface StationData extends Partial<google.maps.LatLngLiteral> {\n  bikes: number;\n  errors: any[];\n  free: number;\n  name: string | undefined;\n  number: number | undefined;\n  operative: boolean;\n  total: number;\n}\n\nexport interface Station extends StationData {\n  data: StationData;\n  valid?: boolean;\n}\n\nexport interface ValidStation extends Station {\n  lat: number;\n  lng: number;\n  name: string;\n  number: number;\n  valid: true;\n}\n\nexport function createStation(data: StationData): Station {\n  return {\n    data,\n    valid: [\n      Number.isInteger(data.bikes),\n      Number.isInteger(data.free),\n      Number.isInteger(data.total),\n      data.number != null && Number.isInteger(data.number) && data.number > 0,\n      data.lat != null && Number.isFinite(data.lat) && data.lat !== 0,\n      data.lng != null && Number.isFinite(data.lng) && data.lng !== 0,\n      data.name != null && /^\\w/.test(data.name),\n      data.errors.length === 0,\n    ].every((x) => x),\n    ...data,\n  };\n}\n","import fetch from 'isomorphic-fetch';\nimport moment from 'moment';\nimport {Station} from 'models';\nimport {\n  getConfig,\n  getConfigByLocation,\n  mapTransform,\n  SourceName,\n  StationSourceConfig,\n  StationSourceTransform,\n} from './config';\n\nexport interface StationSourceResult {\n  config: StationSourceConfig;\n  error?: any;\n  fetchedAt: moment.Moment;\n  stations: Station[];\n}\n\nexport interface Options {\n  debug?: boolean;\n}\n\nexport class StationSource {\n  public static create(\n    configOrKey: SourceName | StationSourceConfig,\n    {debug}: Options,\n  ) {\n    const config =\n      typeof configOrKey === 'string' ? getConfig(configOrKey) : configOrKey;\n\n    return new StationSource(config, mapTransform(config), debug);\n  }\n\n  public static nearest(location: google.maps.LatLngLiteral, options: Options) {\n    return StationSource.create(getConfigByLocation(location), options);\n  }\n\n  readonly config: StationSourceConfig;\n  readonly verboseOutput: boolean;\n  private readonly transform: StationSourceTransform;\n\n  constructor(\n    config: StationSourceConfig,\n    transform: StationSourceTransform,\n    // eslint-disable-next-line no-process-env\n    verboseOutput = process.env.NODE_ENV !== 'production',\n  ) {\n    this.config = config;\n    this.transform = transform;\n    this.verboseOutput = verboseOutput;\n  }\n\n  async getJSON() {\n    const uri = this.config.cors\n      ? `https://cors.io/?${this.config.uri}`\n      : this.config.uri;\n    this.debug(`Fetching stations from '${uri}' ...`);\n\n    const response = await fetch(uri, {\n      headers: this.config.options ? this.config.options.headers : undefined,\n    });\n\n    const json = response.json();\n\n    this.debug('Fetch Response', json);\n\n    return json;\n  }\n\n  async getStations(): Promise<StationSourceResult> {\n    try {\n      const json = await this.getJSON();\n\n      const stations = this.transform(json);\n\n      this.debug(`Fetched ${stations.length} stations`);\n\n      return {\n        config: this.config,\n        fetchedAt: moment(),\n        stations,\n      };\n    } catch (error) {\n      this.debug(`Fetch failed: ${error.message || 'Unknown Error'}`, error);\n\n      return {\n        config: this.config,\n        error,\n        fetchedAt: moment(),\n        stations: [],\n      };\n    }\n  }\n\n  protected debug(message: string, ...args: any[]) {\n    if (this.verboseOutput) {\n      // eslint-disable-next-line no-console\n      console.log(message, args);\n    }\n  }\n}\n","import {useCallback, useDebugValue, useEffect, useMemo, useState} from 'react';\nimport {SourceName, StationSource, StationSourceResult} from 'data';\nimport {QueryParams} from './useQueryParams';\n\ninterface UseStationsProps {\n  params: QueryParams | undefined;\n}\n\nexport const defaultSourceName: SourceName = 'vancouver';\n\nfunction getSourceName(params: QueryParams | undefined) {\n  if (!params) {\n    return {};\n  }\n\n  return {\n    debug: Boolean(params.get('debug')),\n    sourceName: (params.get('source') ||\n      (params.get('test') && 'test') ||\n      defaultSourceName) as SourceName,\n  };\n}\n\nexport function useStations({params}: UseStationsProps) {\n  const {debug, sourceName} = getSourceName(params);\n  const [stationSourceResult, setStationSourceResult] = useState<\n    StationSourceResult\n  >();\n  const source = useMemo(() => {\n    if (sourceName) {\n      return StationSource.create(sourceName, {debug});\n    }\n\n    return null;\n  }, [debug, sourceName]);\n  const updateStations = useCallback(() => {\n    if (source) {\n      return source.getStations().then(setStationSourceResult);\n    }\n\n    return undefined;\n  }, [source]);\n  useEffect(() => {\n    if (source) {\n      updateStations();\n    }\n  }, [source, updateStations]);\n  useDebugValue(\n    stationSourceResult\n      ? `${\n          stationSourceResult.stations.length\n        } stations loaded (${stationSourceResult.fetchedAt.fromNow()})`\n      : 'Loading...',\n  );\n\n  return {\n    stationSourceResult,\n    updateStations,\n  };\n}\n","/* eslint-disable */\n\n// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\n    ),\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as {env: {[key: string]: string}}).env.PUBLIC_URL,\n      window.location.href,\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA',\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.',\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.',\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {App} from './App';\nimport {unregister} from './serviceWorker';\n\nimport 'styles/_global.scss';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nunregister();\n","import React from 'react';\nimport {GoogleMapProvider} from '@googlemap-react/core';\nimport {Loader} from 'components';\nimport {Header, StationMap} from './components';\nimport {useQueryParams, usePosition, useStations} from './hooks';\n\nimport styles from './App.module.scss';\n\nexport function App() {\n  const {params} = useQueryParams();\n  const {position} = usePosition({params});\n  const {stationSourceResult, updateStations} = useStations({params});\n  return (\n    <div className={styles.Container}>\n      <Header />\n      <div className={styles.Content}>\n        {stationSourceResult ? (\n          <GoogleMapProvider>\n            <StationMap\n              fetchedAt={stationSourceResult.fetchedAt}\n              location={stationSourceResult.config.location}\n              stations={stationSourceResult.stations}\n              position={position}\n              updateStations={updateStations}\n            />\n          </GoogleMapProvider>\n        ) : (\n          <Loader />\n        )}\n      </div>\n    </div>\n  );\n}\n","import {useDebugValue, useEffect, useState} from 'react';\n\nexport type QueryParams = Map<string, string>;\n\nexport function useQueryParams() {\n  const [params, setParams] = useState<QueryParams>();\n  useEffect(() => {\n    if (typeof window !== 'undefined' && !params) {\n      const params = new Map<string, string>();\n\n      new URLSearchParams(window.location.search).forEach((value, key) => {\n        params.set(key.toLowerCase(), value);\n      });\n\n      setParams(params);\n    }\n  }, [params]);\n  useDebugValue(\n    typeof window === 'undefined' ? 'Loading...' : window.location.search,\n  );\n\n  return {\n    params,\n  };\n}\n"],"sourceRoot":""}