{"version":3,"sources":["App/components/Header/Header.module.scss","components/Loader/Loader.module.scss","App/App.module.scss","config/env.ts","App/components/StationMap/components/CustomButton/CustomButton.module.scss","App/components/StationMap/StationMap.module.scss","components/Loader/Loader.tsx","App/components/Header/Header.tsx","utilities/google.ts","App/components/StationMap/components/CustomButton/CustomButton.tsx","App/components/StationMap/components/CustomControl/CustomControl.ts","App/components/StationMap/components/GpsMarker/GpsMarker.tsx","App/components/StationMap/components/StationInfo/StationInfo.tsx","App/components/StationMap/components/StationMarker/StationMarker.tsx","App/components/StationMap/images/bike.svg","App/components/StationMap/images/gps.svg","App/components/StationMap/images/refresh.svg","App/components/StationMap/images/slot.svg","App/components/StationMap/StationMap.tsx","App/components/StationMap/hooks/useMarkerClusterer.tsx","App/hooks/usePosition.ts","data/config.ts","data/transform/Smoove.ts","models/Station.ts","data/StationSource.ts","App/hooks/useStations.ts","serviceWorker.ts","index.tsx","App/App.tsx","App/hooks/useQueryParams.ts"],"names":["module","exports","Header","HeaderLogo","HeaderContent","LoadingContainer","Loader","Container","Content","process","dotenv__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","n","dotenv","config","env","CustomButton","MapContainer","ButtonImage","loaders","_ref","_ref$name","name","Math","floor","random","length","react_default","a","createElement","className","styles","dist_default","href","alt","src","metadata","description","mockGoogle","maps","googleMapsAsync","allowMock","arguments","undefined","window","google","Error","useGoogleNamespace","props","Object","objectWithoutProperties","assign","classNames","type","CustomControl","_ref$bindingPosition","bindingPosition","children","_ref$onMounted","onMounted","onContainerMounted","state","useContext","GoogleMapContext","_useState","useState","_useState2","slicedToArray","mounted","setMounted","_useState3","document","container","_useGoogleNamespace","useLayoutEffect","map","controls","ControlPosition","push","ReactDOM","createPortal","style","margin","GpsMarker","_ref$color","color","coords","timestamp","radius","accuracy","heading","position","lat","latitude","lng","longitude","Fragment","index_esm","opts","center","fillColor","strokeColor","fillOpacity","strokeWeight","icon","anchor","Point","path","SymbolPath","FORWARD_CLOSED_ARROW","rotation","scale","zIndex","Marker","MAX_ZINDEX","StationInfo","fetchedAt","station","concat","number","toString","padStart","operative","bikes","free","total","rel","target","fromNow","colors","low","mid","high","StationMarker","id","preferBikes","showInfo","useMemo","colorForCount","strokeOpacity","label","text","fontSize","fontWeight","handleClick","useCallback","onClick","count","_extends","i","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","bike_ref2","d","bike_SvgBike","svgRef","viewBox","ref","ForwardRef","forwardRef","p","gps_extends","gps_objectWithoutProperties","gps_objectWithoutPropertiesLoose","gps_ref2","gps_SvgGps","gps_ForwardRef","refresh_extends","refresh_objectWithoutProperties","refresh_objectWithoutPropertiesLoose","refresh_ref2","refresh_SvgRefresh","refresh_ForwardRef","slot_extends","slot_objectWithoutProperties","slot_objectWithoutPropertiesLoose","slot_ref2","slot_SvgSlot","slot_ForwardRef","defaultZoom","maxZoom","StationMap","location","stations","updateStations","_useContext$state","_useContext$state$map","followGps","setFollowGps","_useState4","centered","setCentered","_useState5","_useState6","validStations","setValidStations","_useState7","_useState8","selectedStation","setSelectedStation","_useState9","_useState10","setPreferBikes","MarkerClusterer","_useContext","dispatch","clusterer","MarkerClustererPlus","averageCenter","gridSize","enableRetinaIcons","context","setContext","Provider","value","useEffect","action","object","objects","addMarker","marker","get","removeMarker","useMarkerClusterer","selectedNearestStation","preferNearestBike","LatLng","distance","geometry","spherical","computeDistanceBetween","filter","_ref3","_ref3$station","errors","sort","left","right","nearestStation","panTo","setZoom","centerGps","_position$coords","gpsCenter","zoom","max","min","log2","gpsZoom","setCenter","shift","hideInfo","renderInfoWindow","anchorId","onCloseClick","visible","renderGpsMarker","handleDrag","handleGpsCenter","handleTogglePreference","updatedStations","forEach","valid","console","debug","prev","next","prevSorted","_ref4","_ref5","_ref4$number","aId","_ref5$number","bId","nextSorted","_ref6","_ref7","_ref6$number","_ref7$number","every","JSON","stringify","data","stationComparer","stationCollectionComparer","apiKey","onDrag","LoadingComponent","useDrawing","useGeometry","usePlaces","useVisualization","disabled","isValidPosition","fill","focusable","aria-hidden","_ref2","defaultOptions","enableHighAccuracy","StationSourceType","create","smooveData","_parseNameAndNumber","match","exec","Number","error","nameNumberError","parseNameAndNumber","_parseLatLng","coordinates","latLngError","parseLatLng","objectSpread","avl_bikes","free_slots","total_slots","isInteger","isFinite","test","x","createStation","Smoove","result","configMap","Map","uri","cors","StationSource","transform","verboseOutput","classCallCheck","createClass","configOrKey","getConfig","mapTransform","options","Array","from","values","getConfigByLocation","_getJSON","asyncToGenerator","regenerator_default","mark","_callee","response","json","wrap","_context","fetch","headers","sent","abrupt","stop","_getStations","_callee2","_context2","getJSON","moment","t0","message","_len","args","_key","log","defaultSourceName","useStations","_getSourceName","params","Boolean","sourceName","getSourceName","stationSourceResult","setStationSourceResult","getStations","then","useDebugValue","hostname","render","setParams","URLSearchParams","search","set","toLowerCase","useQueryParams","watchId","setWatchId","setPosition","setError","handlePositionChanged","handleError","updatePosition","navigator","geolocation","getCurrentPosition","watchPosition","clearWatch","usePosition","_useStations","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.d39ff02b.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Header\":\"Header_Header__1XO4R\",\"HeaderLogo\":\"Header_HeaderLogo__1dLj0\",\"HeaderContent\":\"Header_HeaderContent__3wHIB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LoadingContainer\":\"Loader_LoadingContainer__1zHC6\",\"Loader\":\"Loader_Loader__3w7V8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Container\":\"App_Container__Sk-T4\",\"Content\":\"App_Content__2YSLD\"};","import dotenv from 'dotenv';\n\ndotenv.config();\nconst {env = {}} = typeof process === 'undefined' ? {} : process;\n\nexport {env};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"CustomButton\":\"CustomButton_CustomButton__2nL-I\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"MapContainer\":\"StationMap_MapContainer__2mxHY\",\"ButtonImage\":\"StationMap_ButtonImage__1ypMu\"};","import React from 'react';\nimport Spinner, {SpinnerProps} from 'react-spinkit';\n\nimport styles from './Loader.module.scss';\n\ntype SpinnerName = 'double-bounce' | 'chasing-dots' | 'circle' | 'cube-grid';\nexport const loaders: Required<SpinnerProps['name']>[] = [\n  'double-bounce',\n  'chasing-dots',\n  'circle',\n  'cube-grid',\n];\n\nexport function randomLoaderName() {\n  return loaders[Math.floor(Math.random() * loaders.length)] as SpinnerName;\n}\n\nexport interface Props {\n  name?: SpinnerName;\n}\n\nexport function Loader({name = randomLoaderName()}: Props) {\n  if (name) {\n    return (\n      <div className={styles.LoadingContainer}>\n        <Spinner className={styles.Loader} name={name} />\n      </div>\n    );\n  }\n\n  return null;\n}\n","import React from 'react';\nimport {metadata} from 'config';\n\nimport styles from './Header.module.scss';\n\nexport function Header() {\n  return (\n    <div className={styles.Header}>\n      <div className={styles.HeaderLogo}>\n        <a href=\"https://www.mobibikes.ca/en#the-map\">\n          <img\n            alt=\"logo\"\n            src=\"https://www.mobibikes.ca/sites/all/themes/smoove_bootstrap/logo.png\"\n          />\n        </a>\n      </div>\n      <div className={styles.HeaderContent}>\n        <h1>{metadata.description}</h1>\n      </div>\n    </div>\n  );\n}\n","/* global google */\n\ndeclare global {\n  interface Window {\n    google: typeof google;\n  }\n}\n\nconst mockGoogle: any = {\n  maps: {},\n};\n\nexport type google = typeof google;\n\nexport function googleMapsAsync(allowMock = true): typeof google {\n  if (window.google) {\n    return window.google;\n  }\n\n  if (allowMock) {\n    return mockGoogle;\n  }\n\n  throw new Error('google.maps API has not yet loaded');\n}\n\nexport function useGoogleNamespace(): [typeof google, () => typeof google] {\n  return [googleMapsAsync(), googleMapsAsync];\n}\n","import React, {ButtonHTMLAttributes} from 'react';\nimport classNames from 'classnames';\n\nimport styles from './CustomButton.module.scss';\n\nexport function CustomButton({\n  className,\n  ...props\n}: ButtonHTMLAttributes<HTMLButtonElement>) {\n  return (\n    <button\n      className={classNames(styles.CustomButton, className)}\n      type=\"button\"\n      {...props}\n    />\n  );\n}\n","import {ReactNode, useContext, useLayoutEffect, useState} from 'react';\nimport ReactDOM from 'react-dom';\nimport {GoogleMapContext} from '@googlemap-react/core';\nimport {google, useGoogleNamespace} from 'utilities/google';\n\ninterface Props {\n  bindingPosition: keyof typeof google.maps.ControlPosition;\n  children?: ReactNode;\n  onMounted?(container: HTMLDivElement): void;\n}\n\nexport function CustomControl({\n  bindingPosition = 'RIGHT_TOP',\n  children,\n  onMounted = onContainerMounted,\n}: Props) {\n  const {state} = useContext(GoogleMapContext);\n  const [mounted, setMounted] = useState(false);\n  const [container] = useState(document.createElement('div'));\n  const [google] = useGoogleNamespace();\n  useLayoutEffect(() => {\n    if (state && state.map && !mounted) {\n      state.map.controls[google.maps.ControlPosition[bindingPosition]].push(\n        container,\n      );\n\n      onMounted(container);\n\n      setMounted(true);\n    }\n  }, [\n    bindingPosition,\n    container,\n    google.maps.ControlPosition,\n    mounted,\n    onMounted,\n    state,\n    state.map,\n  ]);\n\n  return typeof document === 'undefined'\n    ? null\n    : ReactDOM.createPortal(children, container);\n}\n\nexport function onContainerMounted(container: HTMLDivElement) {\n  container.style.margin = '10px 10px 23px';\n}\n","import React from 'react';\nimport {Circle, Marker} from '@googlemap-react/core';\nimport {useGoogleNamespace} from 'utilities/google';\n\ninterface Props {\n  color?: string;\n  coords: Coordinates;\n  timestamp: number;\n}\n\nexport function GpsMarker({color = 'magenta', coords, timestamp}: Props) {\n  const [google] = useGoogleNamespace();\n  const {accuracy: radius, heading, latitude, longitude} = coords;\n\n  const position: google.maps.LatLngLiteral = {\n    lat: latitude,\n    lng: longitude,\n  };\n\n  return (\n    <>\n      <Circle\n        opts={{\n          center: position,\n          radius,\n          fillColor: color,\n          strokeColor: color,\n          fillOpacity: 0.25,\n          strokeWeight: 1,\n        }}\n      />\n      <Marker\n        opts={{\n          icon: {\n            anchor: new google.maps.Point(0, 2.6),\n            path: google.maps.SymbolPath.FORWARD_CLOSED_ARROW,\n            strokeColor: color,\n            fillColor: color,\n            fillOpacity: 1,\n            rotation: heading || 0,\n            scale: 10,\n            strokeWeight: 1,\n          },\n          position,\n          zIndex: google.maps.Marker.MAX_ZINDEX,\n        }}\n      />\n    </>\n  );\n}\n","import React from 'react';\nimport moment from 'moment';\nimport {ValidStation} from 'models';\n\ninterface Props {\n  fetchedAt: moment.Moment;\n  station: ValidStation;\n}\n\nexport function StationInfo({fetchedAt, station}: Props) {\n  return (\n    <ul>\n      <li>{`[${station.number.toString().padStart(4, '0')}] ${station.name}${\n        station.operative ? '' : ' (CLOSED)'\n      }`}</li>\n      <li>{`${station.bikes} bikes / ${station.free} slots (${\n        station.total\n      } total)`}</li>\n      <li>\n        <a\n          rel=\"noopener noreferrer\"\n          target=\"_blank\"\n          href={`https://www.google.com/maps/dir/?api=${1}&travelmode=bicycling&destination=${\n            station.lat\n          },${station.lng}`}\n        >{`${station.lat}, ${station.lng}`}</a>\n      </li>\n      <li>{`Last Updated: ${fetchedAt.fromNow()}`}</li>\n    </ul>\n  );\n}\n","import React, {useCallback, useMemo} from 'react';\nimport {Marker} from '@googlemap-react/core';\n\nexport const colors = {\n  low: 'salmon',\n  mid: 'sandybrown',\n  high: 'mediumseagreen',\n};\n\nexport interface Props {\n  bikes: number;\n  free: number;\n  id: number;\n  lat: number;\n  lng: number;\n  preferBikes: boolean;\n  showInfo(id: number): void;\n  total: number;\n}\n\nexport function StationMarker({\n  bikes,\n  free,\n  id,\n  lat,\n  lng,\n  preferBikes,\n  showInfo,\n  total,\n}: Props) {\n  const opts = useMemo<google.maps.MarkerOptions>(\n    () => ({\n      icon: {\n        path: 'M-20,0a20,20 0 1,0 40,0a20,20 0 1,0 -40,0',\n        fillColor: colorForCount(preferBikes ? bikes : free, total),\n        fillOpacity: 1,\n        strokeColor: 'white',\n        strokeOpacity: 1,\n      },\n      label: {\n        color: 'white',\n        text: `${bikes} | ${free}`,\n        fontSize: '0.75rem',\n        fontWeight: 'bold',\n      },\n      position: {lat, lng},\n    }),\n    [bikes, free, lat, lng, preferBikes, total],\n  );\n  const handleClick = useCallback(() => {\n    return showInfo(id);\n  }, [id, showInfo]);\n\n  return <Marker id={`station-${id}`} onClick={handleClick} opts={opts} />;\n}\n\nexport function colorForCount(count: number, total: number) {\n  const fraction = count / total;\n  if (fraction >= 0.5) {\n    return colors.high;\n  }\n\n  return count >= 0.25 ? colors.mid : colors.low;\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M408,132.6c25.5,0,45.9-20.4,45.9-45.9S433.5,40.8,408,40.8s-45.9,20.4-45.9,45.9S382.5,132.6,408,132.6z M484.5,316.2 c-71.4,0-127.5,56.1-127.5,127.5s56.1,127.5,127.5,127.5S612,515.101,612,443.7S555.9,316.2,484.5,316.2z M484.5,532.95 c-48.45,0-89.25-40.801-89.25-89.25c0-48.451,40.8-89.25,89.25-89.25s89.25,40.799,89.25,89.25 C573.75,492.149,532.95,532.95,484.5,532.95z M377.4,265.2h107.1v-45.9h-81.6l-48.45-84.15c-7.65-12.75-20.4-20.4-38.25-20.4 c-12.75,0-22.95,5.1-30.6,12.75l-94.35,94.35c-7.65,7.65-12.75,17.85-12.75,30.6c0,15.3,7.65,30.6,20.4,38.25l86.7,51v127.5h45.9 V303.45l-56.1-43.35l58.65-58.65L377.4,265.2z M127.5,316.2C56.1,316.2,0,372.3,0,443.7s56.1,127.5,127.5,127.5 S255,515.101,255,443.7S198.9,316.2,127.5,316.2z M127.5,532.95c-48.45,0-89.25-40.801-89.25-89.25 c0-48.451,40.8-89.25,89.25-89.25s89.25,40.799,89.25,89.25C216.75,492.149,175.95,532.95,127.5,532.95z\"\n});\n\nvar SvgBike = function SvgBike(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 612 612\",\n    ref: svgRef\n  }, props), _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgBike, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/bike.44bc6267.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M280.5,178.5c-56.1,0-102,45.9-102,102c0,56.1,45.9,102,102,102c56.1,0,102-45.9,102-102     C382.5,224.4,336.6,178.5,280.5,178.5z M507.45,255C494.7,147.9,410.55,63.75,306,53.55V0h-51v53.55     C147.9,63.75,63.75,147.9,53.55,255H0v51h53.55C66.3,413.1,150.45,497.25,255,507.45V561h51v-53.55     C413.1,494.7,497.25,410.55,507.45,306H561v-51H507.45z M280.5,459C181.05,459,102,379.95,102,280.5S181.05,102,280.5,102     S459,181.05,459,280.5S379.95,459,280.5,459z\"\n});\n\nvar SvgGps = function SvgGps(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 561 561\",\n    ref: svgRef\n  }, props), _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgGps, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/gps.9f3589a2.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M55.89,262.818c-3-26-0.5-51.1,6.3-74.3c22.6-77.1,93.5-133.8,177.6-134.8v-50.4c0-2.8,3.5-4.3,5.8-2.6l103.7,76.2         c1.7,1.3,1.7,3.9,0,5.1l-103.6,76.2c-2.4,1.7-5.8,0.2-5.8-2.6v-50.3c-55.3,0.9-102.5,35-122.8,83.2c-7.7,18.2-11.6,38.3-10.5,59.4         c1.5,29,12.4,55.7,29.6,77.3c9.2,11.5,7,28.3-4.9,37c-11.3,8.3-27.1,6-35.8-5C74.19,330.618,59.99,298.218,55.89,262.818z         M355.29,166.018c17.3,21.5,28.2,48.3,29.6,77.3c1.1,21.2-2.9,41.3-10.5,59.4c-20.3,48.2-67.5,82.4-122.8,83.2v-50.3         c0-2.8-3.5-4.3-5.8-2.6l-103.7,76.2c-1.7,1.3-1.7,3.9,0,5.1l103.6,76.2c2.4,1.7,5.8,0.2,5.8-2.6v-50.4         c84.1-0.9,155.1-57.6,177.6-134.8c6.8-23.2,9.2-48.3,6.3-74.3c-4-35.4-18.2-67.8-39.5-94.4c-8.8-11-24.5-13.3-35.8-5         C348.29,137.718,346.09,154.518,355.29,166.018z\"\n});\n\nvar SvgRefresh = function SvgRefresh(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 491.236 491.236\",\n    ref: svgRef\n  }, props), _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgRefresh, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/refresh.137b889f.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", null, React.createElement(\"path\", {\n  d: \"M408,0H51C22.95,0,0,22.95,0,51v357c0,28.05,22.95,51,51,51h357c28.05,0,51-22.95,51-51V51C459,22.95,436.05,0,408,0z  M173.4,265.2V357h-45.9V102h109.65c38.25,0,56.1,7.65,71.399,22.95c17.851,15.3,22.95,35.7,22.95,58.65 c0,25.5-7.65,45.9-22.95,58.65s-33.149,20.4-71.399,20.4H173.4V265.2z\"\n}), React.createElement(\"path\", {\n  d: \"M173.4,229.5v-91.8h58.65c17.851,0,30.601,5.1,38.25,15.3c7.65,10.2,12.75,17.85,12.75,30.6c0,15.3-5.1,22.95-12.75,33.15 c-7.649,7.65-17.85,12.75-35.7,12.75H173.4z\"\n}));\n\nvar SvgSlot = function SvgSlot(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 459 459\",\n    ref: svgRef\n  }, props), _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgSlot, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/slot.ae84d45d.svg\";\nexport { ForwardRef as ReactComponent };","import React, {useCallback, useContext, useEffect, useState} from 'react';\nimport {\n  BicyclingLayer,\n  GoogleMapContext,\n  InfoWindow,\n  MapBox,\n} from '@googlemap-react/core';\nimport moment from 'moment';\nimport {Loader} from 'components';\nimport {Station, ValidStation} from 'models';\nimport {googleMapsAsync} from 'utilities/google';\nimport {\n  CustomButton,\n  CustomControl,\n  GpsMarker,\n  StationInfo,\n  StationMarker,\n} from './components';\nimport {useMarkerClusterer} from './hooks';\nimport {BikeImage, GpsImage, RefreshImage, SlotImage} from './images';\n\nimport styles from './StationMap.module.scss';\n\nconst defaultZoom = 13;\nconst maxZoom = 17;\n\nexport interface Props {\n  fetchedAt: moment.Moment;\n  location: google.maps.LatLngLiteral;\n  stations: Station[];\n  position: Position | undefined;\n  updateStations(): void;\n}\n\nexport function StationMap({\n  fetchedAt,\n  location,\n  stations,\n  updateStations,\n  position,\n}: Props) {\n  const {state: {map = undefined} = {}} = useContext(GoogleMapContext);\n  const [followGps, setFollowGps] = useState(true);\n  const [centered, setCentered] = useState(false);\n  const [validStations, setValidStations] = useState<ValidStation[]>([]);\n  const [selectedStation, setSelectedStation] = useState<ValidStation>();\n  const [preferBikes, setPreferBikes] = useState(true);\n  const MarkerClusterer = useMarkerClusterer();\n  const selectedNearestStation = useCallback(() => {\n    if (map) {\n      const station = nearestStation(position, validStations, preferBikes);\n\n      if (station) {\n        if (station === selectedStation) {\n          map.panTo(station);\n          map.setZoom(maxZoom);\n        } else {\n          if (followGps) {\n            setFollowGps(false);\n          }\n          setSelectedStation(station);\n        }\n      }\n    }\n  }, [followGps, map, position, preferBikes, selectedStation, validStations]);\n  const centerGps = useCallback(() => {\n    if (map) {\n      const center = gpsCenter(position);\n      const zoom = gpsZoom(position);\n\n      if (center) {\n        map.setCenter(center);\n      }\n\n      if (zoom) {\n        map.setZoom(zoom);\n      }\n\n      if (!centered) {\n        setCentered(true);\n      }\n    }\n  }, [centered, map, position]);\n  const showInfo = useCallback(\n    (id: number) => {\n      setSelectedStation(\n        validStations.filter((station) => station.number === id).shift(),\n      );\n    },\n    [validStations],\n  );\n  const hideInfo = useCallback(() => {\n    setSelectedStation(undefined);\n  }, []);\n  const renderInfoWindow = useCallback(() => {\n    if (!map || !selectedStation) {\n      return null;\n    }\n\n    const {number} = selectedStation;\n\n    return (\n      <InfoWindow\n        anchorId={`station-${number}`}\n        onCloseClick={hideInfo}\n        visible\n      >\n        <StationInfo fetchedAt={fetchedAt} station={selectedStation} />\n      </InfoWindow>\n    );\n  }, [fetchedAt, hideInfo, map, selectedStation]);\n  const renderGpsMarker = useCallback(() => {\n    if (!map || !position || !position.coords || !position.timestamp) {\n      return null;\n    }\n\n    return (\n      <GpsMarker coords={position.coords} timestamp={position.timestamp} />\n    );\n  }, [map, position]);\n  const handleDrag = useCallback(() => {\n    if (followGps) {\n      setFollowGps(false);\n    }\n\n    if (centered) {\n      setCentered(false);\n    }\n  }, [centered, followGps]);\n  const handleGpsCenter = useCallback(() => {\n    if (followGps) {\n      if (centered) {\n        if (followGps) {\n          setFollowGps(false);\n        }\n\n        if (centered) {\n          setCentered(false);\n        }\n      } else {\n        centerGps();\n      }\n    } else if (!followGps) {\n      setFollowGps(true);\n    }\n  }, [centerGps, centered, followGps]);\n  const handleTogglePreference = useCallback(() => {\n    setPreferBikes((value) => !value);\n  }, []);\n  useEffect(() => {\n    const updatedStations: ValidStation[] = [];\n\n    stations.forEach((station) => {\n      if (!station.valid) {\n        // this should never happen\n        // eslint-disable-next-line no-console\n        console.debug(`Bad Station Found`, station);\n      }\n\n      updatedStations.push(station as ValidStation);\n    });\n\n    if (!stationCollectionComparer(validStations, updatedStations)) {\n      setValidStations(updatedStations);\n    }\n  }, [stations, validStations]);\n  useEffect(() => {\n    if (followGps) {\n      centerGps();\n    }\n  }, [followGps, position, centerGps]);\n\n  return (\n    <div className={styles.MapContainer}>\n      <MapBox\n        apiKey=\"AIzaSyBXrYScIU6sWYUWLLlovYhzq-bLzwTgAoc\"\n        opts={{\n          center: location,\n          zoom: defaultZoom,\n          maxZoom,\n        }}\n        onClick={hideInfo}\n        onDrag={handleDrag}\n        LoadingComponent={<Loader />}\n        useDrawing\n        useGeometry\n        usePlaces\n        useVisualization\n      />\n      <BicyclingLayer />\n      <CustomControl bindingPosition=\"BOTTOM_CENTER\">\n        <CustomButton onClick={updateStations}>\n          <RefreshImage className={styles.ButtonImage} />\n        </CustomButton>\n      </CustomControl>\n      <CustomControl bindingPosition=\"BOTTOM_CENTER\">\n        <CustomButton\n          disabled={!isValidPosition(position)}\n          onClick={handleGpsCenter}\n        >\n          <GpsImage\n            className={styles.ButtonImage}\n            style={{\n              fill: followGps ? '#008ABF' : '#000',\n              fillOpacity: isValidPosition(position) ? 1 : 0.25,\n            }}\n            focusable=\"false\"\n            aria-hidden=\"true\"\n          />\n        </CustomButton>\n      </CustomControl>\n      <CustomControl bindingPosition=\"BOTTOM_CENTER\">\n        <CustomButton onClick={selectedNearestStation}>\n          {preferBikes ? (\n            <BikeImage className={styles.ButtonImage} />\n          ) : (\n            <SlotImage\n              className={styles.ButtonImage}\n              style={{fill: '#008ABF'}}\n            />\n          )}\n        </CustomButton>\n      </CustomControl>\n      <CustomControl bindingPosition=\"RIGHT_TOP\">\n        <CustomButton onClick={handleTogglePreference}>\n          {preferBikes ? (\n            <BikeImage className={styles.ButtonImage} />\n          ) : (\n            <SlotImage\n              className={styles.ButtonImage}\n              style={{fill: '#008ABF'}}\n            />\n          )}\n        </CustomButton>\n      </CustomControl>\n      {map && validStations.length > 0 && (\n        <MarkerClusterer>\n          {validStations.map(({bikes, free, lat, lng, number, total}) => {\n            return (\n              <StationMarker\n                key={number}\n                bikes={bikes}\n                free={free}\n                id={number}\n                lat={lat}\n                lng={lng}\n                preferBikes={preferBikes}\n                showInfo={showInfo}\n                total={total}\n              />\n            );\n          })}\n        </MarkerClusterer>\n      )}\n      {renderGpsMarker()}\n      {renderInfoWindow()}\n    </div>\n  );\n}\n\nexport function nearestStation(\n  position: Position | undefined,\n  stations: ValidStation[],\n  preferNearestBike: boolean | undefined,\n) {\n  if (!position || stations.length === 0) {\n    return undefined;\n  }\n\n  const google = googleMapsAsync(false);\n\n  const source = new google.maps.LatLng(\n    position.coords.latitude,\n    position.coords.longitude,\n  );\n\n  return stations\n    .map((station) => ({\n      station,\n      distance: google.maps.geometry.spherical.computeDistanceBetween(\n        source,\n        new google.maps.LatLng(station.lat, station.lng),\n      ),\n    }))\n    .filter(\n      ({station: {bikes, errors, free, operative}}) =>\n        preferNearestBike == null ||\n        ((!errors || !errors.length) &&\n          operative &&\n          (preferNearestBike ? bikes > 0 : free > 0)),\n    )\n    .sort((left, right) => left.distance - right.distance)[0].station;\n}\n\nfunction stationCollectionComparer(prev: Station[], next: Station[]) {\n  if (prev.length !== next.length) {\n    return false;\n  }\n\n  const prevSorted = prev.sort(\n    ({number: aId = 0}, {number: bId = 0}) => aId - bId,\n  );\n  const nextSorted = next.sort(\n    ({number: aId = 0}, {number: bId = 0}) => aId - bId,\n  );\n\n  return prevSorted.every((prev, i) => stationComparer(prev, nextSorted[i]));\n}\n\nfunction stationComparer(prev: Station, next: Station) {\n  return (\n    prev.number === next.number &&\n    prev.valid === next.valid &&\n    JSON.stringify(prev.data) === JSON.stringify(next.data)\n  );\n}\n\nfunction gpsCenter(position: Position | undefined) {\n  if (position) {\n    const {\n      coords: {latitude, longitude},\n    } = position;\n\n    const google = googleMapsAsync();\n\n    return new google.maps.LatLng(latitude, longitude);\n  }\n\n  return undefined;\n}\n\nfunction gpsZoom(position: Position | undefined, max = maxZoom) {\n  if (position) {\n    const {\n      coords: {accuracy},\n    } = position;\n\n    // magic number explained here: https://gis.stackexchange.com/a/111589\n    return Math.min(max, Math.max(1, Math.log2(591657550 / accuracy) - 6));\n  }\n\n  return undefined;\n}\n\nfunction isValidPosition(position: Position | undefined) {\n  return (\n    position &&\n    position.coords.latitude !== 0 &&\n    position.coords.longitude !== 0\n  );\n}\n","import React, {\n  useCallback,\n  useContext,\n  useMemo,\n  useState,\n  useEffect,\n} from 'react';\nimport MarkerClustererPlus from '@google/markerclustererplus';\nimport {GoogleMapContext} from '@googlemap-react/core';\nimport {Props} from '@shopify/useful-types';\nimport {useGoogleNamespace} from 'utilities/google';\n\ntype Context = Props<typeof GoogleMapContext.Provider>['value'];\ntype Action = Context['dispatch'] extends (action: infer T) => void ? T : never;\n\nexport function useMarkerClusterer() {\n  const {dispatch, state} = useContext(GoogleMapContext);\n  const clusterer = useMemo(() => {\n    if (state && state.map) {\n      return new MarkerClustererPlus(state.map, [], {\n        averageCenter: true,\n        gridSize: 60,\n        maxZoom: 17,\n        enableRetinaIcons: true,\n      });\n    }\n\n    return undefined;\n  }, [state]);\n  const [context, setContext] = useState<Context>();\n  const Provider = useCallback(\n    (props: {children?: any}) =>\n      context ? <GoogleMapContext.Provider value={context} {...props} /> : null,\n    [context],\n  );\n  const [google] = useGoogleNamespace();\n  useEffect(() => {\n    if (!context && clusterer && state) {\n      setContext({\n        dispatch(action: Action) {\n          const {type, id, object} = action;\n\n          if (clusterer && state && state.objects) {\n            switch (type) {\n              case 'add_object':\n                if (object && object instanceof google.maps.Marker) {\n                  clusterer.addMarker(object);\n                }\n                break;\n              case 'remove_object':\n                if (id) {\n                  const marker = state.objects.get(id);\n\n                  if (marker && marker instanceof google.maps.Marker) {\n                    clusterer.removeMarker(marker);\n                  }\n                }\n                break;\n            }\n          }\n\n          dispatch(action);\n        },\n        state,\n      });\n    }\n  }, [clusterer, context, dispatch, google.maps.Marker, state]);\n\n  return Provider;\n}\n","import {useCallback, useDebugValue, useEffect, useState} from 'react';\nimport moment from 'moment';\nimport {QueryParams} from './useQueryParams';\n\ninterface UsePositionProps {\n  options?: PositionOptions;\n  params: QueryParams | undefined;\n}\n\nconst defaultOptions: PositionOptions = {\n  enableHighAccuracy: true,\n};\n\nexport function usePosition({options}: UsePositionProps) {\n  const [watchId, setWatchId] = useState<number>();\n  const [position, setPosition] = useState<Position>();\n  const [error, setError] = useState<PositionError>();\n  const handlePositionChanged = useCallback<PositionCallback>(setPosition, [\n    setPosition,\n  ]);\n  const handleError = useCallback<PositionErrorCallback>(setError, [setError]);\n  const updatePosition = useCallback(() => {\n    if (typeof navigator !== 'undefined') {\n      navigator.geolocation.getCurrentPosition(\n        handlePositionChanged,\n        handleError,\n        options || defaultOptions,\n      );\n    }\n  }, [handleError, handlePositionChanged, options]);\n  useEffect(() => {\n    if (!watchId && typeof navigator !== 'undefined') {\n      const id = navigator.geolocation.watchPosition(\n        handlePositionChanged,\n        handleError,\n        options || defaultOptions,\n      );\n\n      setWatchId(id);\n\n      return () => {\n        if (watchId) {\n          navigator.geolocation.clearWatch(watchId);\n\n          setWatchId(undefined);\n        }\n      };\n    }\n\n    return undefined;\n  }, [handleError, handlePositionChanged, options, watchId]);\n  useDebugValue(\n    position\n      ? `[${position.coords.latitude}, ${position.coords.longitude}] @ ${moment(\n          position.timestamp,\n        ).fromNow()}`\n      : 'Loading...',\n  );\n\n  return {\n    error,\n    position,\n    updatePosition,\n  };\n}\n","import {Station} from 'models';\nimport {googleMapsAsync} from 'utilities/google';\nimport {Smoove} from './transform';\n\nenum StationSourceType {\n  Smoove,\n}\n\nexport type SourceName = 'vancouver' | 'test';\n\nexport interface StationSourceConfig {\n  location: google.maps.LatLngLiteral;\n  name: string;\n  options?: any;\n  type: keyof typeof StationSourceType;\n  uri: string;\n  cors?: boolean;\n}\n\nconst configMap = new Map<SourceName, StationSourceConfig>([\n  [\n    'test',\n    {\n      location: {\n        lat: 49.279627,\n        lng: -123.121116,\n      },\n      name: 'Test Data',\n      type: 'Smoove',\n      uri: '/test_data',\n    },\n  ],\n  [\n    'vancouver',\n    {\n      location: {\n        lat: 49.279627,\n        lng: -123.121116,\n      },\n      name: 'Mobi Bike Vancouver',\n      type: 'Smoove',\n      uri: 'http://vancouver-ca.smoove.pro/api-public/stations',\n      cors: true,\n    },\n  ],\n]);\n\nexport function getConfig(key: SourceName) {\n  const config = configMap.get(key);\n\n  if (!config) {\n    throw new Error(`No station data for source '${key}'`);\n  }\n\n  return config;\n}\n\nexport function getConfigByLocation(location: google.maps.LatLngLiteral) {\n  const google = googleMapsAsync(false);\n\n  return Array.from<StationSourceConfig>(configMap.values())\n    .map((config) => ({\n      config,\n      distance: google.maps.geometry.spherical.computeDistanceBetween(\n        new google.maps.LatLng(location),\n        new google.maps.LatLng(config.location.lat, config.location.lng),\n      ),\n    }))\n    .sort((left, right) => left.distance - right.distance)[0].config;\n}\n\nexport type StationSourceTransform = (response: any) => Station[];\n\nexport function mapTransform({type}: StationSourceConfig) {\n  switch (type) {\n    case 'Smoove':\n      return Smoove;\n    default:\n      throw new Error(`Invalid Configuration '${type}'`);\n  }\n}\n","import {createStation, StationData} from 'models';\n\nexport interface SmooveStation {\n  name: string;\n  coordinates: string;\n  // eslint-disable-next-line babel/camelcase\n  total_slots: number;\n  // eslint-disable-next-line babel/camelcase\n  free_slots: number;\n  // eslint-disable-next-line babel/camelcase\n  avl_bikes: number;\n  operative: boolean;\n  style: string;\n}\n\nexport interface Response {\n  result: SmooveStation[];\n}\n\nexport function parseLatLng({coordinates}: SmooveStation) {\n  try {\n    const match = /^\\s*(-?\\d+\\.\\d+)\\s*,\\s*(-?\\d+\\.\\d+)\\s*$/.exec(coordinates);\n\n    if (!match) {\n      throw new Error(`Unable to parse \"lat, lng\" from ${coordinates}`);\n    }\n\n    return {\n      lat: Number(match[1]),\n      lng: Number(match[2]),\n    };\n  } catch (error) {\n    return {\n      latLngError: error,\n    };\n  }\n}\n\nexport function parseNameAndNumber({name}: SmooveStation) {\n  try {\n    const match = /^(\\d+)\\s+(.*)$/.exec(name);\n\n    if (!match) {\n      throw new Error(`Unable to parse \"number name\" from ${name}`);\n    }\n\n    return {\n      name: match[2],\n      number: Number(match[1]),\n    };\n  } catch (error) {\n    return {\n      nameNumberError: error,\n    };\n  }\n}\n\nexport function create(smooveData: SmooveStation) {\n  const {nameNumberError, name, number} = parseNameAndNumber(smooveData);\n  const {lat, latLngError, lng} = parseLatLng(smooveData);\n  const data: StationData = {\n    ...smooveData,\n    bikes: smooveData.avl_bikes,\n    free: smooveData.free_slots,\n    lat,\n    lng,\n    name,\n    number,\n    operative: smooveData.operative,\n    total: smooveData.total_slots,\n    errors: [],\n  };\n\n  if (nameNumberError) {\n    data.errors.push(nameNumberError);\n  }\n\n  if (latLngError) {\n    data.errors.push(latLngError);\n  }\n\n  return createStation(data);\n}\n\nexport function Smoove({result}: Response) {\n  return result.map(create);\n}\n","export interface StationData extends Partial<google.maps.LatLngLiteral> {\n  bikes: number;\n  errors: any[];\n  free: number;\n  name: string | undefined;\n  number: number | undefined;\n  operative: boolean;\n  total: number;\n}\n\nexport interface Station extends StationData {\n  data: StationData;\n  valid?: boolean;\n}\n\nexport interface ValidStation extends Station {\n  lat: number;\n  lng: number;\n  name: string;\n  number: number;\n  valid: true;\n}\n\nexport function createStation(data: StationData): Station {\n  return {\n    data,\n    valid: [\n      Number.isInteger(data.bikes),\n      Number.isInteger(data.free),\n      Number.isInteger(data.total),\n      data.number != null && Number.isInteger(data.number) && data.number > 0,\n      data.lat != null && Number.isFinite(data.lat) && data.lat !== 0,\n      data.lng != null && Number.isFinite(data.lng) && data.lng !== 0,\n      data.name != null && /^\\w/.test(data.name),\n      data.errors.length === 0,\n    ].every((x) => x),\n    ...data,\n  };\n}\n","import fetch from 'isomorphic-fetch';\nimport moment from 'moment';\nimport {Station} from 'models';\nimport {\n  getConfig,\n  getConfigByLocation,\n  mapTransform,\n  SourceName,\n  StationSourceConfig,\n  StationSourceTransform,\n} from './config';\n\nexport interface StationSourceResult {\n  config: StationSourceConfig;\n  error?: any;\n  fetchedAt: moment.Moment;\n  stations: Station[];\n}\n\nexport interface Options {\n  debug?: boolean;\n}\n\nexport class StationSource {\n  public static create(\n    configOrKey: SourceName | StationSourceConfig,\n    {debug}: Options,\n  ) {\n    const config =\n      typeof configOrKey === 'string' ? getConfig(configOrKey) : configOrKey;\n\n    return new StationSource(config, mapTransform(config), debug);\n  }\n\n  public static nearest(location: google.maps.LatLngLiteral, options: Options) {\n    return StationSource.create(getConfigByLocation(location), options);\n  }\n\n  readonly config: StationSourceConfig;\n  readonly verboseOutput: boolean;\n  private readonly transform: StationSourceTransform;\n\n  constructor(\n    config: StationSourceConfig,\n    transform: StationSourceTransform,\n    // eslint-disable-next-line no-process-env\n    verboseOutput = process.env.NODE_ENV !== 'production',\n  ) {\n    this.config = config;\n    this.transform = transform;\n    this.verboseOutput = verboseOutput;\n  }\n\n  async getJSON() {\n    const uri = this.config.cors\n      ? `https://cors.io/?${this.config.uri}`\n      : this.config.uri;\n    this.debug(`Fetching stations from '${uri}' ...`);\n\n    const response = await fetch(uri, {\n      headers: this.config.options ? this.config.options.headers : undefined,\n    });\n\n    const json = response.json();\n\n    this.debug('Fetch Response', json);\n\n    return json;\n  }\n\n  async getStations(): Promise<StationSourceResult> {\n    try {\n      const json = await this.getJSON();\n\n      const stations = this.transform(json);\n\n      this.debug(`Fetched ${stations.length} stations`);\n\n      return {\n        config: this.config,\n        fetchedAt: moment(),\n        stations,\n      };\n    } catch (error) {\n      this.debug(`Fetch failed: ${error.message || 'Unknown Error'}`, error);\n\n      return {\n        config: this.config,\n        error,\n        fetchedAt: moment(),\n        stations: [],\n      };\n    }\n  }\n\n  protected debug(message: string, ...args: any[]) {\n    if (this.verboseOutput) {\n      // eslint-disable-next-line no-console\n      console.log(message, args);\n    }\n  }\n}\n","import {useCallback, useDebugValue, useEffect, useMemo, useState} from 'react';\nimport {SourceName, StationSource, StationSourceResult} from 'data';\nimport {QueryParams} from './useQueryParams';\n\ninterface UseStationsProps {\n  params: QueryParams | undefined;\n}\n\nexport const defaultSourceName: SourceName = 'vancouver';\n\nfunction getSourceName(params: QueryParams | undefined) {\n  if (!params) {\n    return {};\n  }\n\n  return {\n    debug: Boolean(params.get('debug')),\n    sourceName: (params.get('source') ||\n      (params.get('test') && 'test') ||\n      defaultSourceName) as SourceName,\n  };\n}\n\nexport function useStations({params}: UseStationsProps) {\n  const {debug, sourceName} = getSourceName(params);\n  const [stationSourceResult, setStationSourceResult] = useState<\n    StationSourceResult\n  >();\n  const source = useMemo(() => {\n    if (sourceName) {\n      return StationSource.create(sourceName, {debug});\n    }\n\n    return null;\n  }, [debug, sourceName]);\n  const updateStations = useCallback(() => {\n    if (source) {\n      return source.getStations().then(setStationSourceResult);\n    }\n\n    return undefined;\n  }, [source]);\n  useEffect(() => {\n    if (source) {\n      updateStations();\n    }\n  }, [source, updateStations]);\n  useDebugValue(\n    stationSourceResult\n      ? `${\n          stationSourceResult.stations.length\n        } stations loaded (${stationSourceResult.fetchedAt.fromNow()})`\n      : 'Loading...',\n  );\n\n  return {\n    stationSourceResult,\n    updateStations,\n  };\n}\n","/* eslint-disable */\n\n// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\n    ),\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as {env: {[key: string]: string}}).env.PUBLIC_URL,\n      window.location.href,\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA',\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.',\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.',\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {App} from './App';\nimport {unregister} from './serviceWorker';\n\nimport 'styles/_global.scss';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nunregister();\n","import React from 'react';\nimport {GoogleMapProvider} from '@googlemap-react/core';\nimport {Loader} from 'components';\nimport {Header, StationMap} from './components';\nimport {useQueryParams, usePosition, useStations} from './hooks';\n\nimport styles from './App.module.scss';\n\nexport function App() {\n  const {params} = useQueryParams();\n  const {position} = usePosition({params});\n  const {stationSourceResult, updateStations} = useStations({params});\n  return (\n    <div className={styles.Container}>\n      <Header />\n      <div className={styles.Content}>\n        {stationSourceResult ? (\n          <GoogleMapProvider>\n            <StationMap\n              fetchedAt={stationSourceResult.fetchedAt}\n              location={stationSourceResult.config.location}\n              stations={stationSourceResult.stations}\n              position={position}\n              updateStations={updateStations}\n            />\n          </GoogleMapProvider>\n        ) : (\n          <Loader />\n        )}\n      </div>\n    </div>\n  );\n}\n","import {useDebugValue, useEffect, useState} from 'react';\n\nexport type QueryParams = Map<string, string>;\n\nexport function useQueryParams() {\n  const [params, setParams] = useState<QueryParams>();\n  useEffect(() => {\n    if (typeof window !== 'undefined' && !params) {\n      const params = new Map<string, string>();\n\n      new URLSearchParams(window.location.search).forEach((value, key) => {\n        params.set(key.toLowerCase(), value);\n      });\n\n      setParams(params);\n    }\n  }, [params]);\n  useDebugValue(\n    typeof window === 'undefined' ? 'Loading...' : window.location.search,\n  );\n\n  return {\n    params,\n  };\n}\n"],"sourceRoot":""}